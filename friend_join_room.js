(()=>{"use strict";var e={2392:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.API_ORIGIN=void 0,o.API_ORIGIN="https://little-water-8645.fly.dev"}},o={};function r(t){var n=o[t];if(void 0!==n)return n.exports;var i=o[t]={exports:{}};return e[t](i,i.exports,r),i.exports}(()=>{const e=r(2392),o=new URLSearchParams(new URL(location.href).search),t=o.get("room_key"),n=o.get("room_id");if(null==t||null==n)alert("この対戦参加用 URL は無効です"),location.href="entrance.html";else{const o=t,r=n;(async()=>{console.log(`trying to join a room ${r} with a key ${o}:`);const t=await async function(o,r){return await async function(e,o,r){const t=await fetch(e,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"},keepalive:!0}).then((e=>e.json())).then(r).catch((e=>{console.error("Error:",e)}));if(console.log(t),!t)throw alert("network error!"),new Error("network error!");return t}(location.href.includes("staging")?`${e.API_ORIGIN}/matching/friend/join_room/staging`:`${e.API_ORIGIN}/matching/friend/join_room`,o,(e=>e))}({room_id:r,room_key:o});var n,i,s;"Err"===t.type?(alert(t.why_illegal),location.href="entrance.html"):(n=t.ret.session_token,i=t.ret.is_first_move_my_move,s=t.ret.is_IA_down_for_me,sessionStorage.vs="someone",sessionStorage.session_token=n,sessionStorage.is_first_move_my_move=JSON.stringify(i),sessionStorage.is_IA_down_for_me=JSON.stringify(s),location.href="main.html")})()}})()})();