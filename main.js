(()=>{var e={9501:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=void 0;const n=o(514);t.assert=function(e,t){if(!e)throw new n.AssertionError(t)}},514:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssertionError=void 0;const n=o(108);class r extends n.CustomError{}t.AssertionError=r},108:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomError=void 0;const n=o(9577),r=o(1299),i=o(4510),a=o(4977);class s extends Error{get name(){var e,t;return null!==(t=null!==(e=(0,n.first)((0,r.getErrorNames)(this)))&&void 0!==e?e:s.name)&&void 0!==t?t:"CustomError"}static[Symbol.hasInstance](e){var t;if((0,i.isError)(e)||(0,a.isSerializableError)(e)){const o=[null!==(t=this.prototype.constructor.name)&&void 0!==t?t:this.name,...(0,r.getErrorNames)(this.prototype)].reverse(),i=(0,n.toArray)((0,r.getErrorNames)(e)).reverse();return o.every(((e,t)=>e===i[t]))}return!1}}t.CustomError=s},1299:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorNames=void 0;const n=o(4510),r=o(4192);t.getErrorNames=function*(e){var t;if((0,n.isError)(e))for(const o of(0,r.traverseErrorPrototypeChain)(e))(null===(t=o.constructor)||void 0===t?void 0:t.name)&&(yield o.constructor.name);else yield e.name,yield*e.ancestors}},6433:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hydrate=void 0;const n=o(8317);function r(e,t){const o=function(){(0,n.pass)()};return(o.prototype=Object.create(e.prototype)).constructor=o,Object.defineProperty(o,"name",{value:t}),o}t.hydrate=function(e){var t;const o=[e.name,...e.ancestors].slice(0,-1).reverse();let n=Error;for(const e of o)n=r(n,e);const i=new n;return i.name=e.name,i.message=e.message,i.stack=null!==(t=e.stack)&&void 0!==t?t:void 0,i}},3271:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(108),t),r(o(514),t),r(o(4977),t),r(o(5887),t),r(o(6433),t),r(o(9501),t),r(o(1299),t),r(o(4192),t)},5887:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=void 0;const n=o(1299),r=o(9577);t.normalize=function(e){var t;const[o,...i]=(0,r.toArray)((0,n.getErrorNames)(e));return{name:o,ancestors:i,message:e.message,stack:null!==(t=e.stack)&&void 0!==t?t:null}}},4977:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableError=void 0;const n=o(4510);t.isSerializableError=function(e){return(0,n.isObject)(e)&&(0,n.isString)(e.name)&&(0,n.isString)(e.message)&&((0,n.isString)(e.stack)||(0,n.isNull)(e.stack))&&(0,n.isArray)(e.ancestors)&&e.ancestors.every(n.isString)}},4192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traverseErrorPrototypeChain=void 0,t.traverseErrorPrototypeChain=function*(e){let t=e;for(;(t=Object.getPrototypeOf(t))&&(yield t,t!==Error.prototype););}},7839:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goMacrotask=void 0;const n=o(8468);t.goMacrotask=function(e){return new Promise(((t,o)=>{(0,n.setImmediate)((async()=>{try{t(await e())}catch(e){o(e)}}))}))}},6806:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goMicrotask=void 0,t.goMicrotask=function(e){return new Promise(((t,o)=>{queueMicrotask((async()=>{try{t(await e())}catch(e){o(e)}}))}))}},1421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go=void 0,t.go=function(e){return e()}},6065:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(1421),t),r(o(6806),t),r(o(7839),t)},8317:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(5523),t),r(o(1470),t)},1470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passAsync=void 0,t.passAsync=async function(){}},5523:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pass=void 0,t.pass=function(){}},8762:(e,t)=>{"use strict";function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isntEmptyArray=t.isEmptyArray=t.isntArray=t.isArray=void 0,t.isArray=o,t.isntArray=function(e){return!o(e)},t.isEmptyArray=function(e){return 0===e.length},t.isntEmptyArray=function(e){return 0!==e.length}},2336:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntAsyncIterable=t.isAsyncIterable=void 0;const n=o(3758),r=o(5448),i=o(3345);function a(e){return(0,n.isntNull)(e)&&(0,r.isntUndefined)(e)&&(0,i.isFunction)(e[Symbol.asyncIterator])}t.isAsyncIterable=a,t.isntAsyncIterable=function(e){return!a(e)}},4342:(e,t)=>{"use strict";function o(e){return"bigint"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntBigInt=t.isBigInt=void 0,t.isBigInt=o,t.isntBigInt=function(e){return!o(e)}},3560:(e,t)=>{"use strict";function o(e){return"boolean"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntBoolean=t.isBoolean=void 0,t.isBoolean=o,t.isntBoolean=function(e){return!o(e)}},5792:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntChar=t.isChar=void 0;const n=o(6986);function r(e){return(0,n.isString)(e)&&1===e.length}t.isChar=r,t.isntChar=function(e){return!r(e)}},5655:(e,t)=>{"use strict";function o(e){return e instanceof Date}Object.defineProperty(t,"__esModule",{value:!0}),t.isntDate=t.isDate=void 0,t.isDate=o,t.isntDate=function(e){return!o(e)}},3245:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inEnum=void 0,t.inEnum=function(e,t){return Object.values(t).includes(e)}},4730:(e,t)=>{"use strict";function o(e){return e instanceof Error}Object.defineProperty(t,"__esModule",{value:!0}),t.isntError=t.isError=void 0,t.isError=o,t.isntError=function(e){return!o(e)}},4716:(e,t)=>{"use strict";function o(e){return!e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntFalsy=t.isFalsy=void 0,t.isFalsy=o,t.isntFalsy=function(e){return!o(e)}},3345:(e,t)=>{"use strict";function o(e){return"function"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntFunction=t.isFunction=void 0,t.isFunction=o,t.isntFunction=function(e){return!o(e)}},4510:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(8762),t),r(o(2336),t),r(o(4342),t),r(o(3560),t),r(o(5792),t),r(o(5655),t),r(o(3245),t),r(o(4730),t),r(o(4716),t),r(o(3345),t),r(o(8969),t),r(o(9756),t),r(o(3758),t),r(o(2227),t),r(o(3011),t),r(o(5408),t),r(o(5866),t),r(o(6986),t),r(o(5448),t),r(o(5377),t),r(o(3674),t),r(o(3210),t)},8969:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntIterable=t.isIterable=void 0;const n=o(3758),r=o(5448),i=o(3345);function a(e){return(0,n.isntNull)(e)&&(0,r.isntUndefined)(e)&&(0,i.isFunction)(e[Symbol.iterator])}t.isIterable=a,t.isntIterable=function(e){return!a(e)}},9756:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntJsonable=t.isJsonable=t.isntJson=t.isJson=void 0;const n=o(3758),r=o(3560),i=o(6986),a=o(3011),s=o(8762),c=o(5408);function l(e){return(0,n.isNull)(e)||(0,r.isBoolean)(e)||(0,i.isString)(e)||(0,a.isNumber)(e)||(0,s.isArray)(e)&&e.every(l)||(0,c.isPlainObject)(e)&&Object.values(e).every(l)}t.isJson=l,t.isntJson=function(e){return!l(e)},t.isJsonable=function(e){try{return JSON.stringify(e),!0}catch(e){return!1}},t.isntJsonable=function e(t){return!e(t)}},3758:(e,t)=>{"use strict";function o(e){return null===e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntNull=t.isNull=void 0,t.isNull=o,t.isntNull=function(e){return!o(e)}},2227:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntNullish=t.isNullish=void 0;const n=o(3758),r=o(5448);function i(e){return(0,n.isNull)(e)||(0,r.isUndefined)(e)}t.isNullish=i,t.isntNullish=function(e){return!i(e)}},3011:(e,t)=>{"use strict";function o(e){return"number"==typeof e}function n(e){return Number.isNaN(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isntNaN=t.isNaN=t.isNegativeInfinity=t.isPositiveInfinity=t.isFinite=t.isntNumber=t.isNumber=void 0,t.isNumber=o,t.isntNumber=function(e){return!o(e)},t.isFinite=function(e){return Number.isFinite(e)},t.isPositiveInfinity=function(e){return e===1/0},t.isNegativeInfinity=function(e){return e===-1/0},t.isNaN=n,t.isntNaN=function(e){return!n(e)}},5408:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isntEmptyObject=t.isEmptyObject=t.isntPlainObject=t.isPlainObject=t.isntObject=t.isObject=void 0;const r=n(o(8630));function i(e){return null!==e&&"object"==typeof e}function a(e){return(0,r.default)(e)}t.isObject=i,t.isntObject=function(e){return!i(e)},t.isPlainObject=a,t.isntPlainObject=function(e){return!a(e)},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.isntEmptyObject=function(e){return 0!==Object.keys(e).length}},5866:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPromiseLike=t.isntPromiseLike=t.isntPromise=t.isPromise=void 0;const n=o(5408),r=o(3345);function i(e){return e instanceof Promise}function a(e){return(0,n.isObject)(e)&&(0,r.isFunction)(e.then)}t.isPromise=i,t.isntPromise=function(e){return!i(e)},t.isntPromiseLike=function(e){return!a(e)},t.isPromiseLike=a},3674:(e,t)=>{"use strict";function o(e){return e instanceof RegExp}Object.defineProperty(t,"__esModule",{value:!0}),t.isntRegExp=t.isRegExp=void 0,t.isRegExp=o,t.isntRegExp=function(e){return!o(e)}},6986:(e,t)=>{"use strict";function o(e){return"string"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntString=t.isString=void 0,t.isString=o,t.isntString=function(e){return!o(e)}},3210:(e,t)=>{"use strict";function o(e){return"symbol"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntSymbol=t.isSymbol=void 0,t.isSymbol=o,t.isntSymbol=function(e){return!o(e)}},5448:(e,t)=>{"use strict";function o(e){return void 0===e}Object.defineProperty(t,"__esModule",{value:!0}),t.isntUndefined=t.isUndefined=void 0,t.isUndefined=o,t.isntUndefined=function(e){return!o(e)}},5377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAbsoluteURL=void 0,t.isAbsoluteURL=function(e){try{return new URL(e),!0}catch(e){return!1}}},2122:function(e,t){"use strict";var o=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,r,i=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};function r(e){return 0===e["王"]["黒"]&&0===e["王"]["赤"]?function(e){function t(t){return e[t]["赤"]+e[t]["黒"]>0}function o(t){return e[t]["赤"]+e[t]["黒"]}var n=new Set;e["兵"]["赤"]>=5||e["兵"]["黒"]>=5?n.add("同色闇戦之集"):o("兵")>=5&&n.add("闇戦之集"),e["車"]["赤"]>=1&&e["兵"]["赤"]>=2||e["車"]["黒"]>=1&&e["兵"]["黒"]>=2?n.add("同色助友"):t("車")&&o("兵")>=2&&n.add("助友"),e["将"]["赤"]>=1&&e["兵"]["赤"]>=2||e["将"]["黒"]>=1&&e["兵"]["黒"]>=2?n.add("同色戦集"):t("将")&&o("兵")>=2&&n.add("戦集");var r=function(o,r,i){var a;(a=o).every((function(t){return e[t]["赤"]>=1}))||a.every((function(t){return e[t]["黒"]>=1}))?n.add(r):function(e){return e.every(t)}(o)&&n.add(i)};return r(["虎","馬"],"同色獣","獣"),r(["船","車","馬"],"同色行行","行行"),r(["兵","弓","馬"],"同色馬弓兵","馬弓兵"),r(["筆","巫","将"],"同色地心","地心"),r(["兵","弓","将","筆","巫"],"同色筆兵無傾","筆兵無傾"),n}(e):function(e){function t(t){return e[t]["赤"]+e[t]["黒"]>0}var o=new Set(["王"]);o.add("王");var i,a=["兵","弓","車","虎","馬","筆","巫","将","船"];(i=n(a,["王"])).every((function(t){return e[t]["赤"]>=1}))||i.every((function(t){return e[t]["黒"]>=1}))?o.add("同色無抗行処"):function(e){return e.every(t)}(n(a,["王"]))&&o.add("無抗行処");var s=function(t){if(1===e["王"][t]){e["王"][t]--;for(var i=0;i<a.length;i++)e[a[i]][t]++,o=new Set(n(o,r(e))),e[a[i]][t]--;e["王"][t]++}};s("赤"),s("黒");var c=function(e,t){o.has(e)&&o.delete(t)};return c("同色助友","助友"),c("同色地心","地心"),c("同色戦集","戦集"),c("同色馬弓兵","馬弓兵"),c("同色獣","獣"),c("同色行行","行行"),c("同色筆兵無傾","筆兵無傾"),c("同色闇戦之集","闇戦之集"),c("同色無抗行処","無抗行処"),o}(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.generate_example=t.calculate_hands_and_score_from_pieces=t.hand_to_score=t.toObtainablePieces2=void 0,t.toObtainablePieces2={黒兵:{color:"黒",prof:"兵"},赤兵:{color:"赤",prof:"兵"},黒弓:{color:"黒",prof:"弓"},黒車:{color:"黒",prof:"車"},黒虎:{color:"黒",prof:"虎"},黒馬:{color:"黒",prof:"馬"},黒筆:{color:"黒",prof:"筆"},黒巫:{color:"黒",prof:"巫"},黒将:{color:"黒",prof:"将"},赤弓:{color:"赤",prof:"弓"},赤車:{color:"赤",prof:"車"},赤虎:{color:"赤",prof:"虎"},赤馬:{color:"赤",prof:"馬"},赤筆:{color:"赤",prof:"筆"},赤巫:{color:"赤",prof:"巫"},赤将:{color:"赤",prof:"将"},黒王:{color:"黒",prof:"王"},赤王:{color:"赤",prof:"王"},黒船:{color:"黒",prof:"船"},赤船:{color:"赤",prof:"船"}},t.hand_to_score={無抗行処:50,同色無抗行処:52,筆兵無傾:10,同色筆兵無傾:12,地心:7,同色地心:9,馬弓兵:5,同色馬弓兵:7,行行:5,同色行行:7,王:5,獣:3,同色獣:5,戦集:3,同色戦集:5,助友:3,同色助友:5,闇戦之集:3,同色闇戦之集:5,皇再来:-3,撃皇:-5},t.calculate_hands_and_score_from_pieces=function(e){var o=function(e){for(var o=e.map((function(e){return t.toObtainablePieces2[e]})),i={兵:{黒:0,赤:0},弓:{黒:0,赤:0},車:{黒:0,赤:0},虎:{黒:0,赤:0},馬:{黒:0,赤:0},筆:{黒:0,赤:0},巫:{黒:0,赤:0},将:{黒:0,赤:0},王:{黒:0,赤:0},船:{黒:0,赤:0}},a=0;a<o.length;a++)i[o[a].prof][o[a].color]++;var s=[];return i["兵"]["黒"]>8&&s.push("黒兵"),i["兵"]["赤"]>8&&s.push("赤兵"),i["弓"]["黒"]>2&&s.push("黒弓"),i["弓"]["赤"]>2&&s.push("赤弓"),i["車"]["黒"]>2&&s.push("黒車"),i["車"]["赤"]>2&&s.push("赤車"),i["虎"]["黒"]>2&&s.push("黒虎"),i["虎"]["赤"]>2&&s.push("赤虎"),i["馬"]["黒"]>2&&s.push("黒馬"),i["馬"]["赤"]>2&&s.push("赤馬"),i["筆"]["黒"]>2&&s.push("黒筆"),i["筆"]["赤"]>2&&s.push("赤筆"),i["巫"]["黒"]>2&&s.push("黒巫"),i["巫"]["赤"]>2&&s.push("赤巫"),i["将"]["黒"]>2&&s.push("黒将"),i["将"]["赤"]>2&&s.push("赤将"),i["王"]["黒"]>1&&s.push("黒王"),i["王"]["赤"]>1&&s.push("赤王"),i["船"]["黒"]>1&&s.push("黒船"),i["船"]["赤"]>1&&s.push("赤船"),s.length>0?{too_many:s}:n(r(i))}(e);return Array.isArray(o)?{error:!1,score:o.map((function(e){return t.hand_to_score[e]})).reduce((function(e,t){return e+t}),0),hands:o}:{error:!0,too_many:o.too_many}},t.generate_example=function(e){for(var t,n=["黒兵","黒兵","黒兵","黒兵","黒兵","黒兵","黒兵","黒兵","赤兵","赤兵","赤兵","赤兵","赤兵","赤兵","赤兵","赤兵","黒弓","黒車","黒虎","黒馬","黒筆","黒巫","黒将","黒弓","黒車","黒虎","黒馬","黒筆","黒巫","黒将","赤弓","赤車","赤虎","赤馬","赤筆","赤巫","赤将","赤弓","赤車","赤虎","赤馬","赤筆","赤巫","赤将","黒王","赤王","黒船","赤船"],r=n.length-1;r>0;r--){var i=Math.floor(Math.random()*(r+1));t=o([n[i],n[r]],2),n[r]=t[0],n[i]=t[1]}return n.slice(0,e)}},8431:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(2122),t)},4974:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(101),t),r(o(6453),t),r(o(5588),t)},5588:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6453:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},101:(e,t)=>{"use strict";var o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.Profession=t.Color=void 0,(n=t.Color||(t.Color={}))[n.Kok1=0]="Kok1",n[n.Huok2=1]="Huok2",(o=t.Profession||(t.Profession={}))[o.Nuak1=0]="Nuak1",o[o.Kauk2=1]="Kauk2",o[o.Gua2=2]="Gua2",o[o.Kaun1=3]="Kaun1",o[o.Dau2=4]="Dau2",o[o.Maun1=5]="Maun1",o[o.Kua2=6]="Kua2",o[o.Tuk2=7]="Tuk2",o[o.Uai1=8]="Uai1",o[o.Io=9]="Io"},3945:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateMovablePositions=t.canGetOccupiedByNonTam=t.canGetOccupiedBy=t.isTamHue=t.eightNeighborhood=void 0;const n=o(6233),r=o(4974);function i(e,t){const[o,n]=e;return t.map((([e,t])=>[o+e,n+t])).filter((([e,t])=>0<=e&&e<=8&&0<=t&&t<=8)).map((([e,t])=>[e,t]))}function a(e){const[t,o]=e,n=[];for(let e=-8;e<=8;e++)for(let r=-8;r<=8;r++)t*r-o*e==0&&(t*e+o*r<=0||e*e+r*r>=t*t+o*o||(n[n.length]=[e,r]));return n}function s(e,t,o){return[].concat(...t.map((t=>c(e,t,o))))}function c(e,t,o){return i(e,a(t)).every((([e,t])=>null==o[e][t]))?i(e,[t]):[]}function l(e,t,o){return[].concat(...t.map((t=>function(e,t,o){return i(e,a(t)).filter((([e,t])=>null!=o[e][t])).length<=1?i(e,[t]):[]}(e,t,o))))}function u(e){return i(e,[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]])}function d(e,t,o){return!!((0,n.coordEq)(e,[2,2])||(0,n.coordEq)(e,[2,6])||(0,n.coordEq)(e,[3,3])||(0,n.coordEq)(e,[3,5])||(0,n.coordEq)(e,[4,4])||(0,n.coordEq)(e,[5,3])||(0,n.coordEq)(e,[5,5])||(0,n.coordEq)(e,[6,2])||(0,n.coordEq)(e,[6,6]))||!(!o||"Tam2"!==t[e[0]][e[1]])||u(e).some((([e,o])=>"Tam2"===t[e][o]))}function _(e,t,o,n){const[i,a]=t,s=o[i][a];return"Tam2"!==s&&(null===s||s.side!==e&&!((e,t)=>u(t).filter((([t,i])=>{const a=o[t][i];return null!=a&&"Tam2"!==a&&a.prof===r.Profession.Uai1&&a.side!==e&&d([t,i],o,n)})).length>0)(e,t))}console.assert("[[-4,2],[-2,1]]"===JSON.stringify(a([-6,3]))),console.assert("[[-2,0],[-1,0]]"===JSON.stringify(a([-3,0]))),console.assert("[[0,1],[0,2]]"===JSON.stringify(a([0,3]))),t.eightNeighborhood=u,t.isTamHue=d,t.canGetOccupiedBy=function(e,t,o,n,r){if("Tam2"===o){const[e,o]=t;return null===n[e][o]}return _(e,t,n,r)},t.canGetOccupiedByNonTam=_,t.calculateMovablePositions=function(e,t,o,n){if("Tam2"===t)return{finite:u(e),infinite:[]};if(t.prof===r.Profession.Io)return{finite:u(e),infinite:[]};const _=[[-8,-8],[-7,-7],[-6,-6],[-5,-5],[-4,-4],[-3,-3],[-2,-2],[-1,-1]],f=[[-8,8],[-7,7],[-6,6],[-5,5],[-4,4],[-3,3],[-2,2],[-1,1]],p=[[8,-8],[7,-7],[6,-6],[5,-5],[4,-4],[3,-3],[2,-2],[1,-1]],m=[[8,8],[7,7],[6,6],[5,5],[4,4],[3,3],[2,2],[1,1]],y=[[-1,0],[-2,0],[-3,0],[-4,0],[-5,0],[-6,0],[-7,0],[-8,0]],v=[[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0]],E=[[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6],[0,-7],[0,-8]],w=[[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8]];if(d(e,o,n))switch(t.prof){case r.Profession.Uai1:return{finite:u(e),infinite:[]};case r.Profession.Kaun1:return{finite:i(e,[[-2,-2],[-2,2],[2,2],[2,-2]]),infinite:[]};case r.Profession.Kauk2:return{finite:[...i(e,[[-1,0],[0,-1],[0,1],[1,0]]),...c(e,[-2,0],o)],infinite:[]};case r.Profession.Nuak1:return{finite:[...i(e,[[0,-1],[0,1]]),...s(e,[[0,-2],[0,2]],o)],infinite:s(e,[...y,...v],o)};case r.Profession.Gua2:case r.Profession.Dau2:return{finite:[],infinite:s(e,[..._,...f,...p,...m],o)};case r.Profession.Maun1:{const t=[[-8,-8],[-7,-7],[-6,-6],[-5,-5],[-4,-4],[-3,-3],[-2,-2],[-8,8],[-7,7],[-6,6],[-5,5],[-4,4],[-3,3],[-2,2],[8,-8],[7,-7],[6,-6],[5,-5],[4,-4],[3,-3],[2,-2],[8,8],[7,7],[6,6],[5,5],[4,4],[3,3],[2,2]];let n=[];for(let r=0;r<t.length;r++){const s=t[r];i(e,a(s).filter((e=>!([-1,1].includes(e[0])&&[-1,1].includes(e[1]))))).every((([e,t])=>null==o[e][t]))&&(n=[...n,...i(e,[s])])}return{finite:[],infinite:n}}case r.Profession.Kua2:return{finite:[],infinite:s(e,[...y,...v,...E,...w],o)};case r.Profession.Tuk2:return{finite:[],infinite:l(e,[...y,...v,...E,...w,..._,...f,...p,...m],o)};default:return t.prof}else switch(t.prof){case r.Profession.Kauk2:return{finite:i(e,[[-1,0]]),infinite:[]};case r.Profession.Kaun1:return{finite:i(e,[[-2,0],[2,0],[0,-2],[0,2]]),infinite:[]};case r.Profession.Dau2:return{finite:i(e,[[-1,-1],[-1,1],[1,-1],[1,1]]),infinite:[]};case r.Profession.Maun1:return{finite:i(e,[[-2,-2],[-2,2],[2,2],[2,-2]]),infinite:[]};case r.Profession.Nuak1:return{finite:[],infinite:s(e,y,o)};case r.Profession.Gua2:return{finite:[],infinite:s(e,[...y,...v,...E,...w],o)};case r.Profession.Kua2:return{finite:i(e,[[0,-1],[0,1]]),infinite:s(e,[...y,...v],o)};case r.Profession.Tuk2:return{finite:i(e,[[-1,0],[1,0]]),infinite:s(e,[...E,...w],o)};case r.Profession.Uai1:return{finite:i(e,[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,1]]),infinite:[]};default:return t.prof}}},3247:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initial_board_with_IA_down=void 0;const n=o(6233),r=o(4974);t.initial_board_with_IA_down=[[{color:r.Color.Huok2,prof:r.Profession.Kua2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Maun1,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kaun1,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Uai1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Io,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Uai1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kaun1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Maun1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kua2,side:n.Side.Downward}],[{color:r.Color.Kok1,prof:r.Profession.Tuk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Gua2,side:n.Side.Downward},null,{color:r.Color.Kok1,prof:r.Profession.Dau2,side:n.Side.Downward},null,{color:r.Color.Huok2,prof:r.Profession.Dau2,side:n.Side.Downward},null,{color:r.Color.Huok2,prof:r.Profession.Gua2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Tuk2,side:n.Side.Downward}],[{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Nuak1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward}],[null,null,null,null,null,null,null,null,null],[null,null,null,null,"Tam2",null,null,null,null],[null,null,null,null,null,null,null,null,null],[{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Nuak1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward}],[{color:r.Color.Huok2,prof:r.Profession.Tuk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Gua2,side:n.Side.Upward},null,{color:r.Color.Huok2,prof:r.Profession.Dau2,side:n.Side.Upward},null,{color:r.Color.Kok1,prof:r.Profession.Dau2,side:n.Side.Upward},null,{color:r.Color.Kok1,prof:r.Profession.Gua2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Tuk2,side:n.Side.Upward}],[{color:r.Color.Kok1,prof:r.Profession.Kua2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Maun1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kaun1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Uai1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Io,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Uai1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kaun1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Maun1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kua2,side:n.Side.Upward}]]},892:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(3945),t),r(o(3247),t),r(o(6696),t),r(o(6233),t)},6696:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_valid_opponent_moves=t.not_from_hand_candidates_with_kut2tam2=t.not_from_hand_candidates=t.not_from_hand_candidates_=t.from_hand_candidates=t.empty_squares=t.get_opponent_pieces_rotated=t.isWater=t.isWaterAbs=t.fromAbsoluteCoord_=t.toAbsoluteCoord_=void 0;const n=o(6233),r=o(4974),i=o(3945);function a([e,t],o){return[["A","E","I","U","O","Y","AI","AU","IA"][o?e:8-e],["K","L","N","T","Z","X","C","M","P"][o?t:8-t]]}function s([e,t]){return 4===e&&2===t||4===e&&3===t||4===e&&4===t||4===e&&5===t||4===e&&6===t||2===e&&4===t||3===e&&4===t||5===e&&4===t||6===e&&4===t}t.toAbsoluteCoord_=a,t.fromAbsoluteCoord_=function([e,t],o){let n,r;if("A"===e)n=0;else if("E"===e)n=1;else if("I"===e)n=2;else if("U"===e)n=3;else if("O"===e)n=4;else if("Y"===e)n=5;else if("AI"===e)n=6;else if("AU"===e)n=7;else{if("IA"!==e)throw new Error("does not happen");n=8}if("K"===t)r=0;else if("L"===t)r=1;else if("N"===t)r=2;else if("T"===t)r=3;else if("Z"===t)r=4;else if("X"===t)r=5;else if("C"===t)r=6;else if("M"===t)r=7;else{if("P"!==t)throw new Error("does not happen");r=8}return o?[n,r]:[8-n,8-r]},t.isWaterAbs=function([e,t]){return"O"===e&&"N"===t||"O"===e&&"T"===t||"O"===e&&"Z"===t||"O"===e&&"X"===t||"O"===e&&"C"===t||"I"===e&&"Z"===t||"U"===e&&"Z"===t||"Y"===e&&"Z"===t||"AI"===e&&"Z"===t},t.isWater=s;const c=[0,1,2,3,4,5,6,7,8];t.get_opponent_pieces_rotated=e=>c.flatMap((t=>c.flatMap((o=>{const r=[t,o],i=e.f.currentBoard[t][o];return null===i?[]:"Tam2"===i?[{rotated_piece:i,rotated_coord:(0,n.rotateCoord)(r)}]:i.side===n.Side.Downward?[{rotated_piece:{prof:i.prof,color:i.color,side:n.Side.Upward},rotated_coord:(0,n.rotateCoord)(r)}]:[]})))),t.empty_squares=e=>c.flatMap((t=>c.flatMap((o=>{const n=[t,o];return null==e.f.currentBoard[t][o]?[n]:[]}))));const l=(e,t)=>(0,i.eightNeighborhood)(t).filter((([t,o])=>null==e[t][o]));t.from_hand_candidates=e=>e.f.hop1zuo1OfDownward.flatMap((o=>(0,t.empty_squares)(e).flatMap((t=>[{type:"NonTamMove",data:{type:"FromHand",color:o.color,prof:o.prof,dest:a(t,e.IA_is_down)}}])))),t.not_from_hand_candidates_=(e,o)=>(0,t.get_opponent_pieces_rotated)(o).flatMap((({rotated_piece:t,rotated_coord:c})=>{const{finite:u,infinite:d}=(0,i.calculateMovablePositions)(c,t,(0,n.rotateBoard)(o.f.currentBoard),o.tam_itself_is_tam_hue),_=[...u.map(n.rotateCoord),...d.map(n.rotateCoord)],f=(0,n.rotateCoord)(c);return _.flatMap((u=>{function d(e,t,o){return s(e)&&!s(o)&&t!==r.Profession.Nuak1}const _=o.f.currentBoard[u[0]][u[1]],p=e=>{const t=u,r=(0,n.rotateBoard)(o.f.currentBoard);r[c[0]][c[1]]=null;const{finite:s,infinite:l}=(0,i.calculateMovablePositions)((0,n.rotateCoord)(t),e,r,o.tam_itself_is_tam_hue),_=s.map(n.rotateCoord),p=l.map(n.rotateCoord);return[..._.flatMap((s=>(0,i.canGetOccupiedBy)(n.Side.Downward,s,{color:e.color,prof:e.prof,side:n.Side.Downward},(0,n.rotateBoard)(r),o.tam_itself_is_tam_hue)?[{type:"NonTamMove",data:{type:"SrcStepDstFinite",src:a(f,o.IA_is_down),step:a(t,o.IA_is_down),dest:a(s,o.IA_is_down),is_water_entry_ciurl:d(s,e.prof,f)}}]:[])),...p.flatMap((s=>(0,i.canGetOccupiedBy)(n.Side.Downward,s,{color:e.color,prof:e.prof,side:n.Side.Downward},(0,n.rotateBoard)(r),o.tam_itself_is_tam_hue)?[{type:"InfAfterStep",src:a(f,o.IA_is_down),step:a(t,o.IA_is_down),plannedDirection:a(s,o.IA_is_down),stepping_ciurl:null,finalResult:null}]:[]))]};if("Tam2"===t){const e=(0,n.rotateBoard)(o.f.currentBoard);if(e[c[0]][c[1]]=null,null===_){const t=u;return(0,i.eightNeighborhood)(t).flatMap((r=>{if(null==o.f.currentBoard[r[0]][r[1]]||(0,n.coordEq)(r,f))return[{type:"TamMove",stepStyle:"NoStep",secondDest:a(r,o.IA_is_down),firstDest:a(t,o.IA_is_down),src:a(f,o.IA_is_down)}];{const i=r;return l((0,n.rotateBoard)(e),i).flatMap((e=>[{type:"TamMove",stepStyle:"StepsDuringLatter",firstDest:a(t,o.IA_is_down),secondDest:a(e,o.IA_is_down),src:a(f,o.IA_is_down),step:a(i,o.IA_is_down)}]))}}))}{const t=u;return l((0,n.rotateBoard)(e),t).flatMap((r=>l((0,n.rotateBoard)(e),r).flatMap((e=>[{type:"TamMove",stepStyle:"StepsDuringFormer",firstDest:a(r,o.IA_is_down),secondDest:a(e,o.IA_is_down),src:a(f,o.IA_is_down),step:a(t,o.IA_is_down)}]))))}}return null===_?[{type:"NonTamMove",data:{type:"SrcDst",src:a(f,o.IA_is_down),dest:a(u,o.IA_is_down),is_water_entry_ciurl:d(u,t.prof,f)}}]:"Tam2"===_?e.allow_kut2tam2?p(t):[]:_.side===n.Side.Upward&&(0,i.canGetOccupiedBy)(n.Side.Downward,u,{color:t.color,prof:t.prof,side:n.Side.Downward},o.f.currentBoard,o.tam_itself_is_tam_hue)?[{type:"NonTamMove",data:{type:"SrcDst",src:a(f,o.IA_is_down),dest:a(u,o.IA_is_down),is_water_entry_ciurl:d(u,t.prof,f)}},...p(t)]:p(t)}))})),t.not_from_hand_candidates=e=>(0,t.not_from_hand_candidates_)({allow_kut2tam2:!1},e),t.not_from_hand_candidates_with_kut2tam2=e=>(0,t.not_from_hand_candidates_)({allow_kut2tam2:!0},e),t.get_valid_opponent_moves=function(e){return[...(0,t.from_hand_candidates)(e),...(0,t.not_from_hand_candidates_)({allow_kut2tam2:!1},e)]}},6233:(e,t)=>{"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.rotateBoard=t.rotateCoord=t.coordEq=t.toUpOrDown=t.fromUpOrDown=t.Side=void 0,function(e){e[e.Upward=0]="Upward",e[e.Downward=1]="Downward"}(o=t.Side||(t.Side={})),t.fromUpOrDown=function(e){return{color:e.color,prof:e.prof,side:e.side}},t.toUpOrDown=function(e){return e.side,o.Downward,{color:e.color,prof:e.prof,side:e.side}},t.coordEq=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.rotateCoord=function(e){return[8-e[0],8-e[1]]},t.rotateBoard=function(e){const t=[[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"]];for(let n=0;n<9;n++)for(let r=0;r<9;r++)t[n][r]=null===(o=e[8-n][8-r])||"Tam2"===o?o:{prof:o.prof,color:o.color,side:1-o.side};var o;return t}},981:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDOMParser=void 0,t.createDOMParser=function(){return new DOMParser}},6388:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filter=void 0;const n=o(3379);t.filter=function(e,t){const o=(0,n.flatMap)(e,(e=>t(e)?[e]:[]));if(1===o.length)return o[0]}},9459:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInAncestorNodes=void 0;const n=o(9711),r=o(9577);t.findInAncestorNodes=function(e,t){return(0,r.find)((0,n.traverseAncestorNodes)(e),(e=>t(e)))}},7013:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInDescendantNodes=void 0;const n=o(7584),r=o(9577);t.findInDescendantNodes=function(e,t){return(0,r.find)((0,n.traverseDescendantNodes)(e),(e=>t(e)))}},785:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInFollowingSiblingNodes=void 0,t.findInFollowingSiblingNodes=function e(t,o){const n=t.nextSibling;if(n)return o(n)?n:e(n,o)}},5396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInPrecedingSiblingNodes=void 0,t.findInPrecedingSiblingNodes=function e(t,o){const n=t.previousSibling;if(n)return o(n)?n:e(n,o)}},8463:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.find=void 0;const n=o(7013);t.find=function(e,t){return t(e)?e:(0,n.findInDescendantNodes)(e,t)}},3379:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatMap=void 0;const n=o(7773),r=o(9485);t.flatMap=function e(t,o){return(0,n.cloneNodes)(o((0,n.clone)(t))).map((t=>{const i=[];for(const r of t.childNodes)i.push(...(0,n.cloneNodes)(e(r,o)));return(0,r.removeAllChildren)(t),(0,n.copyNodesToChildNodes)(i,t),t}))}},4392:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBySelector=void 0;const n=o(1867),r=o(8120);t.getAllBySelector=function(e){const t=((0,r.isElement)(this)||(0,n.isDocument)(this)?this:document).querySelectorAll(e);if(t.length)return Array.from(t);throw new Error(`Could not find any elements matching ${e}`)}},7998:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBySelector=void 0;const n=o(1867),r=o(8120);t.getBySelector=function(e){const t=((0,r.isElement)(this)||(0,n.isDocument)(this)?this:document).querySelector(e);if(t)return t;throw new Error(`Could not find any elements matching ${e}`)}},7421:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(3379),t),r(o(1175),t),r(o(6388),t),r(o(6769),t),r(o(8463),t),r(o(6669),t),r(o(5222),t),r(o(6820),t),r(o(9485),t),r(o(7494),t),r(o(7998),t),r(o(4392),t),r(o(9711),t),r(o(9459),t),r(o(7584),t),r(o(7013),t),r(o(785),t),r(o(5396),t),r(o(4615),t),r(o(2827),t),r(o(5537),t),r(o(834),t),r(o(5167),t),r(o(1867),t),r(o(9103),t),r(o(8120),t),r(o(5261),t),r(o(8365),t),r(o(9674),t),r(o(1559),t),r(o(1457),t),r(o(5255),t),r(o(733),t),r(o(4088),t),r(o(7449),t),r(o(6872),t),r(o(2979),t),r(o(981),t)},2979:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAfter=void 0,t.isAfter=function(e,t){return!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING)}},6872:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBefore=void 0,t.isBefore=function(e,t){return!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING)}},1867:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDocument=void 0;const n=o(4088),r=o(4510);t.isDocument=function(e){return"HTMLDocument"in globalThis&&e instanceof HTMLDocument||(0,r.isObject)(e)&&e.nodeType===n.NodeType.DOCUMENT_NODE}},8120:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isElement=void 0;const n=o(4088),r=o(4510);t.isElement=function(e){return"HTMLElement"in globalThis&&e instanceof HTMLElement||(0,r.isObject)(e)&&e.nodeType===n.NodeType.ELEMENT_NODE}},8365:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=void 0;const n=o(4510);t.isNode=function(e){return"Node"in globalThis&&e instanceof Node||(0,n.isObject)(e)&&"nodeType"in e}},5255:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isParentNode=void 0;const n=o(8365);t.isParentNode=function(e){return(0,n.isNode)(e)&&"children"in e}},1559:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTextNode=void 0;const n=o(4088),r=o(4510);t.isTextNode=function(e){return"Text"in globalThis&&e instanceof Text||(0,r.isObject)(e)&&e.nodeType===n.NodeType.TEXT_NODE}},9103:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntDocument=void 0;const n=o(1867);t.isntDocument=function(e){return!(0,n.isDocument)(e)}},5261:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntElement=void 0;const n=o(8120);t.isntElement=function(e){return!(0,n.isElement)(e)}},9674:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntNode=void 0;const n=o(8365);t.isntNode=function(e){return!(0,n.isNode)(e)}},733:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntParentNode=void 0;const n=o(5255);t.isntParentNode=function(e){return!(0,n.isParentNode)(e)}},1457:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isntTextNode=void 0;const n=o(1559);t.isntTextNode=function(e){return!(0,n.isTextNode)(e)}},1175:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.map=void 0;const n=o(7773);t.map=function e(t,o){const r=(0,n.clone)(o((0,n.clone)(t)));for(const t of r.childNodes)r.replaceChild(e(t,o),t);return r}},834:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nextElementSibling=void 0;const n=o(8120),r=o(3271);function i(e,t){const o=e.nextSibling;if(o)return(0,n.isElement)(o)?1===t?o:i(o,t-1):i(o,t)}t.nextElementSibling=function(e,t=1){return(0,r.assert)(Number.isInteger(t),"parameter distance must be an integer"),(0,r.assert)(t>=1,"parameter distance must be greater than or equal to 1"),i(e,t)}},2827:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nextSibling=void 0;const n=o(3271);function r(e,t){const o=e.nextSibling;if(o)return 1===t?o:r(o,t-1)}t.nextSibling=function(e,t=1){return(0,n.assert)(Number.isInteger(t),"parameter distance must be an integer"),(0,n.assert)(t>=1,"parameter distance must be greater than or equal to 1"),r(e,t)}},4088:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeType=void 0;const o="Node"in globalThis;var n;(n=t.NodeType||(t.NodeType={}))[n.ELEMENT_NODE=o?globalThis.Node.ELEMENT_NODE:1]="ELEMENT_NODE",n[n.ATTRIBUTE_NODE=o?globalThis.Node.ATTRIBUTE_NODE:2]="ATTRIBUTE_NODE",n[n.TEXT_NODE=o?globalThis.Node.TEXT_NODE:3]="TEXT_NODE",n[n.CDATA_SECTION_NODE=o?globalThis.Node.CDATA_SECTION_NODE:4]="CDATA_SECTION_NODE",n[n.ENTITY_REFERENCE_NODE=o?globalThis.Node.ENTITY_REFERENCE_NODE:5]="ENTITY_REFERENCE_NODE",n[n.ENTITY_NODE=o?globalThis.Node.ENTITY_NODE:6]="ENTITY_NODE",n[n.PROCESSING_INSTRUCTION_NODE=o?globalThis.Node.PROCESSING_INSTRUCTION_NODE:7]="PROCESSING_INSTRUCTION_NODE",n[n.COMMENT_NODE=o?globalThis.Node.COMMENT_NODE:8]="COMMENT_NODE",n[n.DOCUMENT_NODE=o?globalThis.Node.DOCUMENT_NODE:9]="DOCUMENT_NODE",n[n.DOCUMENT_TYPE_NODE=o?globalThis.Node.DOCUMENT_TYPE_NODE:10]="DOCUMENT_TYPE_NODE",n[n.DOCUMENT_FRAGMENT_NODE=o?globalThis.Node.DOCUMENT_FRAGMENT_NODE:11]="DOCUMENT_FRAGMENT_NODE",n[n.NOTATION_NODE=o?globalThis.Node.NOTATION_NODE:12]="NOTATION_NODE"},6820:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=void 0;const n=o(6669),r=o(5222);t.normalize=function(e){return(0,r.stringify)((0,n.parse)(e))}},4615:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parentNode=void 0;const n=o(3271);function r(e,t){const o=e.parentNode;if(o)return 1===t?o:r(o,t-1)}t.parentNode=function(e,t=1){return(0,n.assert)(Number.isInteger(t),"parameter distance must be an integer"),(0,n.assert)(t>=1,"parameter distance must be greater than or equal to 1"),r(e,t)}},6669:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0,t.parse=function(e){const t=document.createElement("div");return t.innerHTML=e,[...t.childNodes]}},5167:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.previousElementSibling=void 0;const n=o(8120),r=o(3271);t.previousElementSibling=function(e,t=1){return(0,r.assert)(Number.isInteger(t),"parameter distance must be an integer"),(0,r.assert)(t>=1,"parameter distance must be greater than or equal to 1"),function e(t,o=1){const r=t.previousSibling;if(r)return(0,n.isElement)(r)?1===o?r:e(r,o-1):e(r,o)}(e,t)}},5537:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.previousSibling=void 0;const n=o(3271);t.previousSibling=function(e,t=1){return(0,n.assert)(Number.isInteger(t),"parameter distance must be an integer"),(0,n.assert)(t>=1,"parameter distance must be greater than or equal to 1"),function e(t,o=1){const n=t.previousSibling;if(n)return 1===o?n:e(n,o-1)}(e,t)}},9485:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAllChildren=void 0,t.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},7494:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAttributes=void 0,t.removeAttributes=function(e,t){if(e instanceof Element){const o=Array.from(e.attributes).map((e=>e.name));for(const n of o)t(n)&&e.removeAttribute(n)}}},5222:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=void 0,t.stringify=function(e){const t=document.createElement("div");return e.forEach((e=>t.append(e.cloneNode(!0)))),t.innerHTML}},9711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traverseAncestorNodes=void 0,t.traverseAncestorNodes=function*e(t){const o=t.parentNode;o&&(yield o,yield*e(o))}},7584:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traverseDescendantNodes=void 0,t.traverseDescendantNodes=function*e(t){for(const o of t.childNodes)yield o,yield*e(o)}},6769:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=void 0;const n=o(3379),r=o(9577);t.unwrap=function e(t,o){return(0,n.flatMap)(t,(t=>o(t)?(0,r.toArray)((0,r.flatten)((0,r.map)(t.childNodes,(t=>e(t,o))))):[t]))}},7773:(e,t)=>{"use strict";function o(e){return e.cloneNode(!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.copyNodesToChildNodes=t.cloneNodes=t.clone=void 0,t.clone=o,t.cloneNodes=function(e){return e.map((e=>o(e)))},t.copyNodesToChildNodes=function(e,t){e.forEach((e=>t.appendChild(e)))}},7449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPathResultType=void 0;const o="XPathResult"in globalThis;var n;(n=t.XPathResultType||(t.XPathResultType={}))[n.ANY_TYPE=o?globalThis.XPathResult.ANY_TYPE:0]="ANY_TYPE",n[n.NUMBER_TYPE=o?globalThis.XPathResult.NUMBER_TYPE:1]="NUMBER_TYPE",n[n.STRING_TYPE=o?globalThis.XPathResult.STRING_TYPE:2]="STRING_TYPE",n[n.BOOLEAN_TYPE=o?globalThis.XPathResult.BOOLEAN_TYPE:3]="BOOLEAN_TYPE",n[n.UNORDERED_NODE_ITERATOR_TYPE=o?globalThis.XPathResult.UNORDERED_NODE_ITERATOR_TYPE:4]="UNORDERED_NODE_ITERATOR_TYPE",n[n.ORDERED_NODE_ITERATOR_TYPE=o?globalThis.XPathResult.ORDERED_NODE_ITERATOR_TYPE:5]="ORDERED_NODE_ITERATOR_TYPE",n[n.UNORDERED_NODE_SNAPSHOT_TYPE=o?globalThis.XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:6]="UNORDERED_NODE_SNAPSHOT_TYPE",n[n.ORDERED_NODE_SNAPSHOT_TYPE=o?globalThis.XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:7]="ORDERED_NODE_SNAPSHOT_TYPE",n[n.ANY_UNORDERED_NODE_TYPE=o?globalThis.XPathResult.ANY_UNORDERED_NODE_TYPE:8]="ANY_UNORDERED_NODE_TYPE",n[n.FIRST_ORDERED_NODE_TYPE=o?globalThis.XPathResult.FIRST_ORDERED_NODE_TYPE:9]="FIRST_ORDERED_NODE_TYPE"},937:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(8384),t),r(o(2091),t),r(o(2686),t)},2686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomIntInclusive=void 0,t.randomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},2091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomInt=void 0,t.randomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}},8384:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.random=void 0,t.random=function(e,t){return Math.random()*(t-e)+e}},9460:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateExponentialBackoffTimeout=void 0;const n=o(937);t.calculateExponentialBackoffTimeout=function({baseTimeout:e,retries:t,maxTimeout:o=1/0,factor:r=2,jitter:i=!0}){const a=Math.min(r**t*e,o);return i?(0,n.randomIntInclusive)(0,a):a}},8468:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(9460),t),r(o(9012),t),r(o(9263),t),r(o(5426),t),r(o(6756),t),r(o(8923),t),r(o(6865),t)},6865:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDynamicTimeoutLoop=void 0;const n=o(9012);t.setDynamicTimeoutLoop=function(e,t){let o=!1,r=(0,n.setTimeout)(e,(async function i(){const a=Date.now();await t();const s=Date.now()-a;o||(r=(0,n.setTimeout)(Math.max(e-s,0),i))}));return()=>{o=!0,r()}}},6756:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImmediate=void 0;const n=o(9012);t.setImmediate=function(e){if(globalThis.setImmediate){const t=globalThis.setImmediate(e);return()=>clearImmediate(t)}return(0,n.setTimeout)(0,e)}},5426:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setInterval=void 0,t.setInterval=function(e,t){const o=globalThis.setInterval(t,e);return()=>clearInterval(o)}},9263:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSchedule=void 0;const n=o(9012);t.setSchedule=function(e,t){const o=e-Date.now();return(0,n.setTimeout)(o,t)}},8923:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTimeoutLoop=void 0;const n=o(9012);t.setTimeoutLoop=function(e,t){let o=!1,r=(0,n.setTimeout)(e,(async function i(){await t(),o||(r=(0,n.setTimeout)(e,i))}));return()=>{o=!0,r()}}},9012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTimeout=void 0,t.setTimeout=function(e,t){const o=globalThis.setTimeout(t,e);return()=>clearTimeout(o)}},9577:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(3056),t),r(o(5405),t)},9294:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkAsync=void 0;const n=o(6065),r=o(3271);t.chunkAsync=function(e,t){return(0,r.assert)(Number.isInteger(t),"The parameter size must be an integer"),(0,r.assert)(t>0,"The parameter size must be greater than 0"),(0,n.go)((async function*(){let o=[];for await(const n of e)o.push(n),o.length>=t&&(yield o,o=[]);o.length&&(yield o)}))}},2902:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkByAsync=void 0;const n=o(4510);t.chunkByAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){let o=[],n=0;for await(const r of e)o.push(r),await t(r,n)&&(yield o,o=[]),n++;o.length&&(yield o)}(e,t):async function*(e,t){let o=[],n=0;for(const r of e)o.push(r),await t(r,n)&&(yield o,o=[]),n++;o.length&&(yield o)}(e,t)}},9990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkBy=void 0,t.chunkBy=function*(e,t){let o=[],n=0;for(const r of e)o.push(r),t(r,n)&&(yield o,o=[]),n++;o.length&&(yield o)}},6740:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunk=void 0;const n=o(6065),r=o(3271);t.chunk=function(e,t){return(0,r.assert)(Number.isInteger(t),"The parameter size must be an integer"),(0,r.assert)(t>0,"The parameter size must be greater than 0"),(0,n.go)((function*(){let o=[];for(const n of e)o.push(n),o.length>=t&&(yield o,o=[]);o.length&&(yield o)}))}},9742:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatAsync=void 0;const n=o(4510),r=o(6065);t.concatAsync=function(e,...t){return(0,r.go)((async function*(){for(const o of[e,...t])if((0,n.isAsyncIterable)(o))for await(const e of o)yield e;else for(const e of o)yield e}))}},6736:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;const n=o(6065);t.concat=function(e,...t){return(0,n.go)((function*(){for(const o of[e,...t])yield*o}))}},8819:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.differenceAsync=void 0;const n=o(1100),r=o(4069);t.differenceAsync=async function*(e,t){const o=await(0,r.toSetAsync)(t);yield*(0,n.filterAsync)(e,(async e=>!o.has(await e)))}},8627:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.difference=void 0;const n=o(5018),r=o(8381);t.difference=function(e,t){const o=(0,r.toSet)(t);return(0,n.filter)(e,(e=>!o.has(e)))}},5510:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropAsync=void 0;const n=o(6065),r=o(1056),i=o(3271);t.dropAsync=function(e,t){return(0,i.assert)(Number.isInteger(t),"The parameter count must be an integer"),(0,i.assert)(t>=0,"The parameter count must be greater than or equal to 0"),0===t?(0,r.copyAsyncIterable)(e):(0,n.go)((async function*(){var o;const n=e[Symbol.asyncIterator]();let r;try{let e;for(;({value:e,done:r}=await n.next()),!(r||t<=0);)t--;for(;!r;)yield e,({value:e,done:r}=await n.next())}finally{r||await(null===(o=n.return)||void 0===o?void 0:o.call(n))}}))}},2903:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropRightAsync=void 0;const n=o(6065),r=o(1056),i=o(3271),a=o(9762);t.dropRightAsync=function(e,t){return(0,i.assert)(Number.isInteger(t),"The parameter count must be an integer"),(0,i.assert)(t>=0,"The parameter count must be greater than or equal to 0"),0===t?(0,r.copyAsyncIterable)(e):(0,n.go)((async function*(){const o=(await(0,a.toArrayAsync)(e)).slice(0,-t);for(const e of o)yield e}))}},5419:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropRight=void 0;const n=o(6065),r=o(1056),i=o(3271);t.dropRight=function(e,t){return(0,i.assert)(Number.isInteger(t),"The parameter count must be an integer"),(0,i.assert)(t>=0,"The parameter count must be greater than or equal to 0"),0===t?(0,r.copyIterable)(e):(0,n.go)((function*(){const o=Array.from(e);yield*o.slice(0,-t)}))}},9841:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropUntilAsync=void 0;const n=o(4510);t.dropUntilAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){var o;const n=e[Symbol.asyncIterator]();let r;try{let e,i=0;for(;({value:e,done:r}=await n.next()),!r&&!await t(e,i++););for(;!r;)yield e,({value:e,done:r}=await n.next())}finally{r||await(null===(o=n.return)||void 0===o?void 0:o.call(n))}}(e,t):async function*(e,t){var o;const n=e[Symbol.iterator]();let r;try{let e,i=0;for(;({value:e,done:r}=n.next()),!r&&!await t(e,i++););for(;!r;)yield e,({value:e,done:r}=n.next())}finally{r||null===(o=n.return)||void 0===o||o.call(n)}}(e,t)}},4055:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropUntil=void 0,t.dropUntil=function*(e,t){var o;const n=e[Symbol.iterator]();let r;try{let e,i=0;for(;({value:e,done:r}=n.next()),!r&&!t(e,i++););for(;!r;)yield e,({value:e,done:r}=n.next())}finally{r||null===(o=n.return)||void 0===o||o.call(n)}}},7473:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drop=void 0;const n=o(6065),r=o(1056),i=o(3271);t.drop=function(e,t){return(0,i.assert)(Number.isInteger(t),"The parameter count must be an integer"),(0,i.assert)(t>=0,"The parameter count must be greater than or equal to 0"),0===t?(0,r.copyIterable)(e):(0,n.go)((function*(){var o;const n=e[Symbol.iterator]();let r;try{let e;for(;({value:e,done:r}=n.next()),!(r||t<=0);)t--;for(;!r;)yield e,({value:e,done:r}=n.next())}finally{r||null===(o=n.return)||void 0===o||o.call(n)}}))}},1100:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterAsync=void 0;const n=o(4510);t.filterAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){let o=0;for await(const n of e)await t(n,o)&&(yield n),o++}(e,t):async function*(e,t){let o=0;for(const n of e)await t(n,o)&&(yield n),o++}(e,t)}},5018:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filter=void 0,t.filter=function*(e,t){let o=0;for(const n of e)t(n,o)&&(yield n),o++}},4556:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenAsync=void 0;const n=o(49);t.flattenAsync=function(e){return(0,n.flattenDeepAsync)(e,1)}},1905:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenByAsync=void 0;const n=o(4510);async function*r(e,t,o){for(const n of e)i(n)&&await t(n,o)?yield*r(n,t,o+1):yield n}function i(e){return(0,n.isIterable)(e)&&(0,n.isntChar)(e)}t.flattenByAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){for await(const o of e)i(o)&&await t(o,1)?yield*r(o,t,2):yield o}(e,t):function(e,t){return r(e,t,1)}(e,t)}},7208:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenBy=void 0;const n=o(4510);function*r(e,t,o){for(const a of e)i=a,(0,n.isIterable)(i)&&(0,n.isntChar)(i)&&t(a,o)?yield*r(a,t,o+1):yield a;var i}t.flattenBy=function(e,t){return r(e,t,1)}},49:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenDeepAsync=void 0;const n=o(1905),r=o(3271);t.flattenDeepAsync=function(e,t=1/0){return(0,r.assert)(t===1/0||Number.isInteger(t),"The parameter depth must be an integer"),(0,r.assert)(t>=0,"The parameter depth must be greater than or equal to 0"),(0,n.flattenByAsync)(e,((e,o)=>o<=t))}},4464:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenDeep=void 0;const n=o(7208),r=o(3271);t.flattenDeep=function(e,t=1/0){return(0,r.assert)(t===1/0||Number.isInteger(t),"The parameter depth must be an integer"),(0,r.assert)(t>=0,"The parameter depth must be greater than or equal to 0"),(0,n.flattenBy)(e,((e,o)=>o<=t))}},7541:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=void 0;const n=o(4464);t.flatten=function(e){return(0,n.flattenDeep)(e,1)}},3056:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(9294),t),r(o(2902),t),r(o(9990),t),r(o(6740),t),r(o(9742),t),r(o(6736),t),r(o(8819),t),r(o(8627),t),r(o(5510),t),r(o(2903),t),r(o(5419),t),r(o(9841),t),r(o(4055),t),r(o(7473),t),r(o(1100),t),r(o(5018),t),r(o(4556),t),r(o(1905),t),r(o(7208),t),r(o(49),t),r(o(4464),t),r(o(7541),t),r(o(6151),t),r(o(2723),t),r(o(7667),t),r(o(7341),t),r(o(8881),t),r(o(3486),t),r(o(9080),t),r(o(8789),t),r(o(7140),t),r(o(6677),t),r(o(2615),t),r(o(726),t),r(o(5283),t),r(o(8469),t),r(o(8802),t),r(o(4168),t),r(o(5663),t),r(o(1987),t),r(o(7025),t),r(o(7098),t),r(o(1401),t),r(o(8928),t),r(o(5301),t),r(o(9942),t),r(o(6143),t),r(o(5138),t),r(o(8565),t),r(o(8841),t),r(o(917),t)},6151:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectionAsync=void 0;const n=o(1100),r=o(4069);t.intersectionAsync=async function*(e,t){const o=await(0,r.toSetAsync)(t);yield*(0,n.filterAsync)(e,(async e=>o.has(await e)))}},2723:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersection=void 0;const n=o(5018),r=o(8381);t.intersection=function(e,t){const o=(0,r.toSet)(t);return(0,n.filter)(e,(e=>o.has(e)))}},7667:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapAsync=void 0;const n=o(4510);t.mapAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){let o=0;for await(const n of e)yield await t(n,o),o++}(e,t):async function*(e,t){let o=0;for(const n of e)yield await t(n,o),o++}(e,t)}},7341:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.map=void 0,t.map=function*(e,t){let o=0;for(const n of e)yield t(n,o),o++}},8881:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeatAsync=void 0;const n=o(6065),r=o(3271);t.repeatAsync=function(e,t){return(0,r.assert)(t===1/0||Number.isInteger(t),"The parameter times must be an integer"),(0,r.assert)(t>=0,"The parameter times must be greater than or equal to 0"),(0,n.go)((async function*(){const o=[];if(t>0){for await(const t of e)yield t,o.push(t);t--}for(;t>0;)yield*o,t--}))}},3486:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeat=void 0;const n=o(6065),r=o(3271);t.repeat=function(e,t){return(0,r.assert)(t===1/0||Number.isInteger(t),"The parameter times must be an integer"),(0,r.assert)(t>=0,"The parameter times must be greater than or equal to 0"),(0,n.go)((function*(){const o=[];if(t>0){for(const t of e)yield t,o.push(t);t--}for(;t>0;)yield*o,t--}))}},9080:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceAsync=void 0;const n=o(6065),r=o(3271);t.sliceAsync=function(e,t,o=1/0){return(0,r.assert)(Number.isInteger(t),"The parameter start must be an integer"),(0,r.assert)(t>=0,"The parameter start must be greater than or equal to 0"),(0,r.assert)(Number.isInteger(o),"The parameter end must be an integer"),(0,r.assert)(o>=t,"The parameter end must be greater than or equal to start"),(0,n.go)((async function*(){let n=0;for await(const r of e){if(n>=o)break;n>=t&&(yield r),n++}}))}},8789:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slice=void 0;const n=o(6065),r=o(3271);t.slice=function(e,t,o=1/0){return(0,r.assert)(Number.isInteger(t),"The parameter start must be an integer"),(0,r.assert)(t>=0,"The parameter start must be greater than or equal to 0"),(0,r.assert)(Number.isInteger(o),"The parameter end must be an integer"),(0,r.assert)(o>=t,"The parameter end must be greater than or equal to start"),(0,n.go)((function*(){let n=0;for(const r of e){if(n>=o)break;n>=t&&(yield r),n++}}))}},7140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitAsync=void 0,t.splitAsync=async function*(e,t){let o=[];for await(const n of e)n===t?(yield o,o=[]):o.push(n);yield o}},6677:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitByAsync=void 0;const n=o(4510);t.splitByAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){let o=[],n=0;for await(const r of e)await t(r,n)?(yield o,o=[]):o.push(r),n++;yield o}(e,t):async function*(e,t){let o=[],n=0;for(const r of e)await t(r,n)?(yield o,o=[]):o.push(r),n++;yield o}(e,t)}},2615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitBy=void 0,t.splitBy=function*(e,t){let o=[],n=0;for(const r of e)t(r,n)?(yield o,o=[]):o.push(r),n++;yield o}},726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.split=void 0,t.split=function*(e,t){let o=[];for(const n of e)n===t?(yield o,o=[]):o.push(n);yield o}},5283:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeAsync=void 0;const n=o(6065),r=o(3271);t.takeAsync=function(e,t){return(0,r.assert)(Number.isInteger(t),"The parameter count must be an integer"),(0,r.assert)(t>=0,"The parameter count must be greater than or equal to 0"),(0,n.go)((async function*(){if(0!==t)for await(const o of e)if(yield o,0==--t)break}))}},8469:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeRightAsync=void 0;const n=o(6065),r=o(3271);t.takeRightAsync=function(e,t){return(0,r.assert)(Number.isInteger(t),"The parameter count must be an integer"),(0,r.assert)(t>=0,"The parameter count must be greater than or equal to 0"),(0,n.go)((async function*(){var o;const n=e[Symbol.asyncIterator]();let r;try{const e=[];let i;for(;({value:i,done:r}=await n.next()),!r;)e.push(i),e.length>t&&e.shift();yield*e}finally{r||await(null===(o=n.return)||void 0===o?void 0:o.call(n))}}))}},8802:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeRight=void 0;const n=o(6065),r=o(3271);t.takeRight=function(e,t){return(0,r.assert)(Number.isInteger(t),"The parameter count must be an integer"),(0,r.assert)(t>=0,"The parameter count must be greater than or equal to 0"),(0,n.go)((function*(){var o;const n=e[Symbol.iterator]();let r;try{const e=[];let i;for(;({value:i,done:r}=n.next()),!r;)e.push(i),e.length>t&&e.shift();yield*e}finally{r||null===(o=n.return)||void 0===o||o.call(n)}}))}},4168:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeUntilAsync=void 0;const n=o(4510);t.takeUntilAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){let o=0;for await(const n of e){if(await t(n,o))break;yield n,o++}}(e,t):async function*(e,t){let o=0;for(const n of e){if(await t(n,o))break;yield n,o++}}(e,t)}},5663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeUntil=void 0,t.takeUntil=function*(e,t){let o=0;for(const n of e){if(t(n,o))break;yield n,o++}}},1987:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.take=void 0;const n=o(6065),r=o(3271);t.take=function(e,t){return(0,r.assert)(Number.isInteger(t),"The parameter count must be an integer"),(0,r.assert)(t>=0,"The parameter count must be greater than or equal to 0"),(0,n.go)((function*(){if(0!==t)for(const o of e)if(yield o,0==--t)break}))}},7025:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tapAsync=void 0;const n=o(4510);t.tapAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){let o=0;for await(const n of e)await t(n,o),yield n,o++}(e,t):async function*(e,t){let o=0;for(const n of e)await t(n,o),yield n,o++}(e,t)}},7098:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tap=void 0,t.tap=function*(e,t){let o=0;for(const n of e)t(n,o),yield n,o++}},1401:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toAsyncIterable=void 0,t.toAsyncIterable=async function*(e){for(const t of e)yield await t}},8928:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformAsync=void 0,t.transformAsync=async function*(e,t){yield*t(e)}},5301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transform=void 0,t.transform=function*(e,t){yield*t(e)}},9942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqAsync=void 0,t.uniqAsync=async function*(e){const t=new Set;for await(const o of e)t.has(o)||(yield o,t.add(o))}},6143:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqByAsync=void 0;const n=o(4510);t.uniqByAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function*(e,t){const o=new Set;let n=0;for await(const r of e){const e=await t(r,n);o.has(e)||(yield r,o.add(e)),n++}}(e,t):async function*(e,t){const o=new Set;let n=0;for(const r of e){const e=await t(r,n);o.has(e)||(yield r,o.add(e)),n++}}(e,t)}},5138:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqBy=void 0,t.uniqBy=function*(e,t){const o=new Set;let n=0;for(const r of e){const e=t(r,n);o.has(e)||(yield r,o.add(e)),n++}}},8565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniq=void 0,t.uniq=function*(e){const t=new Set;for(const o of e)t.has(o)||(yield o,t.add(o))}},8841:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zipAsync=void 0;const n=o(4510);var r;!function(e){e[e.Sync=0]="Sync",e[e.Async=1]="Async"}(r||(r={})),t.zipAsync=function(e,...t){return async function*(...e){var t,o,i,a;const s=e.length,c=e.map((e=>(0,n.isAsyncIterable)(e)?[r.Async,e[Symbol.asyncIterator]()]:[r.Sync,e[Symbol.iterator]()])),l=c.map((()=>!1));try{for(;;){const e=new Array(s);for(let t=0;t<s;t++){const[o,n]=c[t];let i;if(i=o===r.Async?await n.next():n.next(),i.done)return void(l[t]=!0);e[t]=await i.value}yield e}}finally{const e=c.filter(((e,t)=>!l[t]));for(const[n,s]of e)n===r.Async?await(null===(o=(t=s).return)||void 0===o?void 0:o.call(t)):null===(a=(i=s).return)||void 0===a||a.call(i)}}(e,...t)}},917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0,t.zip=function(e,...t){return function*(...e){const t=e.length,o=e.map((e=>e[Symbol.iterator]())),n=o.map((()=>!1));try{for(;;){const e=new Array(t);for(let r=0;r<t;r++){const{value:t,done:i}=o[r].next();if(i)return void(n[r]=!0);e[r]=t}yield e}}finally{o.filter(((e,t)=>!n[t])).forEach((e=>{var t;return null===(t=e.return)||void 0===t?void 0:t.call(e)}))}}(e,...t)}},4333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consumeAsync=void 0,t.consumeAsync=async function(e,t){return await t(e)}},9602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0,t.consume=function(e,t){return t(e)}},4820:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countAsync=void 0,t.countAsync=async function(e){let t=0;for await(const o of e)t++;return t}},6472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.count=void 0,t.count=function(e){let t=0;for(const o of e)t++;return t}},8067:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eachAsync=void 0;const n=o(4510);t.eachAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function(e,t){let o=0;for await(const n of e)await t(n,o),o++}(e,t):async function(e,t){let o=0;for(const n of e)await t(n,o),o++}(e,t)}},8568:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.each=void 0,t.each=function(e,t){let o=0;for(const n of e)t(n,o),o++}},4592:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.everyAsync=void 0;const n=o(4510);t.everyAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function(e,t){let o=0;for await(const n of e){if(!await t(n,o))return!1;o++}return!0}(e,t):async function(e,t){let o=0;for(const n of e){if(!await t(n,o))return!1;o++}return!0}(e,t)}},7420:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.every=void 0,t.every=function(e,t){let o=0;for(const n of e){if(!t(n,o))return!1;o++}return!0}},9562:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAsync=void 0;const n=o(4510);t.findAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function(e,t){let o=0;for await(const n of e){if(await t(n,o))return n;o++}}(e,t):async function(e,t){let o=0;for(const n of e){if(await t(n,o))return n;o++}}(e,t)}},840:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.find=void 0,t.find=function(e,t){let o=0;for(const n of e){if(t(n,o))return n;o++}}},3172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstAsync=void 0,t.firstAsync=async function(e){for await(const t of e)return t}},1523:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.first=void 0,t.first=function(e){for(const t of e)return t}},690:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupByAsync=void 0;const n=o(8067);t.groupByAsync=async function(e,t){const o=new Map;return await(0,n.eachAsync)(e,(async(e,n)=>{const r=await t(e,n);o.has(r)||o.set(r,[]),o.get(r).push(e)})),o}},9123:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=void 0;const n=o(8568);t.groupBy=function(e,t){const o=new Map;return(0,n.each)(e,((e,n)=>{const r=t(e,n);o.has(r)||o.set(r,[]),o.get(r).push(e)})),o}},4892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.includesAsync=void 0,t.includesAsync=async function(e,t){for await(const o of e)if(o===t)return!0;return!1}},2843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.includes=void 0,t.includes=function(e,t){for(const o of e)if(o===t)return!0;return!1}},5405:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(9602),t),r(o(4333),t),r(o(8067),t),r(o(8568),t),r(o(4592),t),r(o(7420),t),r(o(9562),t),r(o(840),t),r(o(3172),t),r(o(1523),t),r(o(4892),t),r(o(2843),t),r(o(9090),t),r(o(2693),t),r(o(626),t),r(o(4297),t),r(o(8675),t),r(o(7127),t),r(o(9762),t),r(o(5436),t),r(o(4069),t),r(o(8381),t),r(o(6472),t),r(o(4820),t),r(o(9123),t),r(o(690),t)},8675:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastAsync=void 0,t.lastAsync=async function(e){var t;const o=e[Symbol.asyncIterator]();let n;try{let e,r;for(;({value:e,done:n}=await o.next()),!n;)r=e;return r}finally{n||await(null===(t=o.return)||void 0===t?void 0:t.call(o))}}},7127:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.last=void 0,t.last=function(e){var t;const o=e[Symbol.iterator]();let n;try{let e,r;for(;({value:e,done:n}=o.next()),!n;)r=e;return r}finally{n||null===(t=o.return)||void 0===t||t.call(o)}}},9090:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduceAsync=void 0;const n=o(4510);t.reduceAsync=function(e,t,o){return(0,n.isUndefined)(o)?function(e,t){return(0,n.isAsyncIterable)(e)?async function(e){var o;const n=e[Symbol.asyncIterator]();let r;try{let e,i=await async function(e){const t=await e.next();if(t.done)throw r=!0,new Error("Reduce of empty iterable with no initial value");return t.value}(n),a=1;for(;({value:e,done:r}=await n.next()),!r;)i=await t(i,e,a++);return i}finally{r||await(null===(o=n.return)||void 0===o?void 0:o.call(n))}}(e):async function(e){var o;const n=e[Symbol.iterator]();let r;try{let e,i=function(e){const t=e.next();if(t.done)throw r=!0,new Error("Reduce of empty iterable with no initial value");return t.value}(n),a=1;for(;({value:e,done:r}=n.next()),!r;)i=await t(i,e,a++);return i}finally{r||null===(o=n.return)||void 0===o||o.call(n)}}(e)}(e,t):function(e,t,o){return(0,n.isAsyncIterable)(e)?async function(e){let n=o,r=0;for await(const o of e)n=await t(n,o,r++);return n}(e):async function(e){let n=o,r=0;for(const o of e)n=await t(n,o,r++);return n}(e)}(e,t,o)}},2693:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduce=void 0;const n=o(4510);t.reduce=function(e,t,o){return(0,n.isUndefined)(o)?function(e,t){var o;const n=e[Symbol.iterator]();let r;try{let e,i=function(e){const t=e.next();if(t.done)throw r=!0,new Error("Reduce of empty iterable with no initial value");return t.value}(n),a=1;for(;({value:e,done:r}=n.next()),!r;)i=t(i,e,a++);return i}finally{r||null===(o=n.return)||void 0===o||o.call(n)}}(e,t):function(e,t,o){let n=o,r=0;for(const o of e)n=t(n,o,r++);return n}(e,t,o)}},626:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.someAsync=void 0;const n=o(4510);t.someAsync=function(e,t){return(0,n.isAsyncIterable)(e)?async function(e,t){let o=0;for await(const n of e){if(await t(n,o))return!0;o++}return!1}(e,t):async function(e,t){let o=0;for(const n of e){if(await t(n,o))return!0;o++}return!1}(e,t)}},4297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.some=void 0,t.some=function(e,t){let o=0;for(const n of e){if(t(n,o))return!0;o++}return!1}},9762:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArrayAsync=void 0,t.toArrayAsync=async function(e){const t=[];for await(const o of e)t.push(o);return t}},5436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=void 0,t.toArray=function(e){return Array.from(e)}},4069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toSetAsync=void 0,t.toSetAsync=async function(e){const t=new Set;for await(const o of e)t.add(await o);return t}},8381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toSet=void 0,t.toSet=function(e){return new Set(e)}},1056:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyIterable=t.copyAsyncIterable=void 0,t.copyAsyncIterable=async function*(e){for await(const t of e)yield t},t.copyIterable=function*(e){for(const t of e)yield t}},2705:(e,t,o)=>{var n=o(5639).Symbol;e.exports=n},4239:(e,t,o)=>{var n=o(2705),r=o(9607),i=o(2333),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):i(e)}},1957:(e,t,o)=>{var n="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;e.exports=n},5924:(e,t,o)=>{var n=o(5569)(Object.getPrototypeOf,Object);e.exports=n},9607:(e,t,o)=>{var n=o(2705),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),o=e[s];try{e[s]=void 0;var n=!0}catch(e){}var r=a.call(e);return n&&(t?e[s]=o:delete e[s]),r}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(o){return e(t(o))}}},5639:(e,t,o)=>{var n=o(1957),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();e.exports=i},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},8630:(e,t,o)=>{var n=o(4239),r=o(5924),i=o(7005),a=Function.prototype,s=Object.prototype,c=a.toString,l=s.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=n(e))return!1;var t=r(e);if(null===t)return!0;var o=l.call(t,"constructor")&&t.constructor;return"function"==typeof o&&o instanceof o&&c.call(o)==u}},2787:()=>{},9672:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.increaseRateAndAnimate=t.animateSeasonInitiation=t.endSeason=t.sendStuffTo=t.calculateHandsAndScore=t.animatePunishStepTamAndCheckPerzej=t.drawField=t.drawMak2Io1=void 0;const a=o(8513),s=o(1849),c=o(892),l=o(4495),u=o(1935),d=o(2392),_=o(9798),f=o(8431),p=i(o(4204)),m=o(9447),y=o(4728),v=o(8519),E=o(8460),w=o(7421),g=o(1602),h=o(6548);function A(){const e=document.getElementById("denote_season");e.style.top=`${(0,l.getDenoteSeasonNodeTopLeft)(a.GAME_STATE.season).top}px`,e.style.transition="",e.style.transform="";const t=document.getElementById("denote_score");t.style.top=`${(0,l.getDenoteScoreNodeTopLeft)(a.GAME_STATE.my_score).top}px`,t.style.transition="",t.style.transform="";const o=document.getElementById("denote_rate");0===a.GAME_STATE.log2_rate?o.style.display="none":o.style.display="block",o.style.top=`${(0,l.getDenoteRateNodeTopLeft)(a.GAME_STATE.log2_rate).top}px`,o.style.transition="",o.style.transform=""}function T(e){console.log("focusing:",e.focus?(0,a.toAbsoluteCoord)(e.focus):null);{const t=a.GAME_STATE.f.currentBoard,o=document.getElementById("contains_pieces_on_board");(0,w.removeAllChildren)(o);for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++){const i=t[n][r];if(null==i)continue;const s=[n,r],l=(0,y.createPieceImgToBePlacedOnBoard)(s,i);if(l.id=`field_piece_${n}_${r}`,e.focus&&s[0]===e.focus[0]&&s[1]===e.focus[1]&&(l.style.border="8px solid #ff6",l.style.margin="-8px"),"Tam2"===i)a.GAME_STATE.opponent_has_just_moved_tam||(l.style.cursor="pointer",l.addEventListener("click",(function(){(0,v.selectOwnPieceOnBoard)(s,i)})));else if(i.side===c.Side.Upward){const e={prof:i.prof,side:c.Side.Upward,color:i.color};l.style.cursor="pointer",l.addEventListener("click",(function(){(0,v.selectOwnPieceOnBoard)(s,e)}))}o.appendChild(l)}}{const e=a.GAME_STATE.f.hop1zuo1OfUpward,t=document.getElementById("contains_pieces_on_upward");(0,w.removeAllChildren)(t);for(let o=0;o<e.length;o++){const n=e[o],r=(0,y.createPieceImgToBePlacedOnHop1zuo1)({ind:o,path:(0,E.toPath)(n),list_length:e.length,is_upward:!0});r.style.cursor="pointer",r.addEventListener("click",(function(){(0,v.selectOwnPieceOnHop1zuo1)(o,n,e.length)})),t.appendChild(r)}}{const e=a.GAME_STATE.f.hop1zuo1OfDownward,t=document.getElementById("contains_pieces_on_downward");(0,w.removeAllChildren)(t);for(let o=0;o<e.length;o++){const n=e[o],r=(0,y.createPieceImgToBePlacedOnHop1zuo1)({ind:o,path:(0,E.toPath)(n),list_length:e.length,is_upward:!1});r.id=`hop1zuo1OfDownward_${o}`,t.appendChild(r)}}}function b(e,t){(0,_.drawFinalScoreDisplay)(function(e,t){const o=e=>[e.slice(0,-1).reduce(((e,t)=>e+t),0),e[e.length-1]],n=e?e=>[e.reduce(((e,t)=>e+t),0)]:o;if(0===t[0].length)throw new Error("why did the game end without any movement of points?");return 0===t[1].length?[n(t[0])]:0===t[2].length?[o(t[0]),n(t[1])]:0===t[3].length?[o(t[0]),o(t[1]),n(t[2])]:[o(t[0]),o(t[1]),o(t[2]),n(t[3])]}(t,a.GAME_STATE.scores_of_each_season)),document.getElementById("my_icon").style.opacity="1",document.getElementById("larta_opponent").style.opacity="1","x-faikleone"!==sessionStorage.lang&&(document.getElementById("opponent_message").textContent="you win!"===e?u.DICTIONARY.ja.gameResult.victory:"draw"===e?u.DICTIONARY.ja.gameResult.draw:u.DICTIONARY.ja.gameResult.loss),document.getElementById("opponent_message_linzklar").textContent="you win!"===e?u.GAME_END_LINZKLAR.victory:"draw"===e?u.GAME_END_LINZKLAR.draw:u.GAME_END_LINZKLAR.loss,p.push_body_elem_and_display({type:"tymoktaxot",dat:"星一周"}),p.push_header_elem_and_display({type:"header",dat:`{終時:${(new Date).toISOString()}}`}),(0,h.stopMusicLoop)()}async function S(e){await(0,v.animateProcessDeterminingWhoGoesFirst)(e),await new Promise((e=>setTimeout(e,2427.9))),a.GAME_STATE.is_my_turn=e.result,(0,a.back_up_gamestate)(),p.push_initial_colors_and_display(a.GAME_STATE.is_my_turn===a.GAME_STATE.IA_is_down?"黒":"赤")}t.drawMak2Io1=A,t.drawField=T,t.animatePunishStepTamAndCheckPerzej=async function(e){document.getElementById("score_display").classList.add("nocover"),document.getElementById("yaku_all").style.left="750px";const t=document.getElementById("denote_score"),o=a.GAME_STATE.my_score;return a.GAME_STATE.my_score+=(e===c.Side.Upward?-5:5)*Math.pow(2,a.GAME_STATE.log2_rate),(0,a.back_up_gamestate)(),await new Promise((e=>setTimeout(e,161.86))),await(0,m.animateNode)(t,1e3*.8093,{to:(0,l.getDenoteScoreNodeTopLeft)(a.GAME_STATE.my_score),from:(0,l.getDenoteScoreNodeTopLeft)(o)}),a.GAME_STATE.my_score>=40?(b("you win!",!0),void(0,g.add_cover)("protective_cover_over_field_while_waiting_for_opponent")):a.GAME_STATE.my_score<=0?(b("you lose...",!0),void(0,g.add_cover)("protective_cover_over_field_while_waiting_for_opponent")):(await new Promise((e=>setTimeout(e,242.79))),A(),await new Promise((e=>setTimeout(e,242.79))),(0,g.remove_cover)("protective_cover_over_field"),(0,g.remove_cover)("protective_tam_cover_over_field"),void(0,g.remove_cover)("protective_cover_over_field_while_asyncawait"))},t.calculateHandsAndScore=function(e){const t=e.map((e=>{return t=e.color,o=e.prof,[["赤船","赤兵","赤弓","赤車","赤虎","赤馬","赤筆","赤巫","赤将","赤王"],["黒船","黒兵","黒弓","黒車","黒虎","黒馬","黒筆","黒巫","黒将","黒王"]][t][o];var t,o})),o=(0,f.calculate_hands_and_score_from_pieces)(t);if(!0===o.error)throw new Error(`should not happen: too many of ${o.too_many.join(",")}`);return{hands:o.hands,score:o.score}},t.sendStuffTo=async function(e,t,o,n){(0,g.add_cover)("protective_cover_over_field_while_asyncawait"),console.log(`Sending ${t}:`,JSON.stringify(o));const r=`${d.API_ORIGIN}/${e}/`,i={message:o},a=await fetch(r,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.session_token}`}}).then((e=>((0,g.remove_cover)("protective_cover_over_field_while_asyncawait"),e.json()))).then(n).catch((e=>{(0,g.remove_cover)("protective_cover_over_field_while_asyncawait"),console.error("Error:",e)}));if(console.log(a),(0,g.remove_cover)("protective_cover_over_field_while_asyncawait"),!a)throw alert("network error!"),(0,g.remove_cover)("protective_cover_over_field_while_asyncawait"),new Error("network error!");return a},t.endSeason=function(e,t){document.getElementById("score_display").classList.add("nocover"),document.getElementById("yaku_all").style.left="750px";const o=document.getElementById("denote_season"),n=document.getElementById("denote_score"),r=a.GAME_STATE.my_score,i=a.GAME_STATE.season;a.GAME_STATE.my_score+=e*Math.pow(2,a.GAME_STATE.log2_rate),(0,a.back_up_gamestate)();const d={0:1,1:2,2:3,3:null}[i];null!=d?(a.GAME_STATE.season=d,(0,a.back_up_gamestate)(),setTimeout((async()=>{await(0,m.animateNode)(n,1e3*.8093,{to:(0,l.getDenoteScoreNodeTopLeft)(a.GAME_STATE.my_score),from:(0,l.getDenoteScoreNodeTopLeft)(r)}),a.GAME_STATE.my_score>=40?b("you win!",!1):a.GAME_STATE.my_score<=0?b("you lose...",!1):(await(0,m.animateNode)(o,566.51,{to:(0,l.getDenoteSeasonNodeTopLeft)(a.GAME_STATE.season),from:(0,l.getDenoteSeasonNodeTopLeft)(i)}),await new Promise((e=>setTimeout(e,242.79))),A(),"x-faikleone"!==sessionStorage.lang&&alert(u.DICTIONARY.ja.newSeason[a.GAME_STATE.season]),await new Promise((e=>setTimeout(e,242.79))),await new Promise(((e,t)=>{const o=document.getElementById("season_transition_message_or_water_entry_failure_message");o.onload=()=>e(o),o.onerror=e=>t(e),o.src=`image/season_transition_${i}_to_${d}.png`})),(0,g.add_cover)("protective_cover_over_field"),(0,g.add_cover)("protective_tam_cover_over_field"),document.getElementById("season_transition_message_or_water_entry_failure_message_container").classList.remove("nocover"),await new Promise((e=>setTimeout(e,4e3*.8093))),a.GAME_STATE.f={currentBoard:a.GAME_STATE.IA_is_down?(0,c.rotateBoard)((0,c.rotateBoard)(a.initial_board_with_IA_down)):(0,c.rotateBoard)(a.initial_board_with_IA_down),hop1zuo1OfDownward:[],hop1zuo1OfUpward:[]},(0,a.back_up_gamestate)(),a.GAME_STATE.log2_rate=0,(0,a.back_up_gamestate)(),A(),(0,s.allowMainPolling)(),a.GAME_STATE.last_move_focus=null,(0,a.back_up_gamestate)(),console.log("drawField #",11),T({focus:null}),await S(t),(0,g.remove_cover)("protective_cover_over_field"),(0,g.remove_cover)("protective_tam_cover_over_field"),(0,g.remove_cover)("protective_cover_over_field_while_asyncawait"),document.getElementById("season_transition_message_or_water_entry_failure_message_container").classList.add("nocover"))}),161.86)):setTimeout((async()=>(await(0,m.animateNode)(n,1e3*.8093,{to:(0,l.getDenoteScoreNodeTopLeft)(a.GAME_STATE.my_score),from:(0,l.getDenoteScoreNodeTopLeft)(r)}),"x-faikleone"!==sessionStorage.lang&&alert(u.DICTIONARY.ja.gameEnd),a.GAME_STATE.my_score>20?void b("you win!",!1):a.GAME_STATE.my_score<20?void b("you lose...",!1):void b("draw",!1))),161.86)},t.animateSeasonInitiation=S,t.increaseRateAndAnimate=function(e){document.getElementById("score_display").classList.add("nocover"),document.getElementById("yaku_all").style.left="750px";const t=a.GAME_STATE.log2_rate;A(),a.GAME_STATE.log2_rate={0:1,1:2,2:3,3:4,4:5,5:6,6:6}[t],(0,a.back_up_gamestate)();const o=document.getElementById("denote_rate");setTimeout((async()=>{o.style.display="block",await new Promise((e=>setTimeout(e,161.86))),await(0,m.animateNode)(o,1e3*.8093,{to:(0,l.getDenoteRateNodeTopLeft)(a.GAME_STATE.log2_rate),from:(0,l.getDenoteRateNodeTopLeft)(t)}),await new Promise((e=>setTimeout(e,500*.8093))),A(),e?((0,s.allowMainPolling)(),setTimeout(s.sendMainPollAndDoEverythingThatFollows,500*.8093)):(a.GAME_STATE.is_my_turn=!0,(0,a.back_up_gamestate)()),(0,g.remove_cover)("protective_cover_over_field_while_asyncawait")}),161.86)}},2327:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPieceCaptureComment=t.toColorProf=void 0;const n=o(488);t.toColorProf=function(e){if("Tam2"===e)throw new Error("Tam2 was passed to the function `toColorProf`");return null===e?null:[e.color,e.prof]},t.toPieceCaptureComment=function(e){if(null===e)return"";const[t,o]=e;return`手${(0,n.serializeColor)(t)}${(0,n.serializeProf)(o)}`}},4728:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createImageButton=t.createPieceImgToBePlacedOnBoard=t.createPieceImgToBePlacedOnHop1zuo1=t.createCiurl=t.createGuideImageAt=t.createPieceSizeSelectionButtonOnBoard_Shifted=t.createPieceSizeImageOnBoardByPath_Shifted=t.createCancelButton=t.createPieceSizeImageOnBoardByPath=t.createPieceSizeImageOnBoardByPathAndXY=t.createArrowSvg=t.createHandImage=t.createBapPokImage=void 0;const n=o(8460),r=o(4495),i=o(5314);function a(e,t,o,n){const i=document.createElement("img");return i.setAttribute("draggable","false"),i.classList.add(n),i.style.top=`${e}px`,i.style.left=`${t}px`,i.src=`image/${o}.png`,i.width=r.PIECE_SIZE,i.height=r.PIECE_SIZE,i}function s(e,t,o){const{top:n,left:i}=(0,r.coordToPieceXY)(e);return a(n,i,t,o)}function c(e,t,o){const{top:n,left:i}=(0,r.coordToPieceXY_Shifted)(e);return a(n,i,t,o)}t.createBapPokImage=function(e){const t=document.createElement("img");return t.src="image/dat2/同色.png",t.style.position="absolute",t.style.left=`${e.left}px`,t.style.top=`${185+e.top_padding}px`,t.width=50,t},t.createHandImage=function(e,t){const o=document.createElement("img");return o.src=`image/dat2/${e}.png`,o.style.position="absolute",o.style.left=`${t.left}px`,o.style.top=`${t.top_padding}px`,o.width=50,o},t.createArrowSvg=function(e,t){const[o,n]=t,i=o*r.BOX_SIZE+160.5,a=n*r.BOX_SIZE+19.25-65,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"viewBox","0 0 800 800"),s.setAttributeNS(null,"width","800"),s.setAttributeNS(null,"height","800"),s.classList.add("selection"),s.style.top=`${i}px`,s.style.left=`${a}px`;const c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttributeNS(null,"d",e),c.setAttributeNS(null,"fill","#aeff01"),c.setAttributeNS(null,"stroke","#000"),c.setAttributeNS(null,"stroke-width","2"),s.appendChild(c),s},t.createPieceSizeImageOnBoardByPathAndXY=a,t.createPieceSizeImageOnBoardByPath=s,t.createCancelButton=function(){return a(1+9*r.BOX_SIZE+(r.MAX_PIECE_SIZE-r.PIECE_SIZE),1+7.5*r.BOX_SIZE,`piece_img/${(0,i.getPieceFont)()}/upright/bmun`,"piece_image_on_board")},t.createPieceSizeImageOnBoardByPath_Shifted=c,t.createPieceSizeSelectionButtonOnBoard_Shifted=function(e){const t=c(e,"selection2","selection");return t.style.cursor="pointer",t.style.zIndex="200",t},t.createGuideImageAt=function(e,t){const[o,n]=e,i=document.createElement("img");return i.setAttribute("draggable","false"),i.classList.add("guide"),i.style.top=1+o*r.BOX_SIZE+(r.MAX_PIECE_SIZE-r.MAX_PIECE_SIZE)/2+"px",i.style.left=1+n*r.BOX_SIZE+(r.MAX_PIECE_SIZE-r.MAX_PIECE_SIZE)/2+"px",i.src=`image/${t}.png`,i.width=r.MAX_PIECE_SIZE,i.height=r.MAX_PIECE_SIZE,i.style.cursor="守"===t?"not-allowed":"pointer",i.style.opacity="0.3",i},t.createCiurl=function(e,t){const o=document.createElement("img");return o.setAttribute("draggable","false"),o.src=`image/ciurl_${e}.png`,o.width=150,o.height=15,o.classList.add("ciurl"),o.style.left=`${t.left}px`,o.style.top=`${t.top}px`,o.style.zIndex="300",o.style.transform=`rotate(${t.rotateDeg}deg)`,o.style.position="absolute",o},t.createPieceImgToBePlacedOnHop1zuo1=function(e){const t=1+(r.MAX_PIECE_SIZE-r.PIECE_SIZE)/2;return a(e.is_upward?140-r.PIECE_SIZE-t:t,(0,r.hop1_zuo1_left_position)({ind:e.ind,list_length:e.list_length}),e.path,"piece_image_on_hop1zuo1")},t.createPieceImgToBePlacedOnBoard=function(e,t){return s(e,(0,n.toPath_)(t),"piece_image_on_board")},t.createImageButton=function(e,t,o){const n=document.createElement("input");return n.setAttribute("type","image"),n.src=`image/${e}.png`,n.height=200,n.style.backgroundColor="#e0e0e0",n.style.position="absolute",n.style.left="660px",n.style.top=`${t}px`,n.style.border="1px solid #aaaaaa",o&&(n.title=o),n}},1935:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DICTIONARY=t.GAME_END_LINZKLAR=t.TACTICS_LINZKLAR=void 0,t.TACTICS_LINZKLAR={victory_almost_certain:"我須上行。",strengthened_shaman:"為激巫。",free_lunch:"我為無与之手。",avoid_defeat:"心為此而無行下行之道。",loss_almost_certain:"為何即下行。行我心之道。",neutral:"無心来為何善。行周時無下行之道。"},t.GAME_END_LINZKLAR={victory:"汝上行終",draw:"汝値同於我",loss:"汝下行終"},t.DICTIONARY={ja:{failedWaterEntry:"入水判定に失敗しました。",newSeason:["","季節が改まり夏になりました。","季節が改まり秋になりました。","季節が改まり冬になりました。"],gameEnd:"試合終了です。",gameResult:{victory:"あなたの勝ちです",draw:"引き分けです",loss:"あなたの負けです"},tactics:{victory_almost_certain:"勝ち確",strengthened_shaman:"激巫作成",free_lunch:"ただ取り",avoid_defeat:"負けを避けるためにこう指してみるか",loss_almost_certain:"なにやっても負けそうなので好き勝手に指す",neutral:"いい手が思いつかなかったので、即負けしない範囲で好き勝手に指す"},tymokExplanation:"再行; シーズン続行; こいこい",taxotExplanation:"終季; シーズン終了; 点数獲得",pieceSteppingExplanation:"駒を踏む",pieceTakingExplanation:"駒を取る"}}},9447:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawArrow=t.drawCancelButtonAndAddEscEvent=t.drawHoverAt_=t.drawPhantomAt=t.eraseArrow=t.erasePhantomAndOptionallyCancelButtonWhileAlsoRemovingEscEvent=t.eraseGuide=t.drawTwoCiurls=t.drawCiurl=t.notifyWaterEntryFailure=t.animateWaterEntryLogo=t.animateStepTamLogo=t.animateNode=t.WHAT_ESC_KEY_TRIGGERS=void 0;const n=o(892),r=o(4728),i=o(4495),a=o(8460),s=o(7421),c=o(1602),l=o(1935),u=o(6548);function d(e,t,o){const a=function(){let e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)},s=i.BOX_SIZE*(335/70+a()/6),c=84+(null==o||o===n.Side.Upward?771:0),l=t.map(((e,o)=>(0,r.createCiurl)(e,{left:s+.2*i.BOX_SIZE*a(),top:c+26*(o+.5-t.length/2)+.05*i.BOX_SIZE*a(),rotateDeg:40*Math.random()-20})));for(let e=l.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[l[e],l[t]]=[l[t],l[e]]}for(let t=0;t<l.length;t++)e.appendChild(l[t])}function _(){(0,s.removeAllChildren)(document.getElementById("contains_ciurl"))}function f(){const e=document.getElementById("contains_phantom");for(;e.firstChild;)e.removeChild(e.firstChild);t.WHAT_ESC_KEY_TRIGGERS=()=>{}}t.WHAT_ESC_KEY_TRIGGERS=()=>{},t.animateNode=async function(e,t,o,n="100",r){e.style.transition=`transform ${t/1e3}s ease`,e.style.zIndex=n,e.style.transform=`translateY(${o.to.top-o.from.top}px)`,e.style.transform+=`translateX(${o.to.left-o.from.left}px)`,null!=r&&(e.style.transform+=`rotate(${r}deg)`),await new Promise((e=>setTimeout(e,t)))},t.animateStepTamLogo=async function(){const e=document.getElementById("step_tam_logo");e.style.display="block",e.classList.add("step_tam"),(0,c.add_cover)("protective_cover_over_field_while_asyncawait"),setTimeout((()=>{e.style.display="none",(0,c.remove_cover)("protective_cover_over_field_while_asyncawait")}),971.16),await new Promise((e=>setTimeout(e,1e3*.8093)))},t.animateWaterEntryLogo=async function(){const e=document.getElementById("water_entry_logo");e.style.display="block",e.classList.add("water_entry"),(0,c.add_cover)("protective_cover_over_field_while_asyncawait"),setTimeout((()=>{e.style.display="none",(0,c.remove_cover)("protective_cover_over_field_while_asyncawait")}),971.16),await new Promise((e=>setTimeout(e,1e3*.8093)))},t.notifyWaterEntryFailure=async function(){await new Promise((e=>setTimeout(e,242.79))),await new Promise(((e,t)=>{const o=document.getElementById("season_transition_message_or_water_entry_failure_message");o.onload=()=>e(o),o.onerror=e=>t(e),o.src="image/裁言勿入水.png"})),(0,c.add_cover)("protective_cover_over_field"),(0,c.add_cover)("protective_cover_over_field_while_asyncawait"),u.KRUT_CRUOP&&(new Audio("sound/water_entry.wav").play(),await new Promise((e=>setTimeout(e,500*.8093)))),document.getElementById("season_transition_message_or_water_entry_failure_message_container").classList.remove("nocover"),await new Promise((e=>setTimeout(e,1375.81))),"x-faikleone"!==sessionStorage.lang&&alert(l.DICTIONARY.ja.failedWaterEntry),await new Promise((e=>setTimeout(e,242.79))),(0,c.remove_cover)("protective_cover_over_field"),(0,c.remove_cover)("protective_cover_over_field_while_asyncawait"),document.getElementById("season_transition_message_or_water_entry_failure_message_container").classList.add("nocover")},t.drawCiurl=function(e,t){_(),d(document.getElementById("contains_ciurl"),e,t)},t.drawTwoCiurls=function(e){_(),d(document.getElementById("contains_ciurl"),e[0],n.Side.Upward),d(document.getElementById("contains_ciurl"),e[1],n.Side.Downward)},t.eraseGuide=function(){(0,s.removeAllChildren)(document.getElementById("contains_guides")),(0,s.removeAllChildren)(document.getElementById("contains_guides_on_upward"))},t.erasePhantomAndOptionallyCancelButtonWhileAlsoRemovingEscEvent=f,t.eraseArrow=function(){(0,s.removeAllChildren)(document.getElementById("arrows"))},t.drawPhantomAt=function(e,t){const o=document.getElementById("contains_phantom");f();const n=(0,r.createPieceImgToBePlacedOnBoard)(e,t);n.style.opacity="0.1",o.appendChild(n)},t.drawHoverAt_=function(e,t,o){const n=document.getElementById("contains_phantom"),i=(0,r.createPieceSizeImageOnBoardByPath_Shifted)(e,(0,a.toPath_)(t),"piece_image_on_board");i.style.zIndex="100",i.style.cursor="pointer";const s=function(){o(e,t)};i.addEventListener("click",s),n.appendChild(i),s()},t.drawCancelButtonAndAddEscEvent=function(e){const o=document.getElementById("contains_phantom"),n=(0,r.createCancelButton)();n.width=80,n.height=80,n.style.zIndex="100",n.style.cursor="pointer",n.setAttribute("id","cancelButton"),n.addEventListener("click",e),t.WHAT_ESC_KEY_TRIGGERS=e,o.appendChild(n)},t.drawArrow=function(e,t){const o=(()=>{if(e[1]===t[1]&&e[0]>t[0]){const o=e[0]-t[0];return`m31.6 ${51.3+i.BOX_SIZE*o}h5.8v${-(34.5+i.BOX_SIZE*o)}l-21.3 31 4.5 3.2 11-16z`}if(e[1]===t[1]&&e[0]<t[0]){const o=t[0]-e[0];return`m31.6 18.7h5.8v${34.5+i.BOX_SIZE*o}l-21.3-31 4.5-3.2 11 16z`}if(e[0]===t[0]&&e[1]>t[1]){const o=e[1]-t[1];return`m${51.3+i.BOX_SIZE*o} 31.6v5.8h${-(34.5+i.BOX_SIZE*o)}l31-21.3 3.2 4.5-16 11z`}if(e[0]===t[0]&&e[1]<t[1]){const o=t[1]-e[1];return`m18.7 31.6v5.8h${34.5+i.BOX_SIZE*o}l-31-21.3-3.2 4.5 16 11z`}if(e[0]>t[0]&&e[1]<t[1]&&e[0]-t[0]==t[1]-e[1]){const o=e[0]-t[0];return`m${32.9+i.BOX_SIZE*o} 34.8-19.8 5.6-1.8-5.9 41-10.7 ${-(32.4+i.BOX_SIZE*o)} ${32.4+i.BOX_SIZE*o}-4.2-4.2z`}if(e[0]<t[0]&&e[1]>t[1]&&e[0]-t[0]==t[1]-e[1]){const o=e[1]-t[1];return`m34.8 ${32.9+i.BOX_SIZE*o} 5.6-19.8-5.9-1.8-10.7 41 ${32.4+i.BOX_SIZE*o} ${-(32.4+i.BOX_SIZE*o)}-4.2-4.2z`}if(e[0]>t[0]&&e[1]>t[1]&&e[0]-t[0]==e[1]-t[1]){const o=e[1]-t[1];return`m34.8 37.1 5.6 19.8-5.9 1.8-10.7-41 ${32.4+i.BOX_SIZE*o} ${32.4+i.BOX_SIZE*o}-4.2 4.2z`}if(e[0]<t[0]&&e[1]<t[1]&&e[0]-t[0]==e[1]-t[1]){const o=t[0]-e[0];return`m${32.9+i.BOX_SIZE*o} ${35.2+i.BOX_SIZE*o}-19.8-5.6-1.8 5.9 41 10.7 ${-(32.4+i.BOX_SIZE*o)} ${-(32.4+i.BOX_SIZE*o)}-4.2 4.2z`}throw new Error("unsupported direction for the arrow")})(),n=[Math.min(e[0],t[0]),Math.min(e[1],t[1])];document.getElementById("arrows").appendChild((0,r.createArrowSvg)(o,n))}},2392:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.API_ORIGIN=void 0,t.API_ORIGIN="https://little-water-8645.fly.dev"},8513:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_STATE=t.back_up_gamestate=t.initial_board_with_IA_down=t.fromAbsoluteCoord=t.toAbsoluteCoord=void 0;const n=o(892),r=o(4974),i=o(1849),a=o(892),s=o(1602);t.toAbsoluteCoord=function(e){return(0,a.toAbsoluteCoord_)(e,t.GAME_STATE.IA_is_down)},t.fromAbsoluteCoord=function(e){return(0,a.fromAbsoluteCoord_)(e,t.GAME_STATE.IA_is_down)},t.initial_board_with_IA_down=[[{color:r.Color.Huok2,prof:r.Profession.Kua2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Maun1,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kaun1,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Uai1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Io,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Uai1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kaun1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Maun1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kua2,side:n.Side.Downward}],[{color:r.Color.Kok1,prof:r.Profession.Tuk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Gua2,side:n.Side.Downward},null,{color:r.Color.Kok1,prof:r.Profession.Dau2,side:n.Side.Downward},null,{color:r.Color.Huok2,prof:r.Profession.Dau2,side:n.Side.Downward},null,{color:r.Color.Huok2,prof:r.Profession.Gua2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Tuk2,side:n.Side.Downward}],[{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Nuak1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward}],[null,null,null,null,null,null,null,null,null],[null,null,null,null,"Tam2",null,null,null,null],[null,null,null,null,null,null,null,null,null],[{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Nuak1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward}],[{color:r.Color.Huok2,prof:r.Profession.Tuk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Gua2,side:n.Side.Upward},null,{color:r.Color.Huok2,prof:r.Profession.Dau2,side:n.Side.Upward},null,{color:r.Color.Kok1,prof:r.Profession.Dau2,side:n.Side.Upward},null,{color:r.Color.Kok1,prof:r.Profession.Gua2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Tuk2,side:n.Side.Upward}],[{color:r.Color.Kok1,prof:r.Profession.Kua2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Maun1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kaun1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Uai1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Io,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Uai1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kaun1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Maun1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kua2,side:n.Side.Upward}]];const c=e=>{let t=!0,o=e.my_score;const n=e.scores_of_each_season;let r=e.season;const a=e.log2_rate;return{last_move_focus:e.last_move_focus,f:e.f,IA_is_down:e.IA_is_down,tam_itself_is_tam_hue:!0,opponent_has_just_moved_tam:!1,set is_my_turn(e){t=!!e,t?(document.getElementById("my_icon").style.opacity="1",document.getElementById("larta_opponent").style.opacity="0.3",document.getElementById("opponent_message").textContent="",document.getElementById("opponent_message_linzklar").textContent="",(0,s.remove_cover)("protective_cover_over_field_while_waiting_for_opponent")):(document.getElementById("my_icon").style.opacity="0.3",document.getElementById("larta_opponent").style.opacity="1",(0,s.add_cover)("protective_cover_over_field_while_waiting_for_opponent"),window.setTimeout(i.sendMainPollAndDoEverythingThatFollows,500*.8093))},get is_my_turn(){return t},backupDuringStepping:e.backupDuringStepping,set my_score(e){n[r].push(e-o),o=e},get my_score(){return o},get season(){return r},set season(e){r=e},get scores_of_each_season(){return[n[0].concat([]),n[1].concat([]),n[2].concat([]),n[3].concat([])]},set scores_of_each_season(e){throw new Error("Cannot set scores_of_each_season. Please set my_score to reflect the change in the score.")},log2_rate:a}};var l;t.back_up_gamestate=function(){const e={IA_is_down:t.GAME_STATE.IA_is_down,my_score:t.GAME_STATE.my_score,season:t.GAME_STATE.season,scores_of_each_season:t.GAME_STATE.scores_of_each_season,log2_rate:t.GAME_STATE.log2_rate,last_move_focus:t.GAME_STATE.last_move_focus,f:t.GAME_STATE.f,backupDuringStepping:t.GAME_STATE.backupDuringStepping};sessionStorage.game_state_backup=JSON.stringify(e)},t.GAME_STATE=sessionStorage.getItem("game_state_backup")?c(JSON.parse(sessionStorage.game_state_backup)):c({IA_is_down:(l={IA_is_down:(()=>{try{return JSON.parse(sessionStorage.is_IA_down_for_me)}catch{location.href="entrance.html"}})()}).IA_is_down,my_score:20,season:0,scores_of_each_season:[[],[],[],[]],log2_rate:0,last_move_focus:null,f:{currentBoard:l.IA_is_down?(0,n.rotateBoard)((0,n.rotateBoard)(t.initial_board_with_IA_down)):(0,n.rotateBoard)(t.initial_board_with_IA_down),hop1zuo1OfDownward:[],hop1zuo1OfUpward:[]},backupDuringStepping:null})},4495:(e,t)=>{"use strict";function o(e){return e.list_length<=9?e.ind:8*e.ind/(e.list_length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDenoteRateNodeTopLeft=t.getDenoteScoreNodeTopLeft=t.getDenoteSeasonNodeTopLeft=t.indToHo1Zuo1OfDownward=t.hop1_zuo1_left_position=t.coordToPieceXY_Shifted=t.coordToPieceXY=t.adjust_ind_for_hop1zuo1=t.PIECE_SIZE=t.MAX_PIECE_SIZE=t.BOX_SIZE=void 0,t.BOX_SIZE=70,t.MAX_PIECE_SIZE=t.BOX_SIZE-1,t.PIECE_SIZE=60,t.adjust_ind_for_hop1zuo1=o,t.coordToPieceXY=function(e){const[o,n]=e;return{top:1+o*t.BOX_SIZE+(t.MAX_PIECE_SIZE-t.PIECE_SIZE)/2,left:1+n*t.BOX_SIZE+(t.MAX_PIECE_SIZE-t.PIECE_SIZE)/2}},t.coordToPieceXY_Shifted=function(e){const[o,n]=e;return{top:1+o*t.BOX_SIZE+(t.MAX_PIECE_SIZE-t.PIECE_SIZE),left:1+n*t.BOX_SIZE}},t.hop1_zuo1_left_position=function(e){return 1+o(e)*t.BOX_SIZE+(t.MAX_PIECE_SIZE-t.PIECE_SIZE)/2},t.indToHo1Zuo1OfDownward=function(e){return{top:-135,left:1+e*t.BOX_SIZE+(t.MAX_PIECE_SIZE-t.PIECE_SIZE)/2}},t.getDenoteSeasonNodeTopLeft=function(e){return{top:360+51*(3-e),left:3}},t.getDenoteScoreNodeTopLeft=function(e){return{top:447+21.83333333333333*(20-e),left:65}},t.getDenoteRateNodeTopLeft=function(e){return{top:873-48.333333333333336*(e-1),left:4}}},4204:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resurrect=t.push_header_elem_and_display=t.push_body_elem_and_display=t.push_initial_colors_and_display=t.display_kiar_ark=void 0;const n=o(8513),r={header:[],body:[],initial_colors:[]};function i(){sessionStorage.kiar_ark=JSON.stringify(r),console.log("_kiar_ark:",r);const e=`{一位色:${r.initial_colors.join("")}}\n`+r.header.map((e=>e.dat)).join("\n")+"\n"+function(e){var t,o,n,r;let i="";for(let a=0;a<e.length;){const s=e[a],c=e[a+1];if("movement"===(null==s?void 0:s.type)&&"movement"===(null==c?void 0:c.type))i+=s.dat+(null!==(t=s.piece_capture_comment)&&void 0!==t?t:"")+"\t"+c.dat+(null!==(o=c.piece_capture_comment)&&void 0!==o?o:"")+"\n",a+=2;else if("tymoktaxot"===(null==s?void 0:s.type))i+="\n"+s.dat+"\n\n",a+=1;else if("movement"===(null==s?void 0:s.type)&&"tymoktaxot"===(null==c?void 0:c.type))i+=s.dat+(null!==(n=s.piece_capture_comment)&&void 0!==n?n:"")+"\n\n"+c.dat+"\n\n",a+=2;else{if("movement"!==(null==s?void 0:s.type)||void 0!==c)throw new Error(`Unexpected: the types passed to KIAR_ARK.body are "${null==s?void 0:s.type}" followed by "${null==c?void 0:c.type}".`);i+=s.dat+(null!==(r=s.piece_capture_comment)&&void 0!==r?r:"")+"\n",a+=1}}return i}(r.body);document.getElementById("kiar_ark").textContent=e,document.getElementById("kiar_ark_link").href=`https://sozysozbot.github.io/cetkaik_platform/show_history.html?side=${n.GAME_STATE.IA_is_down?"ia":"a"}&history=${encodeURIComponent(e)}`}t.display_kiar_ark=i,t.push_initial_colors_and_display=function(e){r.initial_colors.push(e),i()},t.push_body_elem_and_display=function(e){r.body.push(e),i()},t.push_header_elem_and_display=function(e){r.header.push(e),i()},t.resurrect=function(e){r.header=e.header,r.initial_colors=e.initial_colors,r.body=e.body}},8519:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.selectOwnPieceOnHop1zuo1=t.selectOwnPieceOnBoard=t.animateProcessDeterminingWhoGoesFirst=t.drawCiurlWithAudio=void 0;const a=o(4728),s=o(8513),c=o(1849),l=o(892),u=o(8460),d=o(892),_=o(4495),f=o(1935),p=o(9798),m=o(5050),y=i(o(4204)),v=o(6548),E=o(9447),w=o(488),g=o(2327),h=o(9672),A=o(1602),T=o(7421);let b=null;function S(e){const t=P();return console.log("drawField #",1.1),(0,h.drawField)({focus:e}),t}function P(){(0,E.eraseGuide)(),(0,E.erasePhantomAndOptionallyCancelButtonWhileAlsoRemovingEscEvent)(),(0,A.remove_cover)("protective_cover_over_field");const e=s.GAME_STATE.backupDuringStepping,t=e[0],o=e[1];return s.GAME_STATE.f.currentBoard[t[0]][t[1]]=o,(0,s.back_up_gamestate)(),s.GAME_STATE.backupDuringStepping=null,(0,s.back_up_gamestate)(),b=null,console.log("drawField #",1),(0,h.drawField)({focus:s.GAME_STATE.last_move_focus}),{piece_moved:o,maybe_capture:null}}function O(e,t,o){(0,E.eraseGuide)(),(0,A.add_cover)("protective_tam_cover_over_field"),(0,A.remove_cover)("protective_cover_over_field"),s.GAME_STATE.f.currentBoard[e[0]][e[1]]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[t[0]][t[1]]="Tam2",(0,s.back_up_gamestate)(),console.log("drawField #",4.1),(0,h.drawField)({focus:null}),(0,E.drawPhantomAt)(e,"Tam2"),(0,E.drawCancelButtonAndAddEscEvent)((()=>{(0,E.eraseGuide)(),(0,E.erasePhantomAndOptionallyCancelButtonWhileAlsoRemovingEscEvent)(),(0,A.remove_cover)("protective_tam_cover_over_field"),(0,A.remove_cover)("protective_cover_over_field"),s.GAME_STATE.f.currentBoard[t[0]][t[1]]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[e[0]][e[1]]="Tam2",(0,s.back_up_gamestate)(),b=null,console.log("drawField #",5.1),(0,h.drawField)({focus:s.GAME_STATE.last_move_focus})})),function(t){const n=document.getElementById("contains_phantom"),r=(0,a.createPieceSizeImageOnBoardByPath)(t,(0,u.toPath_)("Tam2"),"piece_image_on_board");r.style.zIndex="100",r.style.cursor="pointer";const i=function(){const n=document.getElementById("contains_guides"),r=(0,a.createPieceSizeImageOnBoardByPath)(t,"selection2","selection");r.style.cursor="pointer",r.style.zIndex="200",n.appendChild(r);const{finite:i,infinite:c}=(0,d.calculateMovablePositions)(t,"Tam2",s.GAME_STATE.f.currentBoard,s.GAME_STATE.tam_itself_is_tam_hue);if(c.length>0)throw new Error("should not happen");for(let r=0;r<i.length;r++){const[c,l]=i[r],u=s.GAME_STATE.f.currentBoard[c][l];if(void 0!==o&&null!==u)continue;const _=(0,a.createGuideImageAt)(i[r],"yellow_diamond_for_tam");null===u?_.addEventListener("click",(()=>{const n=e,a=t,c=i[r];console.assert(null==s.GAME_STATE.f.currentBoard[c[0]][c[1]]);const l=o?{type:"TamMove",stepStyle:"StepsDuringFormer",src:(0,s.toAbsoluteCoord)(n),step:(0,s.toAbsoluteCoord)(o),firstDest:(0,s.toAbsoluteCoord)(a),secondDest:(0,s.toAbsoluteCoord)(c)}:{type:"TamMove",stepStyle:"NoStep",src:(0,s.toAbsoluteCoord)(n),firstDest:(0,s.toAbsoluteCoord)(a),secondDest:(0,s.toAbsoluteCoord)(c)};(0,E.erasePhantomAndOptionallyCancelButtonWhileAlsoRemovingEscEvent)(),(0,E.eraseGuide)(),k(l),(0,A.remove_cover)("protective_tam_cover_over_field")})):_.addEventListener("click",(function(){var o,n,c;o=e,n=t,c=i[r],(0,E.eraseGuide)(),(0,A.add_cover)("protective_cover_over_field"),(0,A.add_cover)("protective_tam_cover_over_field"),s.GAME_STATE.backupDuringStepping=[n,"Tam2"],(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[n[0]][n[1]]=null,(0,s.back_up_gamestate)(),document.getElementById("cancelButton").remove(),console.log("drawField #",2),(0,h.drawField)({focus:null}),(0,E.drawPhantomAt)(n,"Tam2"),(0,E.drawCancelButtonAndAddEscEvent)((()=>{(0,E.eraseGuide)(),(0,E.erasePhantomAndOptionallyCancelButtonWhileAlsoRemovingEscEvent)(),(0,A.remove_cover)("protective_cover_over_field"),(0,A.remove_cover)("protective_tam_cover_over_field"),s.GAME_STATE.f.currentBoard[o[0]][o[1]]="Tam2",(0,s.back_up_gamestate)(),s.GAME_STATE.backupDuringStepping=null,(0,s.back_up_gamestate)(),b=null,console.log("drawField #",3.1),(0,h.drawField)({focus:s.GAME_STATE.last_move_focus})})),(0,E.drawHoverAt_)(c,"Tam2",((e,t)=>{const r=document.getElementById("contains_guides"),i=(0,a.createPieceSizeSelectionButtonOnBoard_Shifted)(e);r.appendChild(i);const{finite:l,infinite:u}=(0,d.calculateMovablePositions)(e,t,s.GAME_STATE.f.currentBoard,s.GAME_STATE.tam_itself_is_tam_hue);if(u.length>0)throw new Error("should not happen");for(let e=0;e<l.length;e++){const t=l[e],[i,u]=t;if(null!==s.GAME_STATE.f.currentBoard[i][u])continue;const d=(0,a.createGuideImageAt)(t,"yellow_diamond_for_tam");d.addEventListener("click",(function(){const e={type:"TamMove",stepStyle:"StepsDuringLatter",src:(0,s.toAbsoluteCoord)(o),step:(0,s.toAbsoluteCoord)(c),firstDest:(0,s.toAbsoluteCoord)(n),secondDest:(0,s.toAbsoluteCoord)(t)};(0,E.eraseGuide)(),(0,E.erasePhantomAndOptionallyCancelButtonWhileAlsoRemovingEscEvent)(),k(e),(0,A.remove_cover)("protective_cover_over_field"),(0,A.remove_cover)("protective_tam_cover_over_field")})),d.style.zIndex="200",r.appendChild(d)}}))})),_.style.zIndex="200",n.appendChild(_)}};r.addEventListener("click",i),n.appendChild(r),i()}(t)}function M(e,t,o){(0,E.eraseGuide)(),(0,A.add_cover)("protective_cover_over_field"),s.GAME_STATE.backupDuringStepping=[e,t],(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[e[0]][e[1]]=null,(0,s.back_up_gamestate)(),console.log("drawField #",6.2),(0,h.drawField)({focus:null}),(0,E.drawPhantomAt)(e,t),(0,E.drawCancelButtonAndAddEscEvent)(P),(0,E.drawHoverAt_)(o,t,(function(e,t){const o=document.getElementById("contains_guides"),n=(0,a.createPieceSizeSelectionButtonOnBoard_Shifted)(e);o.appendChild(n);const{finite:r,infinite:i}=(0,d.calculateMovablePositions)(e,t,s.GAME_STATE.f.currentBoard,s.GAME_STATE.tam_itself_is_tam_hue);if(x(e,{piece:t,path:"yellow_circle"},o,r),"Tam2"!==t)x(e,{piece:t,path:"green_circle"},o,i);else if(i.length>0)throw new Error("should not happen")}))}async function I(e,t){var o;const n=await(0,h.sendStuffTo)("decision/afterhalfacceptance","`after half acceptance`",e,(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if("Err"===n.type)throw alert(`Illegal API sent, the reason being ${n.why_illegal}`),new Error(`Illegal API sent, the reason being ${n.why_illegal}`);if("WithoutWaterEntry"===n.type){(0,E.eraseGuide)(),b=null;const o=C(e,t.src,t.step),n=(()=>{if("Tam2"===o.piece_moved)throw new Error("Tam2 was passed to piece_moved");return(0,w.serializeProf)(o.piece_moved.prof)})();return console.log("drawField #",7),(0,h.drawField)({focus:s.GAME_STATE.last_move_focus}),s.GAME_STATE.is_my_turn=!1,(0,s.back_up_gamestate)(),void(e.dest?y.push_body_elem_and_display({type:"movement",dat:`${(0,w.serializeAbsoluteCoord)((0,s.toAbsoluteCoord)(t.src))}${n}${(0,w.serializeAbsoluteCoord)((0,s.toAbsoluteCoord)(t.step))}${(0,w.serializeAbsoluteCoord)(e.dest)}橋${(0,w.serializeCiurl)(t.stepping_ciurl)}`,piece_capture_comment:(0,g.toPieceCaptureComment)(o.maybe_capture)}):y.push_body_elem_and_display({type:"movement",dat:`${(0,w.serializeAbsoluteCoord)((0,s.toAbsoluteCoord)(t.src))}${n}${(0,w.serializeAbsoluteCoord)((0,s.toAbsoluteCoord)(t.step))}${(0,w.serializeAbsoluteCoord)(t.planned_destination)}橋${(0,w.serializeCiurl)(t.stepping_ciurl)}此無`,piece_capture_comment:(0,g.toPieceCaptureComment)(o.maybe_capture)}))}if(await(0,E.animateWaterEntryLogo)(),L(n.ciurl),await new Promise((e=>setTimeout(e,500*.8093))),n.ciurl.filter((e=>e)).length<3){await(0,E.notifyWaterEntryFailure)(),(0,E.eraseGuide)(),b=null;const r=S(t.src);s.GAME_STATE.is_my_turn=!1,(0,s.back_up_gamestate)();const i=(()=>{const e=r.piece_moved;if("Tam2"===e)throw new Error("Tam2 encountered in the backup even though we are in sendAfterAcceptance");return(0,w.serializeProf)(e.prof)})(),a=null!==(o=e.dest)&&void 0!==o?o:(()=>{throw new Error("This should not happen; it should have been rejected before the water entry")})();y.push_body_elem_and_display({type:"movement",dat:`${(0,w.serializeAbsoluteCoord)((0,s.toAbsoluteCoord)(t.src))}${i}${(0,w.serializeAbsoluteCoord)((0,s.toAbsoluteCoord)(t.step))}${(0,w.serializeAbsoluteCoord)(a)}橋${(0,w.serializeCiurl)(t.stepping_ciurl)}水${(0,w.serializeCiurl)(n.ciurl)}此無`})}else{(0,E.eraseGuide)(),b=null;const o=C(e,t.src,t.step);console.log("drawField #",8),(0,h.drawField)({focus:s.GAME_STATE.last_move_focus}),s.GAME_STATE.is_my_turn=!1,(0,s.back_up_gamestate)();const r=(()=>{if("Tam2"===o.piece_moved)throw new Error("Tam2 was passed to `piece_moved`");return(0,w.serializeProf)(o.piece_moved.prof)})();if(!e.dest)throw new Error("This should not happen; it should have been rejected before the water entry");y.push_body_elem_and_display({type:"movement",dat:`${(0,w.serializeAbsoluteCoord)((0,s.toAbsoluteCoord)(t.src))}${r}${(0,w.serializeAbsoluteCoord)((0,s.toAbsoluteCoord)(t.step))}${(0,w.serializeAbsoluteCoord)(e.dest)}橋${(0,w.serializeCiurl)(t.stepping_ciurl)}水${(0,w.serializeCiurl)(n.ciurl)}`,piece_capture_comment:(0,g.toPieceCaptureComment)(o.maybe_capture)})}}async function k(e){const t=await(0,h.sendStuffTo)("decision/normalmove","normal move",e,(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if("Err"===t.type)throw alert(`Illegal API sent, the reason being ${t.why_illegal}`),new Error(`Illegal API sent, the reason being ${t.why_illegal}`);if("WithoutWaterEntry"===t.type){(0,E.eraseGuide)(),b=null;const t=D(e);return console.log("drawField #",9),(0,h.drawField)({focus:s.GAME_STATE.last_move_focus}),s.GAME_STATE.is_my_turn=!1,(0,s.back_up_gamestate)(),void y.push_body_elem_and_display({type:"movement",dat:(0,w.normalMoveToKiarArk)(e,{piece_moved:t.piece_moved}),piece_capture_comment:(0,g.toPieceCaptureComment)(t.maybe_capture)})}if(await(0,E.animateWaterEntryLogo)(),L(t.ciurl),await new Promise((e=>setTimeout(e,500*.8093))),t.ciurl.filter((e=>e)).length<3){if(await(0,E.notifyWaterEntryFailure)(),(0,E.eraseGuide)(),b=null,"NonTamMove"===e.type&&"SrcStepDstFinite"===e.data.type){const o=S((0,s.fromAbsoluteCoord)(e.data.src));s.GAME_STATE.is_my_turn=!1,(0,s.back_up_gamestate)(),y.push_body_elem_and_display({type:"movement",dat:(0,w.normalMoveToKiarArk)(e,{water_ciurl_count:t.ciurl.filter((e=>e)).length,piece_moved:o.piece_moved})})}else if("NonTamMove"===e.type&&"FromHand"!==e.data.type){console.log("drawField #",10.1),(0,h.drawField)({focus:(0,s.fromAbsoluteCoord)(e.data.src)}),s.GAME_STATE.is_my_turn=!1,(0,s.back_up_gamestate)();const[o,n]=(0,s.fromAbsoluteCoord)(e.data.src),r=s.GAME_STATE.f.currentBoard[o][n];if(null===r)throw new Error("Cannot happen");y.push_body_elem_and_display({type:"movement",dat:(0,w.normalMoveToKiarArk)(e,{water_ciurl_count:t.ciurl.filter((e=>e)).length,piece_moved:r})})}}else{(0,E.eraseGuide)(),b=null;const o=D(e);console.log("drawField #",10),(0,h.drawField)({focus:s.GAME_STATE.last_move_focus}),s.GAME_STATE.is_my_turn=!1,(0,s.back_up_gamestate)(),y.push_body_elem_and_display({type:"movement",dat:(0,w.normalMoveToKiarArk)(e,{piece_moved:o.piece_moved,water_ciurl_count:t.ciurl.filter((e=>e)).length}),piece_capture_comment:(0,g.toPieceCaptureComment)(o.maybe_capture)})}}function C(e,t,o){if(console.log(t,o),null===e.dest){const e=P();return console.log("lone assignment to last_move_focus, #",0),s.GAME_STATE.last_move_focus=t,(0,s.back_up_gamestate)(),{piece_moved:e.piece_moved,maybe_capture:null}}const[n,r]=(0,s.fromAbsoluteCoord)(e.dest),i=s.GAME_STATE.backupDuringStepping[1];P();const[a,c]=t,[u,d]=o;if(null===s.GAME_STATE.f.currentBoard[u][d])throw new Error("step is unoccupied");const _=s.GAME_STATE.f.currentBoard[n][r];return(0,l.coordEq)([a,c],[n,r])?(console.log("lone assignment to last_move_focus, #",1),s.GAME_STATE.last_move_focus=[a,c],(0,s.back_up_gamestate)(),{piece_moved:i,maybe_capture:null}):(null!==_&&N(_),s.GAME_STATE.f.currentBoard[a][c]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[n][r]=i,(0,s.back_up_gamestate)(),console.log("lone assignment to last_move_focus, #",2),s.GAME_STATE.last_move_focus=[n,r],(0,s.back_up_gamestate)(),{piece_moved:i,maybe_capture:(0,g.toColorProf)(_)})}function N(e){const t=(()=>{if("Tam2"===e)throw new Error("dest is occupied by Tam2");if(e.side===l.Side.Upward)throw new Error("dest is occupied by an ally");if(e.side===l.Side.Downward)return{color:e.color,prof:e.prof,side:l.Side.Upward};throw e.side,new Error("should not reach here")})(),o=(0,h.calculateHandsAndScore)(s.GAME_STATE.f.hop1zuo1OfUpward);s.GAME_STATE.f.hop1zuo1OfUpward.push(t),(0,s.back_up_gamestate)();const n=(0,h.calculateHandsAndScore)(s.GAME_STATE.f.hop1zuo1OfUpward);n.score!==o.score&&(setTimeout((()=>{(0,p.drawScoreDisplay)(n.hands);const e=n.score,t=document.getElementById("score_display"),o=(0,a.createImageButton)("再行",0,"x-faikleone"===sessionStorage.lang?"":f.DICTIONARY.ja.tymokExplanation);o.addEventListener("click",(async()=>{if((0,h.increaseRateAndAnimate)(!0),"Ok"!==(await(0,h.sendStuffTo)("decision/tymok","`send whether ty mok1`",{},(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)))).type)throw new Error("bad!!!!");y.push_body_elem_and_display({type:"tymoktaxot",dat:`或為${n.hands.join("加")}\n再行`})})),t.appendChild(o);const r=(0,a.createImageButton)("終季",250,"x-faikleone"===sessionStorage.lang?"":f.DICTIONARY.ja.taxotExplanation);r.addEventListener("click",(async()=>{const t=await(0,h.sendStuffTo)("decision/taxot","`send whether ty mok1`",{},(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if("Ok"!==t.type)throw new Error("bad!!!!");const o=t.is_first_move_my_move,r=["春","夏","秋","冬"][s.GAME_STATE.season];(0,h.endSeason)(e,o),y.push_body_elem_and_display({type:"tymoktaxot",dat:`或為${n.hands.join("加")}而手${(0,m.toDigitsLinzklar)(e*Math.pow(2,s.GAME_STATE.log2_rate)).join("")}\n終季\t${r}終`})})),t.appendChild(r)}),1e3*.8093),(0,c.forbidMainPolling)())}function D(e){if("NonTamMove"===e.type){if("FromHand"===e.data.type){const t=e.data,o=s.GAME_STATE.f.hop1zuo1OfUpward.findIndex((e=>e.color===t.color&&e.prof===t.prof));if(-1===o)throw new Error("What should exist in the hand does not exist");const[n]=s.GAME_STATE.f.hop1zuo1OfUpward.splice(o,1),[r,i]=(0,s.fromAbsoluteCoord)(t.dest);if(null!==s.GAME_STATE.f.currentBoard[r][i])throw new Error("Trying to parachute the piece onto an occupied space");return s.GAME_STATE.f.currentBoard[r][i]=n,(0,s.back_up_gamestate)(),console.log("lone assignment to last_move_focus, #",3),s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),{piece_moved:n,maybe_capture:null}}if("SrcDst"===e.data.type){const t=e.data,[o,n]=(0,s.fromAbsoluteCoord)(t.src),[r,i]=(0,s.fromAbsoluteCoord)(t.dest),a=s.GAME_STATE.f.currentBoard[o][n];if(null===a)throw new Error("src is unoccupied");const c=s.GAME_STATE.f.currentBoard[r][i];return null!==c&&N(c),s.GAME_STATE.f.currentBoard[o][n]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[r][i]=a,(0,s.back_up_gamestate)(),console.log("lone assignment to last_move_focus, #",4),s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),{piece_moved:a,maybe_capture:(0,g.toColorProf)(c)}}if("SrcStepDstFinite"===e.data.type){const t=e.data,[o,n]=(0,s.fromAbsoluteCoord)(t.src),[r,i]=(0,s.fromAbsoluteCoord)(t.dest),a=s.GAME_STATE.backupDuringStepping[1];P();const[c,u]=(0,s.fromAbsoluteCoord)(t.step);if(null===s.GAME_STATE.f.currentBoard[c][u])throw new Error("step is unoccupied");const d=s.GAME_STATE.f.currentBoard[r][i];return(0,l.coordEq)([o,n],[r,i])?(s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),console.log("lone assignment to last_move_focus, #",4.5),{piece_moved:a,maybe_capture:null}):(null!==d&&N(d),s.GAME_STATE.f.currentBoard[o][n]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[r][i]=a,(0,s.back_up_gamestate)(),s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),console.log("lone assignment to last_move_focus, #",5),{piece_moved:a,maybe_capture:(0,g.toColorProf)(d)})}throw e.data,new Error("should not reach here")}if("TamMove"===e.type){const t=e,[o,n]=(0,s.fromAbsoluteCoord)(t.firstDest),[r,i]=(0,s.fromAbsoluteCoord)(t.secondDest);if("StepsDuringLatter"===e.stepStyle)return s.GAME_STATE.f.currentBoard[r][i]="Tam2",(0,s.back_up_gamestate)(),s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),console.log("lone assignment to last_move_focus, #",6),{piece_moved:"Tam2",maybe_capture:null};const a=s.GAME_STATE.f.currentBoard[o][n];if(null===a)throw new Error("firstDest is unoccupied");if("Tam2"!==a)throw new Error("TamMove but not Tam2");return(0,l.coordEq)([o,n],[r,i])?(s.GAME_STATE.last_move_focus=[r,i],console.log("lone assignment to last_move_focus, #",7),{piece_moved:"Tam2",maybe_capture:null}):(s.GAME_STATE.f.currentBoard[o][n]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[r][i]=a,(0,s.back_up_gamestate)(),s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),console.log("lone assignment to last_move_focus, #",8),{piece_moved:"Tam2",maybe_capture:null})}throw new Error("should not reach here")}function B(e,t,o,n){if(null==s.GAME_STATE.f.currentBoard[o[0]][o[1]]){let n;return"Tam2"!==e?(n={type:"NonTamMove",data:{type:"SrcDst",src:(0,s.toAbsoluteCoord)(t),dest:(0,s.toAbsoluteCoord)(o)}},void k(n)):void O(t,o)}if(!(0,d.canGetOccupiedBy)(l.Side.Upward,o,e,s.GAME_STATE.f.currentBoard,s.GAME_STATE.tam_itself_is_tam_hue))return void M(t,e,o);if(!n)return void M(t,e,o);const r=document.getElementById("whether_to_take_or_step");r.classList.remove("nocover"),(0,T.removeAllChildren)(r),document.getElementById("yaku_all").style.left="790px";const i=(0,a.createImageButton)("手此",0,"x-faikleone"===sessionStorage.lang?"":f.DICTIONARY.ja.pieceTakingExplanation);!function(e,t,o){(0,E.eraseGuide)(),(0,A.add_cover)("protective_cover_over_field"),s.GAME_STATE.backupDuringStepping=[e,t],(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[e[0]][e[1]]=null,(0,s.back_up_gamestate)(),console.log("drawField #",6.1),(0,h.drawField)({focus:null}),(0,E.drawPhantomAt)(e,t),(0,E.drawCancelButtonAndAddEscEvent)((()=>j({draw_the_field:!0}))),(0,E.drawHoverAt_)(o,t,(function(e,t){const o=document.getElementById("contains_guides"),n=(0,a.createPieceSizeSelectionButtonOnBoard_Shifted)(e);o.appendChild(n)}))}(t,e,o),i.addEventListener("click",(()=>{j({draw_the_field:!1}),k({type:"NonTamMove",data:{type:"SrcDst",src:(0,s.toAbsoluteCoord)(t),dest:(0,s.toAbsoluteCoord)(o)}})})),r.appendChild(i);const c=(0,a.createImageButton)("撃此",250,"x-faikleone"===sessionStorage.lang?"":f.DICTIONARY.ja.pieceSteppingExplanation);c.addEventListener("click",(()=>{j({draw_the_field:!1}),M(t,e,o)})),r.appendChild(c)}function j(e){document.getElementById("whether_to_take_or_step").classList.add("nocover"),document.getElementById("yaku_all").style.left="750px",(0,E.eraseGuide)(),(0,E.erasePhantomAndOptionallyCancelButtonWhileAlsoRemovingEscEvent)(),(0,A.remove_cover)("protective_cover_over_field");const t=s.GAME_STATE.backupDuringStepping,o=t[0],n=t[1];s.GAME_STATE.f.currentBoard[o[0]][o[1]]=n,(0,s.back_up_gamestate)(),s.GAME_STATE.backupDuringStepping=null,(0,s.back_up_gamestate)(),e.draw_the_field&&(0,h.drawField)({focus:s.GAME_STATE.last_move_focus})}function G(e){const[t,o]=e;return"Tam2"===s.GAME_STATE.f.currentBoard[t][o]}function R(e,t,o,n){if("Tam2"===o)return void O(e,n,t);const r={type:"NonTamMove",data:{type:"SrcStepDstFinite",step:(0,s.toAbsoluteCoord)(t),dest:(0,s.toAbsoluteCoord)(n),src:(0,s.toAbsoluteCoord)(e)}};G(t)?(async()=>{await(0,E.animateStepTamLogo)(),await(0,h.animatePunishStepTamAndCheckPerzej)(l.Side.Upward),await k(r)})():k(r)}async function $(e,t){const o=await(0,h.sendStuffTo)("decision/infafterstep","inf after step",e,(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if("Err"===o.type)throw alert(`Illegal API sent, the reason being ${o.why_illegal}`),new Error(`Illegal API sent, the reason being ${o.why_illegal}`);G((0,s.fromAbsoluteCoord)(e.step))&&(await(0,E.animateStepTamLogo)(),await(0,h.animatePunishStepTamAndCheckPerzej)(l.Side.Upward)),L(o.ciurl),document.getElementById("cancelButton").remove(),(0,E.eraseGuide)();const n=(0,s.fromAbsoluteCoord)(e.step),r=(0,s.fromAbsoluteCoord)(e.plannedDirection),i=(0,a.createPieceSizeImageOnBoardByPath_Shifted)(n,"selection2","selection");i.style.zIndex="200";const c=document.getElementById("contains_guides");c.appendChild(i);const u={color:t.color,prof:t.prof,side:l.Side.Upward},{infinite:_}=(0,d.calculateMovablePositions)(n,u,s.GAME_STATE.f.currentBoard,s.GAME_STATE.tam_itself_is_tam_hue),f=function(e,t,o,n){return e.filter((e=>{const r=function([e,o]){const[n,r]=t;return[e-n,o-r]},i=n.filter((e=>e)).length,[a,s]=r(e),[c,l]=r(o);return a*l-c*s==0&&a*c+s*l>0&&Math.max(Math.abs(a),Math.abs(s))<=i}))}(_,n,r,o.ciurl),p=(0,s.fromAbsoluteCoord)(e.src),m=(0,a.createGuideImageAt)(p,"yellow_circle");m.addEventListener("click",(function(t){(0,E.eraseGuide)(),I({type:"AfterHalfAcceptance",dest:null},{src:p,step:n,stepping_ciurl:o.ciurl,planned_destination:e.plannedDirection})})),m.style.zIndex="200",c.appendChild(m);for(let t=0;t<f.length;t++){const r=f[t];if((0,l.coordEq)(p,r))continue;if(!(0,d.canGetOccupiedByNonTam)(l.Side.Upward,r,s.GAME_STATE.f.currentBoard,s.GAME_STATE.tam_itself_is_tam_hue))continue;const i=(0,a.createGuideImageAt)(f[t],"green_circle");i.addEventListener("click",(function(t){I({type:"AfterHalfAcceptance",dest:(0,s.toAbsoluteCoord)(r)},{src:p,step:n,stepping_ciurl:o.ciurl,planned_destination:e.plannedDirection})})),i.style.zIndex="200",c.appendChild(i)}}function L(e,t){(0,E.drawCiurl)(e,t),v.KRUT_CRUOP&&new Audio("sound/ciurl4.ogg").play()}function x(e,t,o,n){const r=b;if(null==r)throw new Error("though stepping, null startpoint!!!!!");if("Hop1zuo1"===r[0])throw new Error("though stepping, hop1zuo1 startpoint!!!!!");for(let i=0;i<n.length;i++){if(!(0,d.canGetOccupiedBy)(l.Side.Upward,n[i],t.piece,s.GAME_STATE.f.currentBoard,s.GAME_STATE.tam_itself_is_tam_hue)){const[e,r]=n[i],c=s.GAME_STATE.f.currentBoard[e][r];if("Tam2"!==t.piece&&"Tam2"!==c&&null!==c&&c.side===l.Side.Downward){const e=(0,a.createGuideImageAt)(n[i],"守");e.style.zIndex="200",o.append(e)}continue}const c=(0,a.createGuideImageAt)(n[i],t.path);c.addEventListener("click","yellow_circle"===t.path?function(){(0,E.eraseGuide)(),R(r,e,t.piece,n[i])}:function(){(0,E.eraseGuide)(),$({type:"InfAfterStep",step:(0,s.toAbsoluteCoord)(e),plannedDirection:(0,s.toAbsoluteCoord)(n[i]),src:(0,s.toAbsoluteCoord)(r)},{color:t.piece.color,prof:t.piece.prof})}),c.style.zIndex="200",o.appendChild(c)}}window.addEventListener("keydown",(e=>{if(!e.defaultPrevented){switch(e.key){case"Esc":case"Escape":(0,E.WHAT_ESC_KEY_TRIGGERS)();break;default:return}e.preventDefault()}}),!0),t.drawCiurlWithAudio=L,t.animateProcessDeterminingWhoGoesFirst=async function(e){for(const[t,o]of e.process)(0,E.drawTwoCiurls)([t,o]),v.KRUT_CRUOP&&new Audio("sound/ciurl4.ogg").play(),await new Promise((e=>setTimeout(e,500*.8093)))},t.selectOwnPieceOnBoard=function(e,t){if((0,E.eraseGuide)(),null!=b&&"Hop1zuo1"!==b[0]&&(0,l.coordEq)(b,e))b=null;else{b=e;const o=document.getElementById("contains_guides"),n=(0,a.createPieceSizeImageOnBoardByPath)(e,"selection2","selection");n.style.cursor="pointer",n.addEventListener("click",(function(){(0,E.eraseGuide)(),b=null})),o.appendChild(n);const{finite:r,infinite:i}=(0,d.calculateMovablePositions)(e,t,s.GAME_STATE.f.currentBoard,s.GAME_STATE.tam_itself_is_tam_hue);!function(e,t,o,n){for(let r=0;r<n.length;r++){const i=(0,a.createGuideImageAt)(n[r],"yellow_circle");i.addEventListener("click",(async function(){(0,E.eraseGuide)(),await B(t,e,n[r],!0)})),i.addEventListener("contextmenu",(async function(o){(0,E.eraseGuide)(),o.preventDefault(),await B(t,e,n[r],!1)})),o.appendChild(i)}}(e,t,o,[...r,...i])}},t.selectOwnPieceOnHop1zuo1=function(e,t,o){if((0,E.eraseGuide)(),null==b||"Hop1zuo1"!==b[0]||b[1]!==e){b=["Hop1zuo1",e];const n=document.getElementById("contains_guides_on_upward"),r=140,i=1+(_.MAX_PIECE_SIZE-_.PIECE_SIZE)/2,c=r-_.PIECE_SIZE-i,l=(0,a.createPieceSizeImageOnBoardByPathAndXY)(c,(0,_.hop1_zuo1_left_position)({ind:e,list_length:o}),"selection2","selection");l.style.cursor="pointer",l.addEventListener("click",(function(){(0,E.eraseGuide)(),b=null})),n.appendChild(l);const u=document.getElementById("contains_guides");for(let e=0;e<9;e++)for(let o=0;o<9;o++){const n=[e,o];if(null!=s.GAME_STATE.f.currentBoard[e][o])continue;const r=(0,a.createGuideImageAt)(n,"yellow_circle");r.addEventListener("click",(function(){if((0,E.eraseGuide)(),null!=s.GAME_STATE.f.currentBoard[n[0]][n[1]])throw alert("Cannot parachute onto an occupied square"),new Error("Cannot parachute onto an occupied square");const e=(0,s.toAbsoluteCoord)(n);k({type:"NonTamMove",data:{type:"FromHand",color:t.color,prof:t.prof,dest:e}})})),u.appendChild(r)}}else b=null}},6548:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LORK_LIAR=t.LORK_LIAR_ENABLED=t.stopMusicLoop=t.KRUT_CRUOP=void 0;const a=o(9672),s=o(8513),c=i(o(4204)),l=o(1602);document.getElementById("coord_annotation").src=`image/IA_is_down=${s.GAME_STATE.IA_is_down}_x-faikleone=${"x-faikleone"===sessionStorage.lang}.svg`,console.log("drawField #",0),(0,a.drawField)({focus:null}),"x-faikleone"===sessionStorage.lang?(document.getElementById("kiar_ark").classList.add("always_linmarn_bitmap"),document.getElementById("opponent_message_linzklar").classList.add("always_geometric_linzklar")):(document.getElementById("kiar_ark").classList.add("use_linmarn_bitmap_unless_hovered"),document.getElementById("opponent_message_linzklar").classList.add("use_geometric_linzklar_unless_hovered")),sessionStorage.kiar_ark?(c.resurrect(JSON.parse(sessionStorage.kiar_ark)),c.display_kiar_ark()):c.push_header_elem_and_display({type:"header",dat:`{始時:${(new Date).toISOString()}}`});let u=!1;document.getElementById("coord_toggle_button").addEventListener("click",(()=>{u=!u,console.log("COORD_TOGGLE now set to",u),document.getElementById("coord_annotation").style.visibility=u?"visible":"hidden",document.getElementById("coord_toggle_button").src=u?"image/toggle/coord_toggle_active.png":"image/toggle/coord_toggle_inactive.png"})),t.KRUT_CRUOP=!0,document.getElementById("krut_cruop_button").addEventListener("click",(()=>{t.KRUT_CRUOP=!t.KRUT_CRUOP,console.log("KRUT_CRUOP now set to",t.KRUT_CRUOP),document.getElementById("krut_cruop_button").src=t.KRUT_CRUOP?"image/toggle/kut2_cuop2_active.png":"image/toggle/kut2_cuop2_inactive.png"}));const d=new Audio(Math.random()<.5?"sound/cetkaik_ad_loop.mp3":"sound/cetkaik_leti_duxe_.ogg");d.loop=!0,t.stopMusicLoop=function(){d.loop=!1};let _=!1;function f(){t.LORK_LIAR_ENABLED=!t.LORK_LIAR_ENABLED,!_&&t.LORK_LIAR_ENABLED&&(d.play(),_=!0),document.getElementById("lork_liar_button").src=t.LORK_LIAR_ENABLED?"image/toggle/lok1_lia1_active.png":"image/toggle/lok1_lia1_inactive.png",document.getElementById("volume_slidebar").disabled=!t.LORK_LIAR_ENABLED,d.volume=t.LORK_LIAR_ENABLED?t.LORK_LIAR/100:0}t.LORK_LIAR_ENABLED=!1,t.LORK_LIAR=Number(document.getElementById("volume_slidebar").value),d.volume=t.LORK_LIAR_ENABLED?t.LORK_LIAR/100:0,document.getElementById("lork_liar_button").addEventListener("click",f),document.getElementById("volume_slidebar").addEventListener("input",(()=>{t.LORK_LIAR=Number(document.getElementById("volume_slidebar").value),d.volume=t.LORK_LIAR_ENABLED?t.LORK_LIAR/100:0})),sessionStorage.getItem("game_state_backup")?(document.getElementById("kait_kaik_button").src="image/ty_zau.png",document.getElementById("kait_kaik_button").addEventListener("click",(async()=>{(0,l.apply_membrane_state_to_dom)(),s.GAME_STATE.is_my_turn=!!s.GAME_STATE.is_my_turn,document.getElementById("kait_kaik").classList.add("nocover"),t.LORK_LIAR_ENABLED||f()}))):document.getElementById("kait_kaik_button").addEventListener("click",(async()=>{document.getElementById("kait_kaik").classList.add("nocover");const e=JSON.parse(sessionStorage.is_first_move_my_move);t.LORK_LIAR_ENABLED||f(),await(0,a.animateSeasonInitiation)(e)})),"cpu"===sessionStorage.vs?document.getElementById("opponent_icon").innerHTML='<img src="image/nystiper2.png">':"someone"===sessionStorage.vs?document.getElementById("opponent_icon").innerHTML='<img src="image/larta2.png">':location.href="entrance.html"},1849:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.sendMainPollAndDoEverythingThatFollows=t.allowMainPolling=t.forbidMainPolling=void 0;const a=o(892),s=o(8513),c=o(4495),l=o(9672),u=o(9447),d=o(1935),_=o(9798),f=i(o(4204)),p=o(5050),m=o(6548),y=o(488),v=o(2327),E=o(8519),w=o(1602),{forbidMainPolling:g,isMainPollingAllowed:h,allowMainPolling:A}=(()=>{let e=!0;return{forbidMainPolling:()=>{e=!1},isMainPollingAllowed:()=>e,allowMainPolling:()=>{e=!0}}})();function T(){return s.GAME_STATE.f.hop1zuo1OfDownward.length<=8?{top:-135,left:1+s.GAME_STATE.f.hop1zuo1OfDownward.length*c.BOX_SIZE+(c.MAX_PIECE_SIZE-c.PIECE_SIZE)/2}:{top:-135,left:1+9*c.BOX_SIZE+(c.MAX_PIECE_SIZE-c.PIECE_SIZE)/2}}function b(e){const t=(()=>{if("Tam2"===e)throw new Error("tried to convert Tam2 into downward");if(e.side===a.Side.Downward)throw new Error("tried to convert an already downward piece to downward");if(e.side===a.Side.Upward)return{color:e.color,prof:e.prof,side:a.Side.Downward};throw e.side,new Error("should not reach here")})(),o=(0,l.calculateHandsAndScore)(s.GAME_STATE.f.hop1zuo1OfDownward);s.GAME_STATE.f.hop1zuo1OfDownward.push(t),(0,s.back_up_gamestate)();const n=(0,l.calculateHandsAndScore)(s.GAME_STATE.f.hop1zuo1OfDownward);n.score!==o.score&&((0,w.add_cover)("protective_cover_over_field_while_waiting_for_opponent"),(0,w.add_cover)("protective_cover_over_field_while_asyncawait"),window.setTimeout((async()=>{await S(n)}),0),window.setTimeout((()=>{(0,_.drawScoreDisplay)(n.hands)}),1e3*.8093))}async function S(e){const t=e.score;console.log("poll whether ty mok1 or ta xot1");const o=await(0,l.sendStuffTo)("poll/whethertymok","`polling for whether the declaration is ty mok1 or ta xot1`",{},(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if("Err"===o.type)throw alert(`sending TyMok1OrTaXot1Poll somehow resulted in an error: ${o.why_illegal}`),new Error(`sending TyMok1OrTaXot1Poll somehow resulted in an error: ${o.why_illegal}`);if("NotYetDetermined"!==o.type){console.log("ding!");const n=document.getElementById("score_display");for(await new Promise((e=>setTimeout(e,242.79)));!n.hasChildNodes();)await new Promise((e=>setTimeout(e,80.93)));if("TyMok"===o.type)n.innerHTML+='<img src="image/再行.png" style="position: absolute; left: 660px; top: 125px; " height="200">',await new Promise((e=>setTimeout(e,4046.5))),console.log("go on with ty mok1"),(0,l.increaseRateAndAnimate)(!1),f.push_body_elem_and_display({type:"tymoktaxot",dat:`或為${e.hands.join("加")}\n再行`});else{n.innerHTML+='<img src="image/終季.png" style="position: absolute; left: 660px; top: 125px; " height="200">',await new Promise((e=>setTimeout(e,4046.5))),console.log("go on with ta xot1");const r=["春","夏","秋","冬"][s.GAME_STATE.season];(0,l.endSeason)(-t,o.is_first_move_my_move),f.push_body_elem_and_display({type:"tymoktaxot",dat:`或為${e.hands.join("加")}而手${(0,p.toDigitsLinzklar)(t*Math.pow(2,s.GAME_STATE.log2_rate)).join("")}\n終季\t${r}終`})}}else(0,w.add_cover)("protective_cover_over_field_while_waiting_for_opponent"),await new Promise((e=>setTimeout(e,500*.8093))),await S(e)}async function P(e,t,o,n){const[r,i]=e,[d,_]=t,[f,p]=o,m=s.GAME_STATE.f.currentBoard[r][i];if(null===m)throw new Error("src is unoccupied");const y=s.GAME_STATE.f.currentBoard[d][_];if(null===y)throw new Error("step is unoccupied");"Tam2"===y&&(await(0,u.animateStepTamLogo)(),await(0,l.animatePunishStepTamAndCheckPerzej)(a.Side.Downward));const w=s.GAME_STATE.f.currentBoard[f][p];if(null===w||(0,a.coordEq)(e,o)){const d=document.getElementById(`field_piece_${r}_${i}`);return await(0,u.animateNode)(d,606.975,{to:(0,c.coordToPieceXY_Shifted)(t),from:(0,c.coordToPieceXY)(e)}),await new Promise((e=>setTimeout(e,242.79))),await(0,u.animateNode)(d,606.975,{to:(0,c.coordToPieceXY)(o),from:(0,c.coordToPieceXY)(e)}),n&&(await(0,u.animateWaterEntryLogo)(),(0,E.drawCiurlWithAudio)(n,a.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),n.filter((e=>e)).length<3)?(await(0,u.notifyWaterEntryFailure)(),console.log("drawField opponent #",18),s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[r,i]}),{piece_moved:m,maybe_capture:null}):((0,a.coordEq)(e,o)||(s.GAME_STATE.f.currentBoard[r][i]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[f][p]=m,(0,s.back_up_gamestate)()),console.log("drawField opponent #",19),s.GAME_STATE.last_move_focus=[f,p],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[f,p]}),{piece_moved:m,maybe_capture:(0,a.coordEq)(e,o)?null:(0,v.toColorProf)(w)})}{const d=document.getElementById(`field_piece_${r}_${i}`),_=document.getElementById(`field_piece_${f}_${p}`);return await(0,u.animateNode)(d,606.975,{to:(0,c.coordToPieceXY_Shifted)(t),from:(0,c.coordToPieceXY)(e)}),await new Promise((e=>setTimeout(e,242.79))),await(0,u.animateNode)(d,606.975,{to:(0,c.coordToPieceXY)(o),from:(0,c.coordToPieceXY)(e)}),await new Promise((e=>setTimeout(e,242.79))),await(0,u.animateNode)(_,606.975,{to:T(),from:(0,c.coordToPieceXY)([f,p])},"50",180),n&&(await(0,u.animateWaterEntryLogo)(),(0,E.drawCiurlWithAudio)(n,a.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),n.filter((e=>e)).length<3)?(await(0,u.notifyWaterEntryFailure)(),console.log("drawField opponent #",16),s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[r,i]}),{piece_moved:m,maybe_capture:null}):((0,a.coordEq)(e,o)||(b(w),s.GAME_STATE.f.currentBoard[r][i]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[f][p]=m,(0,s.back_up_gamestate)()),console.log("drawField opponent #",17),s.GAME_STATE.last_move_focus=[f,p],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[f,p]}),{piece_moved:m,maybe_capture:(0,a.coordEq)(e,o)?null:(0,v.toColorProf)(w)})}}async function O(e,t,o){const[n,r]=e,[i,d]=t,_=s.GAME_STATE.f.currentBoard[n][r];if(null===_)throw new Error("src is unoccupied");const f=s.GAME_STATE.f.currentBoard[i][d];if(null!==f){const e=document.getElementById(`field_piece_${n}_${r}`),t=document.getElementById(`field_piece_${i}_${d}`),p=606.975;if(await(0,u.animateNode)(e,p,{to:(0,c.coordToPieceXY)([i,d]),from:(0,c.coordToPieceXY)([n,r])}),await(0,u.animateNode)(t,p,{to:T(),from:(0,c.coordToPieceXY)([i,d])},"50",180),o.water_entry_ciurl&&(await(0,u.animateWaterEntryLogo)(),(0,E.drawCiurlWithAudio)(o.water_entry_ciurl,a.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),o.water_entry_ciurl.filter((e=>e)).length<3))return await(0,u.notifyWaterEntryFailure)(),console.log("drawField opponent #",20),s.GAME_STATE.last_move_focus=[n,r],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[n,r]}),{piece_moved:_,maybe_capture:null};b(f),s.GAME_STATE.f.currentBoard[n][r]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[i][d]=_,(0,s.back_up_gamestate)(),console.log("drawField opponent #",21),s.GAME_STATE.last_move_focus=[i,d],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[i,d]})}else{const e=document.getElementById(`field_piece_${n}_${r}`);if(await(0,u.animateNode)(e,1213.95,{to:(0,c.coordToPieceXY)([i,d]),from:(0,c.coordToPieceXY)([n,r])}),o.water_entry_ciurl&&(await(0,u.animateWaterEntryLogo)(),(0,E.drawCiurlWithAudio)(o.water_entry_ciurl,a.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),o.water_entry_ciurl.filter((e=>e)).length<3))return await(0,u.notifyWaterEntryFailure)(),console.log("drawField opponent #",22),s.GAME_STATE.last_move_focus=[n,r],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[n,r]}),{piece_moved:_,maybe_capture:null};s.GAME_STATE.f.currentBoard[n][r]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[i][d]=_,(0,s.back_up_gamestate)(),o.disable_focus?(0,l.drawField)({focus:null}):(console.log("drawField opponent #",23),s.GAME_STATE.last_move_focus=[i,d],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[i,d]}))}return{piece_moved:_,maybe_capture:(0,v.toColorProf)(f)}}t.forbidMainPolling=g,t.allowMainPolling=A,t.sendMainPollAndDoEverythingThatFollows=async function e(){if(console.log("poll"),!h())return;const t=await async function(){const e=await(0,l.sendStuffTo)("poll/main","`polling for the opponent's move`",{},(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if("Err"===e.type)throw alert(`sending MainPoll somehow resulted in an error: ${e.why_illegal}`),new Error(`sending MainPoll somehow resulted in an error: ${e.why_illegal}`);return e}();if("NotYetDetermined"===t.type)return await new Promise((e=>setTimeout(e,500*.8093))),void await e();console.log("ding!"),"x-faikleone"!==sessionStorage.lang&&(document.getElementById("opponent_message").textContent=null!=t.message?d.DICTIONARY.ja.tactics[t.message]:""),document.getElementById("opponent_message_linzklar").textContent=null!=t.message?d.TACTICS_LINZKLAR[t.message]:"",m.KRUT_CRUOP&&new Audio("sound/thud.ogg").play();const o=t.content;if(console.log(o),"NonTamMove"===o.type)if(s.GAME_STATE.opponent_has_just_moved_tam=!1,(0,s.back_up_gamestate)(),"SrcDst"===o.data.type){const e=await async function(e){const t=(0,s.fromAbsoluteCoord)(e.src),o=(0,s.fromAbsoluteCoord)(e.dest);return e.water_entry_ciurl?await O(t,o,{water_entry_ciurl:e.water_entry_ciurl}):await O(t,o,{})}(o.data),t=e.piece_moved;s.GAME_STATE.is_my_turn=!0,(0,s.back_up_gamestate)(),o.data.water_entry_ciurl?f.push_body_elem_and_display({type:"movement",dat:(0,y.normalMoveToKiarArk)(o,{piece_moved:t,water_ciurl_count:o.data.water_entry_ciurl.filter((e=>e)).length}),piece_capture_comment:(0,v.toPieceCaptureComment)(e.maybe_capture)}):f.push_body_elem_and_display({type:"movement",dat:(0,y.normalMoveToKiarArk)(o,{piece_moved:t}),piece_capture_comment:(0,v.toPieceCaptureComment)(e.maybe_capture)})}else if("FromHand"===o.data.type){const e={prof:o.data.prof,color:o.data.color,side:a.Side.Downward};await async function(e,t){const o=s.GAME_STATE.f.hop1zuo1OfDownward.findIndex((t=>t.color===e.color&&t.prof===e.prof));if(-1===o)throw new Error("What should exist in the hand does not exist");const[n]=s.GAME_STATE.f.hop1zuo1OfDownward.splice(o,1),[r,i]=t;if(null!==s.GAME_STATE.f.currentBoard[r][i])throw new Error("Trying to parachute the piece onto an occupied space");const a=document.getElementById(`hop1zuo1OfDownward_${o}`);await(0,u.animateNode)(a,1213.95,{to:(0,c.coordToPieceXY)([r,i]),from:{top:-135,left:(0,c.hop1_zuo1_left_position)({ind:o,list_length:s.GAME_STATE.f.hop1zuo1OfDownward.length})}}),s.GAME_STATE.f.currentBoard[r][i]=n,(0,s.back_up_gamestate)(),console.log("drawField opponent #",24),s.GAME_STATE.last_move_focus=[r,i],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[r,i]})}(e,(0,s.fromAbsoluteCoord)(o.data.dest)),s.GAME_STATE.is_my_turn=!0,(0,s.back_up_gamestate)(),f.push_body_elem_and_display({type:"movement",dat:(0,y.normalMoveToKiarArk)(o,{piece_moved:e})})}else{if("SrcStepDstFinite"!==o.data.type)throw o.data,new Error("does not happen");{const e=await async function(e){return await P((0,s.fromAbsoluteCoord)(e.src),(0,s.fromAbsoluteCoord)(e.step),(0,s.fromAbsoluteCoord)(e.dest),e.water_entry_ciurl)}(o.data),t=e.piece_moved;s.GAME_STATE.is_my_turn=!0,(0,s.back_up_gamestate)(),o.data.water_entry_ciurl?f.push_body_elem_and_display({type:"movement",dat:(0,y.normalMoveToKiarArk)(o,{piece_moved:t,water_ciurl_count:o.data.water_entry_ciurl.filter((e=>e)).length}),piece_capture_comment:(0,v.toPieceCaptureComment)(e.maybe_capture)}):f.push_body_elem_and_display({type:"movement",dat:(0,y.normalMoveToKiarArk)(o,{piece_moved:t}),piece_capture_comment:(0,v.toPieceCaptureComment)(e.maybe_capture)})}}else if("TamMove"===o.type)if(s.GAME_STATE.opponent_has_just_moved_tam=!0,(0,s.back_up_gamestate)(),"NoStep"===o.stepStyle)await async function(e,t,o){const n=s.GAME_STATE.f.currentBoard[e[0]][e[1]];if(null===n)throw new Error("src is unoccupied");const r=document.getElementById(`field_piece_${e[0]}_${e[1]}`);await(0,u.animateNode)(r,1213.95,{to:(0,c.coordToPieceXY)(t),from:(0,c.coordToPieceXY)(e)}),s.GAME_STATE.f.currentBoard[e[0]][e[1]]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[t[0]][t[1]]=n,(0,s.back_up_gamestate)(),console.log("drawField opponent #",25),(0,l.drawField)({focus:null});const i=document.getElementById(`field_piece_${t[0]}_${t[1]}`);await new Promise((e=>setTimeout(e,242.79))),await(0,u.animateNode)(i,1213.95,{to:(0,c.coordToPieceXY)(o),from:(0,c.coordToPieceXY)(t)}),s.GAME_STATE.f.currentBoard[t[0]][t[1]]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[o[0]][o[1]]=n,(0,s.back_up_gamestate)(),console.log("drawField opponent #",26),s.GAME_STATE.last_move_focus=[o[0],o[1]],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[o[0],o[1]]})}((0,s.fromAbsoluteCoord)(o.src),(0,s.fromAbsoluteCoord)(o.firstDest),(0,s.fromAbsoluteCoord)(o.secondDest)),s.GAME_STATE.is_my_turn=!0,(0,s.back_up_gamestate)(),f.push_body_elem_and_display({type:"movement",dat:(0,y.normalMoveToKiarArk)(o,{piece_moved:"Tam2"})});else if("StepsDuringFormer"===o.stepStyle)await async function(e){const t={src:(0,s.fromAbsoluteCoord)(e.src),firstDest:(0,s.fromAbsoluteCoord)(e.firstDest),secondDest:(0,s.fromAbsoluteCoord)(e.secondDest),step:(0,s.fromAbsoluteCoord)(e.step)};await P(t.src,t.step,t.firstDest),await new Promise((e=>setTimeout(e,242.79))),await O(t.firstDest,t.secondDest,{})}(o),s.GAME_STATE.is_my_turn=!0,f.push_body_elem_and_display({type:"movement",dat:(0,y.normalMoveToKiarArk)(o,{piece_moved:"Tam2"})});else{if("StepsDuringLatter"!==o.stepStyle)throw o.stepStyle,new Error("does not happen");await async function(e){const t={src:(0,s.fromAbsoluteCoord)(e.src),firstDest:(0,s.fromAbsoluteCoord)(e.firstDest),secondDest:(0,s.fromAbsoluteCoord)(e.secondDest),step:(0,s.fromAbsoluteCoord)(e.step)};await O(t.src,t.firstDest,{disable_focus:!0}),await new Promise((e=>setTimeout(e,242.79))),await P(t.firstDest,t.step,t.secondDest)}(o),s.GAME_STATE.is_my_turn=!0,(0,s.back_up_gamestate)(),f.push_body_elem_and_display({type:"movement",dat:(0,y.normalMoveToKiarArk)(o,{piece_moved:"Tam2"})})}else{if("InfAfterStep"!==o.type)throw new Error("does not happen");{s.GAME_STATE.opponent_has_just_moved_tam=!1,(0,s.back_up_gamestate)();const e=(async()=>{if(null!=o.finalResult)return o.finalResult;for(;;){const e=await(0,l.sendStuffTo)("poll/inf","`polling for the opponent's afterhalfacceptance`",{},(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if("Err"===e.type)throw new Error("not good!!!");if("NotYetDetermined"!==e.type){if("InfAfterStep"!==e.content.type)throw new Error("nooooooo");return e.content.finalResult}}})(),[t,n]=await async function(e){const[t,o]=e.src,[n,r]=e.step,i=s.GAME_STATE.f.currentBoard[t][o];if(null===i)throw new Error("src is unoccupied");const d=s.GAME_STATE.f.currentBoard[n][r];if(null===d)throw new Error("step is unoccupied");"Tam2"===d&&(await(0,u.animateStepTamLogo)(),await(0,l.animatePunishStepTamAndCheckPerzej)(a.Side.Downward));const _=document.getElementById(`field_piece_${t}_${o}`);await(0,u.animateNode)(_,606.975,{to:(0,c.coordToPieceXY_Shifted)(e.step),from:(0,c.coordToPieceXY)(e.src)}),await new Promise((e=>setTimeout(e,242.79))),await async function(e,t,o){(0,u.drawArrow)(e,t),await new Promise((e=>setTimeout(e,2e3*.8093))),(0,E.drawCiurlWithAudio)(o,a.Side.Downward),await new Promise((e=>setTimeout(e,485.58))),(0,u.eraseArrow)()}(e.step,e.plannedDirection,e.stepping_ciurl);const f=await e.finalResult,p=(0,s.fromAbsoluteCoord)(f.dest),m=e.plannedDirection,[y,w]=p,g=s.GAME_STATE.f.currentBoard[y][w];if(null===g||(0,a.coordEq)(e.src,p)){if(f.water_entry_ciurl){if(await(0,u.animateNode)(_,606.975,{to:(0,c.coordToPieceXY)(m),from:(0,c.coordToPieceXY)(e.src)}),await(0,u.animateWaterEntryLogo)(),(0,E.drawCiurlWithAudio)(f.water_entry_ciurl,a.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),f.water_entry_ciurl.filter((e=>e)).length<3)return await(0,u.notifyWaterEntryFailure)(),(0,a.coordEq)(p,m)||await(0,u.animateNode)(_,606.975,{to:(0,c.coordToPieceXY)(p),from:(0,c.coordToPieceXY)(e.src)}),console.log("drawField opponent #",14),s.GAME_STATE.last_move_focus=[t,o],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[t,o]}),[f,{piece_moved:i,maybe_capture:null}]}else if(f.thwarted_by_failing_water_entry_ciurl)return await(0,u.animateNode)(_,606.975,{to:(0,c.coordToPieceXY)(m),from:(0,c.coordToPieceXY)(e.src)}),await(0,u.animateWaterEntryLogo)(),(0,E.drawCiurlWithAudio)(f.thwarted_by_failing_water_entry_ciurl,a.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),await(0,u.notifyWaterEntryFailure)(),(0,a.coordEq)(p,m)||await(0,u.animateNode)(_,606.975,{to:(0,c.coordToPieceXY)(p),from:(0,c.coordToPieceXY)(e.src)}),console.log("drawField opponent #",14.5),s.GAME_STATE.last_move_focus=[t,o],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[t,o]}),[f,{piece_moved:i,maybe_capture:null}];return(0,a.coordEq)(e.src,p)||(s.GAME_STATE.f.currentBoard[t][o]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[y][w]=i,(0,s.back_up_gamestate)()),console.log("drawField opponent #",15),s.GAME_STATE.last_move_focus=[y,w],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[y,w]}),[f,{piece_moved:i,maybe_capture:null}]}if(f.water_entry_ciurl){const n=document.getElementById(`field_piece_${y}_${w}`);if(await(0,u.animateNode)(_,606.975,{to:(0,c.coordToPieceXY)(m),from:(0,c.coordToPieceXY)(e.src)}),await new Promise((e=>setTimeout(e,242.79))),await(0,u.animateNode)(n,606.975,{to:T(),from:(0,c.coordToPieceXY)([y,w])},"50",180),await(0,u.animateWaterEntryLogo)(),(0,E.drawCiurlWithAudio)(f.water_entry_ciurl,a.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),f.water_entry_ciurl.filter((e=>e)).length<3)return await(0,u.notifyWaterEntryFailure)(),(0,a.coordEq)(p,m)||await(0,u.animateNode)(_,606.975,{to:(0,c.coordToPieceXY)(p),from:(0,c.coordToPieceXY)(e.src)}),console.log("drawField opponent #",12),s.GAME_STATE.last_move_focus=[t,o],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[t,o]}),[f,{piece_moved:i,maybe_capture:null}]}else{const t=document.getElementById(`field_piece_${y}_${w}`);await(0,u.animateNode)(_,606.975,{to:(0,c.coordToPieceXY)(p),from:(0,c.coordToPieceXY)(e.src)}),await new Promise((e=>setTimeout(e,242.79))),await(0,u.animateNode)(t,606.975,{to:T(),from:(0,c.coordToPieceXY)([y,w])},"50",180)}return(0,a.coordEq)(e.src,p)||(b(g),s.GAME_STATE.f.currentBoard[t][o]=null,(0,s.back_up_gamestate)(),s.GAME_STATE.f.currentBoard[y][w]=i,(0,s.back_up_gamestate)()),console.log("drawField opponent #",13),s.GAME_STATE.last_move_focus=[y,w],(0,s.back_up_gamestate)(),(0,l.drawField)({focus:[y,w]}),[f,{piece_moved:i,maybe_capture:(0,v.toColorProf)(g)}]}({src:(0,s.fromAbsoluteCoord)(o.src),step:(0,s.fromAbsoluteCoord)(o.step),plannedDirection:(0,s.fromAbsoluteCoord)(o.plannedDirection),stepping_ciurl:o.stepping_ciurl,finalResult:e}),r=(()=>{if("Tam2"===n.piece_moved)throw new Error("Tam2 was passed to `piece_moved`");return(0,y.serializeProf)(n.piece_moved.prof)})();if(s.GAME_STATE.is_my_turn=!0,(0,s.back_up_gamestate)(),t.water_entry_ciurl)t.water_entry_ciurl.filter((e=>e)).length<3?f.push_body_elem_and_display({type:"movement",dat:`${(0,y.serializeAbsoluteCoord)(o.src)}${r}${(0,y.serializeAbsoluteCoord)(o.step)}${(0,y.serializeAbsoluteCoord)(t.dest)}橋${(0,y.serializeCiurl)(o.stepping_ciurl)}水${(0,y.serializeCiurl)(t.water_entry_ciurl)}此無`}):f.push_body_elem_and_display({type:"movement",dat:`${(0,y.serializeAbsoluteCoord)(o.src)}${r}${(0,y.serializeAbsoluteCoord)(o.step)}${(0,y.serializeAbsoluteCoord)(t.dest)}橋${(0,y.serializeCiurl)(o.stepping_ciurl)}水${(0,y.serializeCiurl)(t.water_entry_ciurl)}`,piece_capture_comment:(0,v.toPieceCaptureComment)(n.maybe_capture)});else if(t.thwarted_by_failing_water_entry_ciurl)f.push_body_elem_and_display({type:"movement",dat:`${(0,y.serializeAbsoluteCoord)(o.src)}${r}${(0,y.serializeAbsoluteCoord)(o.step)}${(0,y.serializeAbsoluteCoord)(t.dest)}橋${(0,y.serializeCiurl)(o.stepping_ciurl)}水${(0,y.serializeCiurl)(t.thwarted_by_failing_water_entry_ciurl)}此無`,piece_capture_comment:(0,v.toPieceCaptureComment)(n.maybe_capture)});else{const e=(e,t)=>e[0]===t[0]&&e[1]===t[1];e(o.plannedDirection,t.dest)||!e(t.dest,o.src)?f.push_body_elem_and_display({type:"movement",dat:`${(0,y.serializeAbsoluteCoord)(o.src)}${r}${(0,y.serializeAbsoluteCoord)(o.step)}${(0,y.serializeAbsoluteCoord)(t.dest)}橋${(0,y.serializeCiurl)(o.stepping_ciurl)}`,piece_capture_comment:(0,v.toPieceCaptureComment)(n.maybe_capture)}):f.push_body_elem_and_display({type:"movement",dat:`${(0,y.serializeAbsoluteCoord)(o.src)}${r}${(0,y.serializeAbsoluteCoord)(o.step)}${(0,y.serializeAbsoluteCoord)(o.plannedDirection)}橋${(0,y.serializeCiurl)(o.stepping_ciurl)}此無`,piece_capture_comment:(0,v.toPieceCaptureComment)(n.maybe_capture)})}}}}},5314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPieceFont=t.getPieceFont=void 0;let o="官字";function n(e){console.log("changing the piece font",o,"into",e),document.getElementById("denote_season").src=`image/piece_img/${e}/upright/rtam.png`;for(const t of["contains_pieces_on_upward","contains_pieces_on_downward","contains_pieces_on_board","contains_phantom"]){const n=document.getElementById(t);for(const t of n.childNodes)t instanceof HTMLImageElement&&(t.src=decodeURI(t.src).replace(o,e))}o=e}t.getPieceFont=function(){return o},t.setPieceFont=n;const r=["官字","略字","やる気なし"];for(const e of r)document.getElementById(`radio_${e}`).addEventListener("click",(()=>n(e)))},8460:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPath_=t.toPath=void 0;const n=o(4974),r=o(892),i=o(5314);function a(e){return`piece_img/${(0,i.getPieceFont)()}/${a=e.side,a===r.Side.Downward?"reversed":a===r.Side.Upward?"upright":a}/${o=e.color,o===n.Color.Huok2?"b":o===n.Color.Kok1?"r":o}${t=e.prof,t===n.Profession.Dau2?"dau":t===n.Profession.Gua2?"gua":t===n.Profession.Io?"io":t===n.Profession.Kauk2?"kauk":t===n.Profession.Kaun1?"kaun":t===n.Profession.Kua2?"kua":t===n.Profession.Maun1?"maun":t===n.Profession.Nuak1?"nuak":t===n.Profession.Tuk2?"tuk":t===n.Profession.Uai1?"uai":t}`;var t,o,a}t.toPath=a,t.toPath_=function(e){return"Tam2"===e?`piece_img/${(0,i.getPieceFont)()}/upright/btam`:a(e)}},1602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remove_cover=t.add_cover=t.apply_membrane_state_to_dom=void 0;const o=sessionStorage.getItem("membrane_state_backup")?JSON.parse(sessionStorage.membrane_state_backup):{protective_cover_over_field:!1,protective_tam_cover_over_field:!1,protective_cover_over_field_while_asyncawait:!1,protective_cover_over_field_while_waiting_for_opponent:!0};t.apply_membrane_state_to_dom=function(){function e(e){var t,n;o[e]?null===(t=document.getElementById(e))||void 0===t||t.classList.remove("nocover"):null===(n=document.getElementById(e))||void 0===n||n.classList.add("nocover")}e("protective_cover_over_field"),e("protective_tam_cover_over_field"),e("protective_cover_over_field_while_asyncawait"),e("protective_cover_over_field_while_waiting_for_opponent")},t.add_cover=function(e){var t;null===(t=document.getElementById(e))||void 0===t||t.classList.remove("nocover"),o[e]=!0,sessionStorage.membrane_state_backup=JSON.stringify(o)},t.remove_cover=function(e){var t;null===(t=document.getElementById(e))||void 0===t||t.classList.add("nocover"),o[e]=!1,sessionStorage.membrane_state_backup=JSON.stringify(o)}},9798:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawScoreDisplay=t.drawFinalScoreDisplay=void 0;const n=o(8431),r=o(4728),i=o(7421),a=o(5050);function s(e,t){return e.map(((e,o)=>{const n=document.createElement("img");return n.src=`image/digit/${e}.png`,n.style.position="absolute",n.style.left=`${t.left}px`,n.style.top=`${.94*t.width*o+t.top}px`,n.width=t.width,n}))}function c(e){const t=(0,a.toDigitsLinzklar)(e);return s(t,{left:20,top:234-70*t.length/2,width:70})}t.drawFinalScoreDisplay=function(e){const t=e=>s((0,a.toDigitsLinzklar)(e.score),{left:530-60*e.column_index,top:23.5*(2-(0,a.toDigitsLinzklar)(e.score).length)+239,width:50}),o=[].concat(...e),n=20+o.reduce(((e,t)=>e+t),0),r=document.getElementById("final_score_display");r.classList.remove("nocover"),(0,i.removeAllChildren)(r),r.append(...Array.from({length:e.length},((t,o)=>function(e){const t=document.createElement("img");return t.src=`image/season/${["春","夏","秋","冬"][e.season]}.png`,t.style.position="absolute",t.style.left=`${e.left}px`,t.style.top="15px",t.width=50,t}({left:530-60*[].concat(...e.slice(0,o)).length,season:o})))),r.append(...o.flatMap(((e,o)=>t({score:e,column_index:o})))),r.append(...t({score:20,column_index:-1})),r.append(function(e){const t=document.createElement("img");return t.src="image/始.png",t.style.position="absolute",t.style.left="590px",t.style.top="15px",t.width=50,t}()),r.append(...c(n)),document.getElementById("to_entrance").classList.remove("nocover")},t.drawScoreDisplay=function(e){const t=e.sort(((e,t)=>{const o=["同色無抗行処","無抗行処","同色筆兵無傾","筆兵無傾","同色地心","地心","同色馬弓兵","馬弓兵","同色行行","行行","王","同色獣","獣","同色戦集","戦集","同色助友","助友","同色闇戦之集","闇戦之集","撃皇","皇再来"];return o.indexOf(e)-o.indexOf(t)}));if(t.length>11)throw new Error("too many hands");const[o,l]=[[550,60],[550,60],[550,60],[550,60],[550,60],[550,60],[550,60],[550,60],[550,60],[575,57],[585,53],[595,49]][t.length],u=document.getElementById("score_display");u.classList.remove("nocover"),(0,i.removeAllChildren)(u),document.getElementById("yaku_all").style.left="790px";const d=t.map((e=>n.hand_to_score[e])).reduce(((e,t)=>e+t),0);u.append(...t.flatMap(((e,t)=>{const i=o-l*t,c=s((0,a.toDigitsLinzklar)(n.hand_to_score[e]),{left:i,top:295,width:50});return"同色"===e.slice(0,2)?(c.push((0,r.createHandImage)(e.slice(2),{left:i,top_padding:15})),c.push((0,r.createBapPokImage)({left:i,top_padding:15}))):c.push((0,r.createHandImage)(e,{left:i,top_padding:15})),c}))),u.append(...c(d))}},488:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalMoveToKiarArk=t.serializeProf=t.serializeColor=t.serializeCiurl=t.serializeCiurlCount=t.serializeAbsoluteCoord=void 0;const n=o(4974);function r(e){return`${e[1]}${e[0]}`}function i(e){return["無","一","二","三","四","五"][e]}function a(e){return e===n.Color.Huok2?"黒":"赤"}function s(e){return["船","兵","弓","車","虎","馬","筆","巫","将","王"][e]}t.serializeAbsoluteCoord=r,t.serializeCiurlCount=i,t.serializeCiurl=function(e){return i(e.filter((e=>e)).length)},t.serializeColor=a,t.serializeProf=s,t.normalMoveToKiarArk=function(e,t){if("NonTamMove"===e.type){const o=(()=>{if("Tam2"===t.piece_moved)throw new Error("Tam2 was passed to `o.piece_moved` inside `normalMoveToKiarArk` even though `message.type` is `NonTamMove`");return s(t.piece_moved.prof)})();if("FromHand"===e.data.type)return`${a(e.data.color)}${s(e.data.prof)}${r(e.data.dest)}`;if("SrcDst"===e.data.type)return void 0===(null==t?void 0:t.water_ciurl_count)?`${r(e.data.src)}${o}${r(e.data.dest)}無撃裁`:(null==t?void 0:t.water_ciurl_count)<3?`${r(e.data.src)}${o}${r(e.data.dest)}水${i(null==t?void 0:t.water_ciurl_count)}此無`:`${r(e.data.src)}${o}${r(e.data.dest)}水${i(null==t?void 0:t.water_ciurl_count)}`;if("SrcStepDstFinite"===e.data.type)return void 0===(null==t?void 0:t.water_ciurl_count)?`${r(e.data.src)}${o}${r(e.data.step)}${r(e.data.dest)}無撃裁`:(null==t?void 0:t.water_ciurl_count)<3?`${r(e.data.src)}${o}${r(e.data.step)}${r(e.data.dest)}水${i(null==t?void 0:t.water_ciurl_count)}此無`:`${r(e.data.src)}${o}${r(e.data.step)}${r(e.data.dest)}水${i(null==t?void 0:t.water_ciurl_count)}`;throw e.data,new Error("should not reach here")}if("TamMove"===e.type){if("NoStep"===e.stepStyle)return`${r(e.src)}皇[${r(e.firstDest)}]${r(e.secondDest)}`;if("StepsDuringFormer"===e.stepStyle)return`${r(e.src)}皇${r(e.step)}[${r(e.firstDest)}]${r(e.secondDest)}`;if("StepsDuringLatter"===e.stepStyle)return`${r(e.src)}皇[${r(e.firstDest)}]${r(e.step)}${r(e.secondDest)}`;throw e.stepStyle,new Error("should not reach here")}throw new Error("should not reach here")}},5050:(e,t)=>{"use strict";function o(e){if(e%1!=0)throw new Error("non-integer");if(e>=200){const t=e%100==0?[]:n(e%100);return[...n(Math.floor(e/100)),"num100",...t]}if(e>=100)return["num100",...e%100==0?[]:o(e%100)];if(e<0)return["neg",...o(-e)];if(0==e)return["num00"];const t=e%10==0?[]:["num0"+e%10];return e>=20?[`num0${Math.floor(e/10)}`,"num10",...t]:e>=10?["num10",...t]:t}function n(e){if(e%1!=0)throw new Error("non-integer");if(e>=100)throw new Error("100 or more detected in toDigitsSub");if(e<=0)throw new Error("0 or less detected in toDigitsSub");if(e%10==0){if(e>=20)return[`num0${Math.floor(e/10)}`,"num10"];if(10==e)return["num10"];throw new Error("cannot happen")}{const t="num0"+e%10;return e>=20?[`num0${Math.floor(e/10)}`,t]:e>=10?["num10",t]:[t]}}Object.defineProperty(t,"__esModule",{value:!0}),t.toDigitsLinzklar=void 0,t.toDigitsLinzklar=function(e){return o(e).map((function(e){return{neg:"下",num00:"無",num01:"一",num02:"二",num03:"三",num04:"四",num05:"五",num06:"六",num07:"七",num08:"八",num09:"九",num10:"十",num100:"百"}[e]}))}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o(6548),o(2787)})();