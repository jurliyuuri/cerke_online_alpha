(()=>{"use strict";var e={122:function(e,o){var t=this&&this.__read||function(e,o){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,r,a=t.call(e),i=[];try{for(;(void 0===o||o-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(t=a.return)&&t.call(a)}finally{if(r)throw r.error}}return i},n=this&&this.__spread||function(){for(var e=[],o=0;o<arguments.length;o++)e=e.concat(t(arguments[o]));return e};function r(e){return 0===e["王"]["黒"]&&0===e["王"]["赤"]?function(e){function o(o){return e[o]["赤"]+e[o]["黒"]>0}function t(o){return e[o]["赤"]+e[o]["黒"]}var n=new Set;e["兵"]["赤"]>=5||e["兵"]["黒"]>=5?n.add("同色闇戦之集"):t("兵")>=5&&n.add("闇戦之集"),e["車"]["赤"]>=1&&e["兵"]["赤"]>=2||e["車"]["黒"]>=1&&e["兵"]["黒"]>=2?n.add("同色助友"):o("車")&&t("兵")>=2&&n.add("助友"),e["将"]["赤"]>=1&&e["兵"]["赤"]>=2||e["将"]["黒"]>=1&&e["兵"]["黒"]>=2?n.add("同色戦集"):o("将")&&t("兵")>=2&&n.add("戦集");var r=function(t,r,a){var i;(i=t).every((function(o){return e[o]["赤"]>=1}))||i.every((function(o){return e[o]["黒"]>=1}))?n.add(r):function(e){return e.every(o)}(t)&&n.add(a)};return r(["虎","馬"],"同色獣","獣"),r(["船","車","馬"],"同色行行","行行"),r(["兵","弓","馬"],"同色馬弓兵","馬弓兵"),r(["筆","巫","将"],"同色地心","地心"),r(["兵","弓","将","筆","巫"],"同色筆兵無傾","筆兵無傾"),n}(e):function(e){function o(o){return e[o]["赤"]+e[o]["黒"]>0}var t=new Set(["王"]);t.add("王");var a,i=["兵","弓","車","虎","馬","筆","巫","将","船"];(a=n(i,["王"])).every((function(o){return e[o]["赤"]>=1}))||a.every((function(o){return e[o]["黒"]>=1}))?t.add("同色無抗行処"):function(e){return e.every(o)}(n(i,["王"]))&&t.add("無抗行処");var l=function(o){if(1===e["王"][o]){e["王"][o]--;for(var a=0;a<i.length;a++)e[i[a]][o]++,t=new Set(n(t,r(e))),e[i[a]][o]--;e["王"][o]++}};l("赤"),l("黒");var s=function(e,o){t.has(e)&&t.delete(o)};return s("同色助友","助友"),s("同色地心","地心"),s("同色戦集","戦集"),s("同色馬弓兵","馬弓兵"),s("同色獣","獣"),s("同色行行","行行"),s("同色筆兵無傾","筆兵無傾"),s("同色闇戦之集","闇戦之集"),s("同色無抗行処","無抗行処"),t}(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.generate_example=o.calculate_hands_and_score_from_pieces=o.hand_to_score=o.toObtainablePieces2=void 0,o.toObtainablePieces2={黒兵:{color:"黒",prof:"兵"},赤兵:{color:"赤",prof:"兵"},黒弓:{color:"黒",prof:"弓"},黒車:{color:"黒",prof:"車"},黒虎:{color:"黒",prof:"虎"},黒馬:{color:"黒",prof:"馬"},黒筆:{color:"黒",prof:"筆"},黒巫:{color:"黒",prof:"巫"},黒将:{color:"黒",prof:"将"},赤弓:{color:"赤",prof:"弓"},赤車:{color:"赤",prof:"車"},赤虎:{color:"赤",prof:"虎"},赤馬:{color:"赤",prof:"馬"},赤筆:{color:"赤",prof:"筆"},赤巫:{color:"赤",prof:"巫"},赤将:{color:"赤",prof:"将"},黒王:{color:"黒",prof:"王"},赤王:{color:"赤",prof:"王"},黒船:{color:"黒",prof:"船"},赤船:{color:"赤",prof:"船"}},o.hand_to_score={無抗行処:50,同色無抗行処:52,筆兵無傾:10,同色筆兵無傾:12,地心:7,同色地心:9,馬弓兵:5,同色馬弓兵:7,行行:5,同色行行:7,王:5,獣:3,同色獣:5,戦集:3,同色戦集:5,助友:3,同色助友:5,闇戦之集:3,同色闇戦之集:5,皇再来:-3,撃皇:-5},o.calculate_hands_and_score_from_pieces=function(e){var t=function(e){for(var t=e.map((function(e){return o.toObtainablePieces2[e]})),a={兵:{黒:0,赤:0},弓:{黒:0,赤:0},車:{黒:0,赤:0},虎:{黒:0,赤:0},馬:{黒:0,赤:0},筆:{黒:0,赤:0},巫:{黒:0,赤:0},将:{黒:0,赤:0},王:{黒:0,赤:0},船:{黒:0,赤:0}},i=0;i<t.length;i++)a[t[i].prof][t[i].color]++;var l=[];return a["兵"]["黒"]>8&&l.push("黒兵"),a["兵"]["赤"]>8&&l.push("赤兵"),a["弓"]["黒"]>2&&l.push("黒弓"),a["弓"]["赤"]>2&&l.push("赤弓"),a["車"]["黒"]>2&&l.push("黒車"),a["車"]["赤"]>2&&l.push("赤車"),a["虎"]["黒"]>2&&l.push("黒虎"),a["虎"]["赤"]>2&&l.push("赤虎"),a["馬"]["黒"]>2&&l.push("黒馬"),a["馬"]["赤"]>2&&l.push("赤馬"),a["筆"]["黒"]>2&&l.push("黒筆"),a["筆"]["赤"]>2&&l.push("赤筆"),a["巫"]["黒"]>2&&l.push("黒巫"),a["巫"]["赤"]>2&&l.push("赤巫"),a["将"]["黒"]>2&&l.push("黒将"),a["将"]["赤"]>2&&l.push("赤将"),a["王"]["黒"]>1&&l.push("黒王"),a["王"]["赤"]>1&&l.push("赤王"),a["船"]["黒"]>1&&l.push("黒船"),a["船"]["赤"]>1&&l.push("赤船"),l.length>0?{too_many:l}:n(r(a))}(e);return Array.isArray(t)?{error:!1,score:t.map((function(e){return o.hand_to_score[e]})).reduce((function(e,o){return e+o}),0),hands:t}:{error:!0,too_many:t.too_many}},o.generate_example=function(e){for(var o,n=["黒兵","黒兵","黒兵","黒兵","黒兵","黒兵","黒兵","黒兵","赤兵","赤兵","赤兵","赤兵","赤兵","赤兵","赤兵","赤兵","黒弓","黒車","黒虎","黒馬","黒筆","黒巫","黒将","黒弓","黒車","黒虎","黒馬","黒筆","黒巫","黒将","赤弓","赤車","赤虎","赤馬","赤筆","赤巫","赤将","赤弓","赤車","赤虎","赤馬","赤筆","赤巫","赤将","黒王","赤王","黒船","赤船"],r=n.length-1;r>0;r--){var a=Math.floor(Math.random()*(r+1));o=t([n[a],n[r]],2),n[r]=o[0],n[a]=o[1]}return n.slice(0,e)}},431:function(e,o,t){var n=this&&this.__createBinding||(Object.create?function(e,o,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[t]}})}:function(e,o,t,n){void 0===n&&(n=t),e[n]=o[t]}),r=this&&this.__exportStar||function(e,o){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(o,t)||n(o,e,t)};Object.defineProperty(o,"__esModule",{value:!0}),r(t(122),o)},974:function(e,o,t){var n=this&&this.__createBinding||(Object.create?function(e,o,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[t]}})}:function(e,o,t,n){void 0===n&&(n=t),e[n]=o[t]}),r=this&&this.__exportStar||function(e,o){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(o,t)||n(o,e,t)};Object.defineProperty(o,"__esModule",{value:!0}),r(t(101),o),r(t(453),o),r(t(588),o)},588:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0})},453:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0})},101:(e,o)=>{var t,n;Object.defineProperty(o,"__esModule",{value:!0}),o.Profession=o.Color=void 0,(n=o.Color||(o.Color={}))[n.Kok1=0]="Kok1",n[n.Huok2=1]="Huok2",(t=o.Profession||(o.Profession={}))[t.Nuak1=0]="Nuak1",t[t.Kauk2=1]="Kauk2",t[t.Gua2=2]="Gua2",t[t.Kaun1=3]="Kaun1",t[t.Dau2=4]="Dau2",t[t.Maun1=5]="Maun1",t[t.Kua2=6]="Kua2",t[t.Tuk2=7]="Tuk2",t[t.Uai1=8]="Uai1",t[t.Io=9]="Io"},945:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0});const n=t(233),r=t(974);function a(e,o){const[t,n]=e;return o.map((([e,o])=>[t+e,n+o])).filter((([e,o])=>0<=e&&e<=8&&0<=o&&o<=8)).map((([e,o])=>[e,o]))}function i(e){const[o,t]=e,n=[];for(let e=-8;e<=8;e++)for(let r=-8;r<=8;r++)o*r-t*e==0&&(o*e+t*r<=0||e*e+r*r>=o*o+t*t||(n[n.length]=[e,r]));return n}function l(e,o,t){return[].concat(...o.map((o=>s(e,o,t))))}function s(e,o,t){return a(e,i(o)).every((([e,o])=>null==t[e][o]))?a(e,[o]):[]}function d(e,o,t){return[].concat(...o.map((o=>function(e,o,t){return a(e,i(o)).filter((([e,o])=>null!=t[e][o])).length<=1?a(e,[o]):[]}(e,o,t))))}function c(e){return a(e,[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]])}function u(e,o,t){return!!(n.coordEq(e,[2,2])||n.coordEq(e,[2,6])||n.coordEq(e,[3,3])||n.coordEq(e,[3,5])||n.coordEq(e,[4,4])||n.coordEq(e,[5,3])||n.coordEq(e,[5,5])||n.coordEq(e,[6,2])||n.coordEq(e,[6,6]))||!(!t||"Tam2"!==o[e[0]][e[1]])||c(e).some((([e,t])=>"Tam2"===o[e][t]))}function _(e,o,t,n){const[a,i]=o,l=t[a][i];return"Tam2"!==l&&(null===l||l.side!==e&&!((e,o)=>c(o).filter((([o,a])=>{const i=t[o][a];return null!=i&&"Tam2"!==i&&i.prof===r.Profession.Uai1&&i.side!==e&&u([o,a],t,n)})).length>0)(e,o))}console.assert("[[-4,2],[-2,1]]"===JSON.stringify(i([-6,3]))),console.assert("[[-2,0],[-1,0]]"===JSON.stringify(i([-3,0]))),console.assert("[[0,1],[0,2]]"===JSON.stringify(i([0,3]))),o.eightNeighborhood=c,o.isTamHue=u,o.canGetOccupiedBy=function(e,o,t,n,r){if("Tam2"===t){const[e,t]=o;return null===n[e][t]}return _(e,o,n,r)},o.canGetOccupiedByNonTam=_,o.calculateMovablePositions=function(e,o,t,n){if("Tam2"===o)return{finite:c(e),infinite:[]};if(o.prof===r.Profession.Io)return{finite:c(e),infinite:[]};const _=[[-8,-8],[-7,-7],[-6,-6],[-5,-5],[-4,-4],[-3,-3],[-2,-2],[-1,-1]],f=[[-8,8],[-7,7],[-6,6],[-5,5],[-4,4],[-3,3],[-2,2],[-1,1]],p=[[8,-8],[7,-7],[6,-6],[5,-5],[4,-4],[3,-3],[2,-2],[1,-1]],m=[[8,8],[7,7],[6,6],[5,5],[4,4],[3,3],[2,2],[1,1]],w=[[-1,0],[-2,0],[-3,0],[-4,0],[-5,0],[-6,0],[-7,0],[-8,0]],E=[[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0]],A=[[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6],[0,-7],[0,-8]],y=[[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8]];if(u(e,t,n))switch(o.prof){case r.Profession.Uai1:return{finite:c(e),infinite:[]};case r.Profession.Kaun1:return{finite:a(e,[[-2,-2],[-2,2],[2,2],[2,-2]]),infinite:[]};case r.Profession.Kauk2:return{finite:[...a(e,[[-1,0],[0,-1],[0,1],[1,0]]),...s(e,[-2,0],t)],infinite:[]};case r.Profession.Nuak1:return{finite:[...a(e,[[0,-1],[0,1]]),...l(e,[[0,-2],[0,2]],t)],infinite:l(e,[...w,...E],t)};case r.Profession.Gua2:case r.Profession.Dau2:return{finite:[],infinite:l(e,[..._,...f,...p,...m],t)};case r.Profession.Maun1:{const o=[[-8,-8],[-7,-7],[-6,-6],[-5,-5],[-4,-4],[-3,-3],[-2,-2],[-8,8],[-7,7],[-6,6],[-5,5],[-4,4],[-3,3],[-2,2],[8,-8],[7,-7],[6,-6],[5,-5],[4,-4],[3,-3],[2,-2],[8,8],[7,7],[6,6],[5,5],[4,4],[3,3],[2,2]];let n=[];for(let r=0;r<o.length;r++){const l=o[r];a(e,i(l).filter((e=>!([-1,1].includes(e[0])&&[-1,1].includes(e[1]))))).every((([e,o])=>null==t[e][o]))&&(n=[...n,...a(e,[l])])}return{finite:[],infinite:n}}case r.Profession.Kua2:return{finite:[],infinite:l(e,[...w,...E,...A,...y],t)};case r.Profession.Tuk2:return{finite:[],infinite:d(e,[...w,...E,...A,...y,..._,...f,...p,...m],t)};default:return o.prof}else switch(o.prof){case r.Profession.Kauk2:return{finite:a(e,[[-1,0]]),infinite:[]};case r.Profession.Kaun1:return{finite:a(e,[[-2,0],[2,0],[0,-2],[0,2]]),infinite:[]};case r.Profession.Dau2:return{finite:a(e,[[-1,-1],[-1,1],[1,-1],[1,1]]),infinite:[]};case r.Profession.Maun1:return{finite:a(e,[[-2,-2],[-2,2],[2,2],[2,-2]]),infinite:[]};case r.Profession.Nuak1:return{finite:[],infinite:l(e,w,t)};case r.Profession.Gua2:return{finite:[],infinite:l(e,[...w,...E,...A,...y],t)};case r.Profession.Kua2:return{finite:a(e,[[0,-1],[0,1]]),infinite:l(e,[...w,...E],t)};case r.Profession.Tuk2:return{finite:a(e,[[-1,0],[1,0]]),infinite:l(e,[...A,...y],t)};case r.Profession.Uai1:return{finite:a(e,[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,1]]),infinite:[]};default:return o.prof}}},247:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0});const n=t(233),r=t(974);o.initial_board_with_IA_down=[[{color:r.Color.Huok2,prof:r.Profession.Kua2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Maun1,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kaun1,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Uai1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Io,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Uai1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kaun1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Maun1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kua2,side:n.Side.Downward}],[{color:r.Color.Kok1,prof:r.Profession.Tuk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Gua2,side:n.Side.Downward},null,{color:r.Color.Kok1,prof:r.Profession.Dau2,side:n.Side.Downward},null,{color:r.Color.Huok2,prof:r.Profession.Dau2,side:n.Side.Downward},null,{color:r.Color.Huok2,prof:r.Profession.Gua2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Tuk2,side:n.Side.Downward}],[{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Nuak1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward}],[null,null,null,null,null,null,null,null,null],[null,null,null,null,"Tam2",null,null,null,null],[null,null,null,null,null,null,null,null,null],[{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Nuak1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward}],[{color:r.Color.Huok2,prof:r.Profession.Tuk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Gua2,side:n.Side.Upward},null,{color:r.Color.Huok2,prof:r.Profession.Dau2,side:n.Side.Upward},null,{color:r.Color.Kok1,prof:r.Profession.Dau2,side:n.Side.Upward},null,{color:r.Color.Kok1,prof:r.Profession.Gua2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Tuk2,side:n.Side.Upward}],[{color:r.Color.Kok1,prof:r.Profession.Kua2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Maun1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kaun1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Uai1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Io,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Uai1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kaun1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Maun1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kua2,side:n.Side.Upward}]]},892:(e,o,t)=>{function n(e){for(var t in e)o.hasOwnProperty(t)||(o[t]=e[t])}Object.defineProperty(o,"__esModule",{value:!0}),n(t(945)),n(t(247)),n(t(696)),n(t(233))},696:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0});const n=t(233),r=t(974),a=t(945);function i([e,o],t){return[["A","E","I","U","O","Y","AI","AU","IA"][t?e:8-e],["K","L","N","T","Z","X","C","M","P"][t?o:8-o]]}function l([e,o]){return 4===e&&2===o||4===e&&3===o||4===e&&4===o||4===e&&5===o||4===e&&6===o||2===e&&4===o||3===e&&4===o||5===e&&4===o||6===e&&4===o}o.toAbsoluteCoord_=i,o.fromAbsoluteCoord_=function([e,o],t){let n,r;if("A"===e)n=0;else if("E"===e)n=1;else if("I"===e)n=2;else if("U"===e)n=3;else if("O"===e)n=4;else if("Y"===e)n=5;else if("AI"===e)n=6;else if("AU"===e)n=7;else{if("IA"!==e)throw new Error("does not happen");n=8}if("K"===o)r=0;else if("L"===o)r=1;else if("N"===o)r=2;else if("T"===o)r=3;else if("Z"===o)r=4;else if("X"===o)r=5;else if("C"===o)r=6;else if("M"===o)r=7;else{if("P"!==o)throw new Error("does not happen");r=8}return t?[n,r]:[8-n,8-r]},o.isWaterAbs=function([e,o]){return"O"===e&&"N"===o||"O"===e&&"T"===o||"O"===e&&"Z"===o||"O"===e&&"X"===o||"O"===e&&"C"===o||"I"===e&&"Z"===o||"U"===e&&"Z"===o||"Y"===e&&"Z"===o||"AI"===e&&"Z"===o},o.isWater=l;const s=[0,1,2,3,4,5,6,7,8];o.get_opponent_pieces_rotated=e=>s.flatMap((o=>s.flatMap((t=>{const r=[o,t],a=e.f.currentBoard[o][t];return null===a?[]:"Tam2"===a?[{rotated_piece:a,rotated_coord:n.rotateCoord(r)}]:a.side===n.Side.Downward?[{rotated_piece:{prof:a.prof,color:a.color,side:n.Side.Upward},rotated_coord:n.rotateCoord(r)}]:[]})))),o.empty_squares=e=>s.flatMap((o=>s.flatMap((t=>{const n=[o,t];return null==e.f.currentBoard[o][t]?[n]:[]}))));const d=(e,o)=>a.eightNeighborhood(o).filter((([o,t])=>null==e[o][t]));o.from_hand_candidates=e=>e.f.hop1zuo1OfDownward.flatMap((t=>o.empty_squares(e).flatMap((o=>[{type:"NonTamMove",data:{type:"FromHand",color:t.color,prof:t.prof,dest:i(o,e.IA_is_down)}}])))),o.not_from_hand_candidates_=(e,t)=>o.get_opponent_pieces_rotated(t).flatMap((({rotated_piece:o,rotated_coord:s})=>{const{finite:c,infinite:u}=a.calculateMovablePositions(s,o,n.rotateBoard(t.f.currentBoard),t.tam_itself_is_tam_hue),_=[...c.map(n.rotateCoord),...u.map(n.rotateCoord)],f=n.rotateCoord(s);return _.flatMap((c=>{function u(e,o,t){return l(e)&&!l(t)&&o!==r.Profession.Nuak1}const _=t.f.currentBoard[c[0]][c[1]],p=e=>{const o=c,r=n.rotateBoard(t.f.currentBoard);r[s[0]][s[1]]=null;const{finite:l,infinite:d}=a.calculateMovablePositions(n.rotateCoord(o),e,r,t.tam_itself_is_tam_hue),_=l.map(n.rotateCoord),p=d.map(n.rotateCoord);return[..._.flatMap((l=>a.canGetOccupiedBy(n.Side.Downward,l,{color:e.color,prof:e.prof,side:n.Side.Downward},n.rotateBoard(r),t.tam_itself_is_tam_hue)?[{type:"NonTamMove",data:{type:"SrcStepDstFinite",src:i(f,t.IA_is_down),step:i(o,t.IA_is_down),dest:i(l,t.IA_is_down),is_water_entry_ciurl:u(l,e.prof,f)}}]:[])),...p.flatMap((l=>a.canGetOccupiedBy(n.Side.Downward,l,{color:e.color,prof:e.prof,side:n.Side.Downward},n.rotateBoard(r),t.tam_itself_is_tam_hue)?[{type:"InfAfterStep",src:i(f,t.IA_is_down),step:i(o,t.IA_is_down),plannedDirection:i(l,t.IA_is_down),stepping_ciurl:null,finalResult:null}]:[]))]};if("Tam2"===o){const e=n.rotateBoard(t.f.currentBoard);if(e[s[0]][s[1]]=null,null===_){const o=c;return a.eightNeighborhood(o).flatMap((r=>{if(null==t.f.currentBoard[r[0]][r[1]]||n.coordEq(r,f))return[{type:"TamMove",stepStyle:"NoStep",secondDest:i(r,t.IA_is_down),firstDest:i(o,t.IA_is_down),src:i(f,t.IA_is_down)}];{const a=r;return d(n.rotateBoard(e),a).flatMap((e=>[{type:"TamMove",stepStyle:"StepsDuringLatter",firstDest:i(o,t.IA_is_down),secondDest:i(e,t.IA_is_down),src:i(f,t.IA_is_down),step:i(a,t.IA_is_down)}]))}}))}{const o=c;return d(n.rotateBoard(e),o).flatMap((r=>d(n.rotateBoard(e),r).flatMap((e=>[{type:"TamMove",stepStyle:"StepsDuringFormer",firstDest:i(r,t.IA_is_down),secondDest:i(e,t.IA_is_down),src:i(f,t.IA_is_down),step:i(o,t.IA_is_down)}]))))}}return null===_?[{type:"NonTamMove",data:{type:"SrcDst",src:i(f,t.IA_is_down),dest:i(c,t.IA_is_down),is_water_entry_ciurl:u(c,o.prof,f)}}]:"Tam2"===_?e.allow_kut2tam2?p(o):[]:_.side===n.Side.Upward&&a.canGetOccupiedBy(n.Side.Downward,c,{color:o.color,prof:o.prof,side:n.Side.Downward},t.f.currentBoard,t.tam_itself_is_tam_hue)?[{type:"NonTamMove",data:{type:"SrcDst",src:i(f,t.IA_is_down),dest:i(c,t.IA_is_down),is_water_entry_ciurl:u(c,o.prof,f)}},...p(o)]:p(o)}))})),o.not_from_hand_candidates=e=>o.not_from_hand_candidates_({allow_kut2tam2:!1},e),o.not_from_hand_candidates_with_kut2tam2=e=>o.not_from_hand_candidates_({allow_kut2tam2:!0},e),o.get_valid_opponent_moves=function(e){return[...o.from_hand_candidates(e),...o.not_from_hand_candidates_({allow_kut2tam2:!1},e)]}},233:(e,o)=>{var t;Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.Upward=0]="Upward",e[e.Downward=1]="Downward"}(t=o.Side||(o.Side={})),o.fromUpOrDown=function(e){return{color:e.color,prof:e.prof,side:e.side}},o.toUpOrDown=function(e){return e.side,t.Downward,{color:e.color,prof:e.prof,side:e.side}},o.coordEq=function(e,o){return e[0]===o[0]&&e[1]===o[1]},o.rotateCoord=function(e){return[8-e[0],8-e[1]]},o.rotateBoard=function(e){const o=[[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"],[null,null,null,null,null,null,null,null,"Tam2"]];for(let n=0;n<9;n++)for(let r=0;r<9;r++)o[n][r]=null===(t=e[8-n][8-r])||"Tam2"===t?t:{prof:t.prof,color:t.color,side:1-t.side};var t;return o}},787:()=>{},728:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createImageButton=o.createPieceImgToBePlacedOnBoard=o.createPieceImgToBePlacedOnHop1zuo1=o.createCiurl=o.createGuideImageAt=o.createPieceSizeSelectionButtonOnBoard_Shifted=o.createPieceSizeImageOnBoardByPath_Shifted=o.createCancelButton=o.createPieceSizeImageOnBoardByPath=o.createPieceSizeImageOnBoardByPathAndXY=o.createArrowSvg=o.createHandImage=o.createBapPokImage=void 0;const n=t(460),r=t(495);function a(e,o,t,n){const a=document.createElement("img");return a.setAttribute("draggable","false"),a.classList.add(n),a.style.top=`${e}px`,a.style.left=`${o}px`,a.src=`image/${t}.png`,a.width=r.PIECE_SIZE,a.height=r.PIECE_SIZE,a}function i(e,o,t){const{top:n,left:i}=(0,r.coordToPieceXY)(e);return a(n,i,o,t)}function l(e,o,t){const{top:n,left:i}=(0,r.coordToPieceXY_Shifted)(e);return a(n,i,o,t)}o.createBapPokImage=function(e){const o=document.createElement("img");return o.src="image/dat2/同色.png",o.style.position="absolute",o.style.left=`${e.left}px`,o.style.top=`${185+e.top_padding}px`,o.width=50,o},o.createHandImage=function(e,o){const t=document.createElement("img");return t.src=`image/dat2/${e}.png`,t.style.position="absolute",t.style.left=`${o.left}px`,t.style.top=`${o.top_padding}px`,t.width=50,t},o.createArrowSvg=function(e,o){const[t,n]=o,a=t*r.BOX_SIZE+160.5,i=n*r.BOX_SIZE+19.25,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS(null,"viewBox","0 0 800 800"),l.setAttributeNS(null,"width","800"),l.setAttributeNS(null,"height","800"),l.classList.add("selection"),l.style.top=`${a}px`,l.style.left=`${i}px`;const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttributeNS(null,"d",e),s.setAttributeNS(null,"fill","#aeff01"),s.setAttributeNS(null,"stroke","#000"),s.setAttributeNS(null,"stroke-width","2"),l.appendChild(s),l},o.createPieceSizeImageOnBoardByPathAndXY=a,o.createPieceSizeImageOnBoardByPath=i,o.createCancelButton=function(){return a(1+9*r.BOX_SIZE+(r.MAX_PIECE_SIZE-r.PIECE_SIZE),1+7.5*r.BOX_SIZE,"piece/bmun","piece_image_on_board")},o.createPieceSizeImageOnBoardByPath_Shifted=l,o.createPieceSizeSelectionButtonOnBoard_Shifted=function(e){const o=l(e,"selection2","selection");return o.style.cursor="pointer",o.style.zIndex="200",o},o.createGuideImageAt=function(e,o){const[t,n]=e,a=document.createElement("img");return a.setAttribute("draggable","false"),a.classList.add("guide"),a.style.top=1+t*r.BOX_SIZE+(r.MAX_PIECE_SIZE-r.MAX_PIECE_SIZE)/2+"px",a.style.left=1+n*r.BOX_SIZE+(r.MAX_PIECE_SIZE-r.MAX_PIECE_SIZE)/2+"px",a.src=`image/${o}.png`,a.width=r.MAX_PIECE_SIZE,a.height=r.MAX_PIECE_SIZE,a.style.cursor="守"===o?"not-allowed":"pointer",a.style.opacity="0.3",a},o.createCiurl=function(e,o){const t=document.createElement("img");return t.setAttribute("draggable","false"),t.src=`image/ciurl_${e}.png`,t.width=150,t.height=15,t.classList.add("ciurl"),t.style.left=`${o.left}px`,t.style.top=`${o.top}px`,t.style.zIndex="300",t.style.transform=`rotate(${o.rotateDeg}deg)`,t.style.position="absolute",t},o.createPieceImgToBePlacedOnHop1zuo1=function(e,o,t){return a(1+(r.MAX_PIECE_SIZE-r.PIECE_SIZE)/2,(0,r.hop1_zuo1_left_position)({ind:e,list_length:t}),o,"piece_image_on_hop1zuo1")},o.createPieceImgToBePlacedOnBoard=function(e,o){return i(e,(0,n.toPath_)(o),"piece_image_on_board")},o.createImageButton=function(e,o){const t=document.createElement("input");return t.setAttribute("type","image"),t.src=`image/${e}.png`,t.height=200,t.style.backgroundColor="#e0e0e0",t.style.position="absolute",t.style.left="660px",t.style.top=`${o}px`,t.style.border="1px solid #aaaaaa",t}},935:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DICTIONARY=o.GAME_END_LINZKLAR=o.TACTICS_LINZKLAR=void 0,o.TACTICS_LINZKLAR={victory_almost_certain:"我須上行。",strengthened_shaman:"為激巫。",free_lunch:"我為無与之手。",avoid_defeat:"心為此而無行下行之道。",loss_almost_certain:"為何即下行。行我心之道。",neutral:"無心来為何善。行周時無下行之道。"},o.GAME_END_LINZKLAR={victory:"汝上行終",draw:"汝値同於我",loss:"汝下行終"},o.DICTIONARY={ja:{whetherToTake:"駒を取る → [OK]\n駒を踏む → [Cancel]",failedWaterEntry:"入水判定に失敗しました。",newSeason:["","季節が改まり夏になりました。","季節が改まり秋になりました。","季節が改まり冬になりました。"],gameEnd:"試合終了です。",gameResult:{victory:"あなたの勝ちです",draw:"引き分けです",loss:"あなたの負けです"},tactics:{victory_almost_certain:"勝ち確",strengthened_shaman:"激巫作成",free_lunch:"ただ取り",avoid_defeat:"負けを避けるためにこう指してみるか",loss_almost_certain:"なにやっても負けそうなので好き勝手に指す",neutral:"いい手が思いつかなかったので、即負けしない範囲で好き勝手に指す"}}}},447:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.drawArrow=o.drawField=o.drawMak2Io1=o.drawCancelButton=o.drawHoverAt_=o.drawPhantomAt=o.eraseArrow=o.erasePhantomAndOptionallyCancelButton=o.eraseGuide=o.drawCiurl=o.animateWaterEntryLogo=o.animateStepTamLogo=o.animateNode=o.getDenoteRateNodeTopLeft=o.getDenoteScoreNodeTopLeft=o.getDenoteSeasonNodeTopLeft=o.removeChildren=void 0;const n=t(892),r=t(728),a=t(513),i=t(495),l=t(519),s=t(460);function d(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function c(e){return{top:360+51*(3-e),left:3}}function u(e){return{top:447+21.83333333333333*(20-e),left:65}}function _(e){return{top:873-48.333333333333336*(e-1),left:4}}function f(){const e=document.getElementById("contains_phantom");for(;e.firstChild;)e.removeChild(e.firstChild)}o.removeChildren=d,o.getDenoteSeasonNodeTopLeft=c,o.getDenoteScoreNodeTopLeft=u,o.getDenoteRateNodeTopLeft=_,o.animateNode=async function(e,o,t,n="100",r){e.style.transition=`transform ${o/1e3}s ease`,e.style.zIndex=n,e.style.transform=`translateY(${t.to.top-t.from.top}px)`,e.style.transform+=`translateX(${t.to.left-t.from.left}px)`,null!=r&&(e.style.transform+=`rotate(${r}deg)`),await new Promise((e=>setTimeout(e,o)))},o.animateStepTamLogo=async function(){const e=document.getElementById("step_tam_logo");e.style.display="block",e.classList.add("step_tam");const o=document.getElementById("protective_cover_over_field_while_asyncawait");o.classList.remove("nocover"),setTimeout((()=>{e.style.display="none",o.classList.add("nocover")}),971.16),await new Promise((e=>setTimeout(e,1e3*.8093)))},o.animateWaterEntryLogo=async function(){const e=document.getElementById("water_entry_logo");e.style.display="block",e.classList.add("water_entry");const o=document.getElementById("protective_cover_over_field_while_asyncawait");o.classList.remove("nocover"),setTimeout((()=>{e.style.display="none",o.classList.add("nocover")}),971.16),await new Promise((e=>setTimeout(e,1e3*.8093)))},o.drawCiurl=function(e,o){const t=function(){let e=0,o=0;for(;0===e;)e=Math.random();for(;0===o;)o=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*o)},a=document.getElementById("contains_ciurl");d(document.getElementById("contains_ciurl"));const l=i.BOX_SIZE*(335/70+t()/6),s=84+(null==o||o===n.Side.Upward?771:0),c=e.map(((o,n)=>(0,r.createCiurl)(o,{left:l+.2*i.BOX_SIZE*t(),top:s+26*(n+.5-e.length/2)+.05*i.BOX_SIZE*t(),rotateDeg:40*Math.random()-20})));for(let e=c.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[c[e],c[o]]=[c[o],c[e]]}for(let e=0;e<c.length;e++)a.appendChild(c[e])},o.eraseGuide=function(){d(document.getElementById("contains_guides")),d(document.getElementById("contains_guides_on_upward"))},o.erasePhantomAndOptionallyCancelButton=f,o.eraseArrow=function(){d(document.getElementById("arrows"))},o.drawPhantomAt=function(e,o){const t=document.getElementById("contains_phantom");f();const n=(0,r.createPieceImgToBePlacedOnBoard)(e,o);n.style.opacity="0.1",t.appendChild(n)},o.drawHoverAt_=function(e,o,t){const n=document.getElementById("contains_phantom"),a=(0,r.createPieceSizeImageOnBoardByPath_Shifted)(e,(0,s.toPath_)(o),"piece_image_on_board");a.style.zIndex="100",a.style.cursor="pointer";const i=function(){t(e,o)};a.addEventListener("click",i),n.appendChild(a),i()},o.drawCancelButton=function(e){const o=document.getElementById("contains_phantom"),t=(0,r.createCancelButton)();t.width=80,t.height=80,t.style.zIndex="100",t.style.cursor="pointer",t.setAttribute("id","cancelButton"),t.addEventListener("click",e),o.appendChild(t)},o.drawMak2Io1=function(){const e=document.getElementById("denote_season");e.style.top=`${c(a.GAME_STATE.season).top}px`,e.style.transition="",e.style.transform="";const o=document.getElementById("denote_score");o.style.top=`${u(a.GAME_STATE.my_score).top}px`,o.style.transition="",o.style.transform="";const t=document.getElementById("denote_rate");0===a.GAME_STATE.log2_rate?t.style.display="none":t.style.display="block",t.style.top=`${_(a.GAME_STATE.log2_rate).top}px`,t.style.transition="",t.style.transform=""},o.drawField=function(e){console.log("focusing:",e.focus?(0,a.toAbsoluteCoord)(e.focus):null);{const o=a.GAME_STATE.f.currentBoard,t=document.getElementById("contains_pieces_on_board");d(t);for(let i=0;i<o.length;i++)for(let s=0;s<o[i].length;s++){const d=o[i][s];if(null==d)continue;const c=[i,s],u=(0,r.createPieceImgToBePlacedOnBoard)(c,d);if(u.id=`field_piece_${i}_${s}`,e.focus&&c[0]===e.focus[0]&&c[1]===e.focus[1]&&(u.style.border="8px solid #ff6",u.style.margin="-8px"),"Tam2"===d)a.GAME_STATE.opponent_has_just_moved_tam||(u.style.cursor="pointer",u.addEventListener("click",(function(){(0,l.selectOwnPieceOnBoard)(c,d)})));else if(d.side===n.Side.Upward){const e={prof:d.prof,side:n.Side.Upward,color:d.color};u.style.cursor="pointer",u.addEventListener("click",(function(){(0,l.selectOwnPieceOnBoard)(c,e)}))}t.appendChild(u)}}{const e=a.GAME_STATE.f.hop1zuo1OfUpward,o=document.getElementById("contains_pieces_on_upward");d(o);for(let t=0;t<e.length;t++){const n=e[t],a=(0,r.createPieceImgToBePlacedOnHop1zuo1)(t,(0,s.toPath)(n),e.length);a.style.cursor="pointer",a.addEventListener("click",(function(){(0,l.selectOwnPieceOnHop1zuo1)(t,n,e.length)})),o.appendChild(a)}}{const e=a.GAME_STATE.f.hop1zuo1OfDownward,o=document.getElementById("contains_pieces_on_downward");d(o);for(let t=0;t<e.length;t++){const n=e[t],a=(0,r.createPieceImgToBePlacedOnHop1zuo1)(t,(0,s.toPath)(n),e.length);a.id=`hop1zuo1OfDownward_${t}`,o.appendChild(a)}}},o.drawArrow=function(e,o){const t=(()=>{if(e[1]===o[1]&&e[0]>o[0]){const t=e[0]-o[0];return`m31.6 ${51.3+i.BOX_SIZE*t}h5.8v${-(34.5+i.BOX_SIZE*t)}l-21.3 31 4.5 3.2 11-16z`}if(e[1]===o[1]&&e[0]<o[0]){const t=o[0]-e[0];return`m31.6 18.7h5.8v${34.5+i.BOX_SIZE*t}l-21.3-31 4.5-3.2 11 16z`}if(e[0]===o[0]&&e[1]>o[1]){const t=e[1]-o[1];return`m${51.3+i.BOX_SIZE*t} 31.6v5.8h${-(34.5+i.BOX_SIZE*t)}l31-21.3 3.2 4.5-16 11z`}if(e[0]===o[0]&&e[1]<o[1]){const t=o[1]-e[1];return`m18.7 31.6v5.8h${34.5+i.BOX_SIZE*t}l-31-21.3-3.2 4.5 16 11z`}if(e[0]>o[0]&&e[1]<o[1]&&e[0]-o[0]==o[1]-e[1]){const t=e[0]-o[0];return`m${32.9+i.BOX_SIZE*t} 34.8-19.8 5.6-1.8-5.9 41-10.7 ${-(32.4+i.BOX_SIZE*t)} ${32.4+i.BOX_SIZE*t}-4.2-4.2z`}if(e[0]<o[0]&&e[1]>o[1]&&e[0]-o[0]==o[1]-e[1]){const t=e[1]-o[1];return`m34.8 ${32.9+i.BOX_SIZE*t} 5.6-19.8-5.9-1.8-10.7 41 ${32.4+i.BOX_SIZE*t} ${-(32.4+i.BOX_SIZE*t)}-4.2-4.2z`}if(e[0]>o[0]&&e[1]>o[1]&&e[0]-o[0]==e[1]-o[1]){const t=e[1]-o[1];return`m34.8 37.1 5.6 19.8-5.9 1.8-10.7-41 ${32.4+i.BOX_SIZE*t} ${32.4+i.BOX_SIZE*t}-4.2 4.2z`}if(e[0]<o[0]&&e[1]<o[1]&&e[0]-o[0]==e[1]-o[1]){const t=o[0]-e[0];return`m${32.9+i.BOX_SIZE*t} ${35.2+i.BOX_SIZE*t}-19.8-5.6-1.8 5.9 41 10.7 ${-(32.4+i.BOX_SIZE*t)} ${-(32.4+i.BOX_SIZE*t)}-4.2 4.2z`}throw new Error("unsupported direction for the arrow")})(),n=[Math.min(e[0],o[0]),Math.min(e[1],o[1])];document.getElementById("arrows").appendChild((0,r.createArrowSvg)(t,n))}},392:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.API_ORIGIN=void 0,o.API_ORIGIN="https://serene-reef-96808.herokuapp.com"},513:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_STATE=o.initial_board_with_IA_down=o.fromAbsoluteCoord=o.toAbsoluteCoord=void 0;const n=t(892),r=t(974),a=t(519),i=t(892);o.toAbsoluteCoord=function(e){return(0,i.toAbsoluteCoord_)(e,o.GAME_STATE.IA_is_down)},o.fromAbsoluteCoord=function(e){return(0,i.fromAbsoluteCoord_)(e,o.GAME_STATE.IA_is_down)},o.initial_board_with_IA_down=[[{color:r.Color.Huok2,prof:r.Profession.Kua2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Maun1,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kaun1,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Uai1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Io,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Uai1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kaun1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Maun1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kua2,side:n.Side.Downward}],[{color:r.Color.Kok1,prof:r.Profession.Tuk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Gua2,side:n.Side.Downward},null,{color:r.Color.Kok1,prof:r.Profession.Dau2,side:n.Side.Downward},null,{color:r.Color.Huok2,prof:r.Profession.Dau2,side:n.Side.Downward},null,{color:r.Color.Huok2,prof:r.Profession.Gua2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Tuk2,side:n.Side.Downward}],[{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Nuak1,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Downward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Downward}],[null,null,null,null,null,null,null,null,null],[null,null,null,null,"Tam2",null,null,null,null],[null,null,null,null,null,null,null,null,null],[{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Nuak1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kauk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kauk2,side:n.Side.Upward}],[{color:r.Color.Huok2,prof:r.Profession.Tuk2,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Gua2,side:n.Side.Upward},null,{color:r.Color.Huok2,prof:r.Profession.Dau2,side:n.Side.Upward},null,{color:r.Color.Kok1,prof:r.Profession.Dau2,side:n.Side.Upward},null,{color:r.Color.Kok1,prof:r.Profession.Gua2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Tuk2,side:n.Side.Upward}],[{color:r.Color.Kok1,prof:r.Profession.Kua2,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Maun1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Kaun1,side:n.Side.Upward},{color:r.Color.Kok1,prof:r.Profession.Uai1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Io,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Uai1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kaun1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Maun1,side:n.Side.Upward},{color:r.Color.Huok2,prof:r.Profession.Kua2,side:n.Side.Upward}]],o.GAME_STATE=(e=>{let t=!0,r=20;const i=[[],[],[],[]];let l=0;return{last_move_focus:null,f:{currentBoard:e.IA_is_down?(0,n.rotateBoard)((0,n.rotateBoard)(o.initial_board_with_IA_down)):(0,n.rotateBoard)(o.initial_board_with_IA_down),hop1zuo1OfDownward:[],hop1zuo1OfUpward:[]},IA_is_down:e.IA_is_down,tam_itself_is_tam_hue:!0,opponent_has_just_moved_tam:!1,set is_my_turn(e){t=!!e,t?(document.getElementById("my_icon").style.opacity="1",document.getElementById("larta_opponent").style.opacity="0.3",document.getElementById("opponent_message").textContent="",document.getElementById("opponent_message_linzklar").textContent="",document.getElementById("protective_cover_over_field_while_waiting_for_opponent").classList.add("nocover")):(document.getElementById("my_icon").style.opacity="0.3",document.getElementById("larta_opponent").style.opacity="1",document.getElementById("protective_cover_over_field_while_waiting_for_opponent").classList.remove("nocover"),window.setTimeout(a.sendMainPoll,500*.8093))},get is_my_turn(){return t},backupDuringStepping:null,set my_score(e){i[l].push(e-r),r=e},get my_score(){return r},get season(){return l},set season(e){l=e},get scores_of_each_season(){return[i[0].concat([]),i[1].concat([]),i[2].concat([]),i[3].concat([])]},set scores_of_each_season(e){throw new Error("Cannot set scores_of_each_season. Please set my_score to reflect the change in the score.")},log2_rate:0}})({IA_is_down:(()=>{try{return JSON.parse(sessionStorage.is_IA_down_for_me)}catch{location.href="entrance.html"}})()})},495:(e,o)=>{function t(e){return e.list_length<=9?e.ind:8*e.ind/(e.list_length-1)}Object.defineProperty(o,"__esModule",{value:!0}),o.indToHo1Zuo1OfDownward=o.hop1_zuo1_left_position=o.coordToPieceXY_Shifted=o.coordToPieceXY=o.adjust_ind_for_hop1zuo1=o.PIECE_SIZE=o.MAX_PIECE_SIZE=o.BOX_SIZE=void 0,o.BOX_SIZE=70,o.MAX_PIECE_SIZE=o.BOX_SIZE-1,o.PIECE_SIZE=60,o.adjust_ind_for_hop1zuo1=t,o.coordToPieceXY=function(e){const[t,n]=e;return{top:1+t*o.BOX_SIZE+(o.MAX_PIECE_SIZE-o.PIECE_SIZE)/2,left:1+n*o.BOX_SIZE+(o.MAX_PIECE_SIZE-o.PIECE_SIZE)/2}},o.coordToPieceXY_Shifted=function(e){const[t,n]=e;return{top:1+t*o.BOX_SIZE+(o.MAX_PIECE_SIZE-o.PIECE_SIZE),left:1+n*o.BOX_SIZE}},o.hop1_zuo1_left_position=function(e){return 1+t(e)*o.BOX_SIZE+(o.MAX_PIECE_SIZE-o.PIECE_SIZE)/2},o.indToHo1Zuo1OfDownward=function(e){return{top:-135,left:1+e*o.BOX_SIZE+(o.MAX_PIECE_SIZE-o.PIECE_SIZE)/2}}},204:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.KIAR_ARK=void 0;const t={header:[],body:[]};o.KIAR_ARK=new Proxy(t,{set:function(e,o,n){return e[o]=n,console.log("_kiar_ark:",t),document.getElementById("kiar_ark").textContent=t.header.map((e=>e.dat)).join("\n")+"\n"+function(e){var o,t,n,r;let a="";for(let i=0;i<e.length;){const l=e[i],s=e[i+1];if("movement"===(null==l?void 0:l.type)&&"movement"===(null==s?void 0:s.type))a+=l.dat+(null!==(o=l.piece_capture_comment)&&void 0!==o?o:"")+"\t"+s.dat+(null!==(t=s.piece_capture_comment)&&void 0!==t?t:"")+"\n",i+=2;else if("tymoktaxot"===(null==l?void 0:l.type))a+="\n"+l.dat+"\n\n",i+=1;else if("movement"===(null==l?void 0:l.type)&&"tymoktaxot"===(null==s?void 0:s.type))a+=l.dat+(null!==(n=l.piece_capture_comment)&&void 0!==n?n:"")+"\n\n"+s.dat+"\n\n",i+=2;else{if("movement"!==(null==l?void 0:l.type)||void 0!==s)throw new Error(`Unexpected: the types passed to KIAR_ARK.body are "${null==l?void 0:l.type}" followed by "${null==s?void 0:s.type}".`);a+=l.dat+(null!==(r=l.piece_capture_comment)&&void 0!==r?r:"")+"\n",i+=1}}return a}(t.body),!0}})},519:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.endSeason=o.animatePunishStepTamAndCheckPerzej=o.increaseRateAndAnimate=o.selectOwnPieceOnHop1zuo1=o.selectOwnPieceOnBoard=o.drawCiurlWithAudio=o.calculateHandsAndScore=o.sendStuffTo=o.sendMainPoll=void 0;const n=t(728),r=t(513),a=t(849),i=t(892),l=t(460),s=t(974),d=t(892),c=t(495),u=t(935),_=t(392),f=t(798),p=t(50),m=t(431),w=t(204),E=t(548),A=t(447),y=(e,o)=>e[0]===o[0]&&e[1]===o[1],{stopPolling:T,resumePolling:g,isPollingAllowed:S,allowPolling:h}=(()=>{let e=!0;return{stopPolling:()=>{e=!1},resumePolling:()=>{e=!0,window.setTimeout(I,500*.8093)},isPollingAllowed:()=>e,allowPolling:()=>{e=!0}}})();async function I(){if(console.log("poll"),!S())return;const e=await b("mainpoll","`polling for the opponent's move`",{},(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if(!e.legal)throw alert(`sending MainPoll somehow resulted in an error: ${e.whyIllegal}`),new Error(`sending MainPoll somehow resulted in an error: ${e.whyIllegal}`);if("not yet"!==e.content){console.log("ding!"),document.getElementById("opponent_message").textContent=null!=e.message?u.DICTIONARY.ja.tactics[e.message]:"",document.getElementById("opponent_message_linzklar").textContent=null!=e.message?u.TACTICS_LINZKLAR[e.message]:"",E.KRUT_CRUOP&&new Audio("sound/thud.ogg").play();const o=e.content;if(console.log(o),"NonTamMove"===o.type)if(r.GAME_STATE.opponent_has_just_moved_tam=!1,"SrcDst"===o.data.type){const e=await(0,a.animateOpponentSrcDst)(o.data);r.GAME_STATE.is_my_turn=!0,o.data.water_entry_ciurl?w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(o,o.data.water_entry_ciurl.filter((e=>e)).length),piece_capture_comment:O(e)}]:w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(o),piece_capture_comment:O(e)}]}else if("FromHand"===o.data.type){const e={prof:o.data.prof,color:o.data.color,side:i.Side.Downward};await(0,a.animateOpponentFromHand)(e,(0,r.fromAbsoluteCoord)(o.data.dest)),r.GAME_STATE.is_my_turn=!0,w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(o)}]}else{if("SrcStepDstFinite"!==o.data.type)throw o.data,new Error("does not happen");{const e=await(0,a.animateOpponentSrcStepDstFinite)(o.data);r.GAME_STATE.is_my_turn=!0,o.data.water_entry_ciurl?w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(o,o.data.water_entry_ciurl.filter((e=>e)).length),piece_capture_comment:O(e)}]:w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(o),piece_capture_comment:O(e)}]}}else if("TamMove"===o.type)if(r.GAME_STATE.opponent_has_just_moved_tam=!0,"NoStep"===o.stepStyle)await(0,a.animateOpponentTamNoStep)((0,r.fromAbsoluteCoord)(o.src),(0,r.fromAbsoluteCoord)(o.firstDest),(0,r.fromAbsoluteCoord)(o.secondDest)),r.GAME_STATE.is_my_turn=!0,w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(o)}];else if("StepsDuringFormer"===o.stepStyle)await(0,a.animateOpponentTamSteppingDuringFormer)({src:(0,r.fromAbsoluteCoord)(o.src),firstDest:(0,r.fromAbsoluteCoord)(o.firstDest),secondDest:(0,r.fromAbsoluteCoord)(o.secondDest),step:(0,r.fromAbsoluteCoord)(o.step)}),r.GAME_STATE.is_my_turn=!0,w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(o)}];else{if("StepsDuringLatter"!==o.stepStyle)throw o.stepStyle,new Error("does not happen");await(0,a.animateOpponentTamSteppingDuringLatter)({src:(0,r.fromAbsoluteCoord)(o.src),firstDest:(0,r.fromAbsoluteCoord)(o.firstDest),secondDest:(0,r.fromAbsoluteCoord)(o.secondDest),step:(0,r.fromAbsoluteCoord)(o.step)}),r.GAME_STATE.is_my_turn=!0,w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(o)}]}else{if("InfAfterStep"!==o.type)throw new Error("does not happen");{r.GAME_STATE.opponent_has_just_moved_tam=!1;const e=null==o.finalResult?new Promise((async(e,o)=>{for(;;){const o=await b("infpoll","`polling for the opponent's afterhalfacceptance`",{},(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if(!1===o.legal)throw new Error("not good!!!");if("not yet"!==o.content){if("InfAfterStep"!==o.content.type)throw new Error("nooooooo");return void e(o.content.finalResult)}await new Promise((e=>setTimeout(e,500*.8093)))}})):Promise.resolve(o.finalResult),[t,n]=await(0,a.animateOpponentInfAfterStep)({src:(0,r.fromAbsoluteCoord)(o.src),step:(0,r.fromAbsoluteCoord)(o.step),plannedDirection:(0,r.fromAbsoluteCoord)(o.plannedDirection),stepping_ciurl:o.stepping_ciurl,finalResult:e});r.GAME_STATE.is_my_turn=!0,t.water_entry_ciurl?t.water_entry_ciurl.filter((e=>e)).length<3?w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R(o.src)}片${R(o.step)}${R(t.dest)}橋${$(o.stepping_ciurl)}水${$(t.water_entry_ciurl)}此無`}]:w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R(o.src)}片${R(o.step)}${R(t.dest)}橋${$(o.stepping_ciurl)}水${$(t.water_entry_ciurl)}`,piece_capture_comment:O(n)}]:t.thwarted_by_failing_water_entry_ciurl?w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R(o.src)}片${R(o.step)}${R(t.dest)}橋${$(o.stepping_ciurl)}水${$(t.thwarted_by_failing_water_entry_ciurl)}此無`,piece_capture_comment:O(n)}]:y(o.plannedDirection,t.dest)||!y(t.dest,o.src)?w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R(o.src)}片${R(o.step)}${R(t.dest)}橋${$(o.stepping_ciurl)}`,piece_capture_comment:O(n)}]:w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R(o.src)}片${R(o.step)}${R(o.plannedDirection)}橋${$(o.stepping_ciurl)}此無`,piece_capture_comment:O(n)}]}}}else await new Promise((e=>setTimeout(e,500*.8093))),await I()}o.sendMainPoll=I;let v=null;function P(e){C(),console.log("drawField #",1.1),(0,A.drawField)({focus:e})}function C(){(0,A.eraseGuide)(),(0,A.erasePhantomAndOptionallyCancelButton)(),document.getElementById("protective_cover_over_field").classList.add("nocover");const e=r.GAME_STATE.backupDuringStepping,o=e[0];r.GAME_STATE.f.currentBoard[o[0]][o[1]]=e[1],r.GAME_STATE.backupDuringStepping=null,v=null,console.log("drawField #",1),(0,A.drawField)({focus:r.GAME_STATE.last_move_focus})}function M(e,o,t){(0,A.eraseGuide)(),document.getElementById("protective_tam_cover_over_field").classList.remove("nocover"),document.getElementById("protective_cover_over_field").classList.add("nocover"),r.GAME_STATE.f.currentBoard[e[0]][e[1]]=null,r.GAME_STATE.f.currentBoard[o[0]][o[1]]="Tam2",console.log("drawField #",4.1),(0,A.drawField)({focus:null}),(0,A.drawPhantomAt)(e,"Tam2"),(0,A.drawCancelButton)((()=>{(0,A.eraseGuide)(),(0,A.erasePhantomAndOptionallyCancelButton)(),document.getElementById("protective_tam_cover_over_field").classList.add("nocover"),document.getElementById("protective_cover_over_field").classList.add("nocover"),r.GAME_STATE.f.currentBoard[o[0]][o[1]]=null,r.GAME_STATE.f.currentBoard[e[0]][e[1]]="Tam2",v=null,console.log("drawField #",5.1),(0,A.drawField)({focus:r.GAME_STATE.last_move_focus})})),function(o){const a=document.getElementById("contains_phantom"),i=(0,n.createPieceSizeImageOnBoardByPath)(o,(0,l.toPath_)("Tam2"),"piece_image_on_board");i.style.zIndex="100",i.style.cursor="pointer";const s=function(){const a=document.getElementById("contains_guides"),i=(0,n.createPieceSizeImageOnBoardByPath)(o,"selection2","selection");i.style.cursor="pointer",i.style.zIndex="200",a.appendChild(i);const{finite:l,infinite:s}=(0,d.calculateMovablePositions)(o,"Tam2",r.GAME_STATE.f.currentBoard,r.GAME_STATE.tam_itself_is_tam_hue);if(s.length>0)throw new Error("should not happen");for(let i=0;i<l.length;i++){const[s,c]=l[i],u=r.GAME_STATE.f.currentBoard[s][c];if(void 0!==t&&null!==u)continue;const _=(0,n.createGuideImageAt)(l[i],"yellow_diamond_for_tam");null===u?_.addEventListener("click",(()=>{const n=e,a=o,s=l[i];console.assert(null==r.GAME_STATE.f.currentBoard[s[0]][s[1]]);const d=t?{type:"TamMove",stepStyle:"StepsDuringFormer",src:(0,r.toAbsoluteCoord)(n),step:(0,r.toAbsoluteCoord)(t),firstDest:(0,r.toAbsoluteCoord)(a),secondDest:(0,r.toAbsoluteCoord)(s)}:{type:"TamMove",stepStyle:"NoStep",src:(0,r.toAbsoluteCoord)(n),firstDest:(0,r.toAbsoluteCoord)(a),secondDest:(0,r.toAbsoluteCoord)(s)};(0,A.erasePhantomAndOptionallyCancelButton)(),(0,A.eraseGuide)(),U(d),document.getElementById("protective_tam_cover_over_field").classList.add("nocover")})):_.addEventListener("click",(function(){var t,a,s;t=e,a=o,s=l[i],(0,A.eraseGuide)(),document.getElementById("protective_cover_over_field").classList.remove("nocover"),document.getElementById("protective_tam_cover_over_field").classList.remove("nocover"),r.GAME_STATE.backupDuringStepping=[a,"Tam2"],r.GAME_STATE.f.currentBoard[a[0]][a[1]]=null,document.getElementById("cancelButton").remove(),console.log("drawField #",2),(0,A.drawField)({focus:null}),(0,A.drawPhantomAt)(a,"Tam2"),(0,A.drawCancelButton)((()=>{(0,A.eraseGuide)(),(0,A.erasePhantomAndOptionallyCancelButton)(),document.getElementById("protective_cover_over_field").classList.add("nocover"),document.getElementById("protective_tam_cover_over_field").classList.add("nocover"),r.GAME_STATE.f.currentBoard[t[0]][t[1]]="Tam2",r.GAME_STATE.backupDuringStepping=null,v=null,console.log("drawField #",3.1),(0,A.drawField)({focus:r.GAME_STATE.last_move_focus})})),(0,A.drawHoverAt_)(s,"Tam2",((e,o)=>{const i=document.getElementById("contains_guides"),l=(0,n.createPieceSizeSelectionButtonOnBoard_Shifted)(e);i.appendChild(l);const{finite:c,infinite:u}=(0,d.calculateMovablePositions)(e,o,r.GAME_STATE.f.currentBoard,r.GAME_STATE.tam_itself_is_tam_hue);if(u.length>0)throw new Error("should not happen");for(let e=0;e<c.length;e++){const o=c[e],[l,d]=o;if(null!==r.GAME_STATE.f.currentBoard[l][d])continue;const u=(0,n.createGuideImageAt)(o,"yellow_diamond_for_tam");u.addEventListener("click",(function(){const e={type:"TamMove",stepStyle:"StepsDuringLatter",src:(0,r.toAbsoluteCoord)(t),step:(0,r.toAbsoluteCoord)(s),firstDest:(0,r.toAbsoluteCoord)(a),secondDest:(0,r.toAbsoluteCoord)(o)};(0,A.eraseGuide)(),(0,A.erasePhantomAndOptionallyCancelButton)(),U(e),document.getElementById("protective_cover_over_field").classList.add("nocover"),document.getElementById("protective_tam_cover_over_field").classList.add("nocover")})),u.style.zIndex="200",i.appendChild(u)}}))})),_.style.zIndex="200",a.appendChild(_)}};i.addEventListener("click",s),a.appendChild(i),s()}(o)}function B(e,o,t){(0,A.eraseGuide)(),document.getElementById("protective_cover_over_field").classList.remove("nocover"),r.GAME_STATE.backupDuringStepping=[e,o],r.GAME_STATE.f.currentBoard[e[0]][e[1]]=null,console.log("drawField #",6.1),(0,A.drawField)({focus:null}),(0,A.drawPhantomAt)(e,o),(0,A.drawCancelButton)(C),(0,A.drawHoverAt_)(t,o,(function(e,o){const t=document.getElementById("contains_guides"),a=(0,n.createPieceSizeSelectionButtonOnBoard_Shifted)(e);t.appendChild(a);const{finite:i,infinite:l}=(0,d.calculateMovablePositions)(e,o,r.GAME_STATE.f.currentBoard,r.GAME_STATE.tam_itself_is_tam_hue);if(W(e,{piece:o,path:"yellow_circle"},t,i),"Tam2"!==o)W(e,{piece:o,path:"green_circle"},t,l);else if(l.length>0)throw new Error("should not happen")}))}async function k(e,o){var t;const n=await K("`after half acceptance`",e,(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if(!n.legal)throw alert(`Illegal API sent, the reason being ${n.whyIllegal}`),new Error(`Illegal API sent, the reason being ${n.whyIllegal}`);if(!n.dat.waterEntryHappened){(0,A.eraseGuide)(),v=null;const t=z(e,o.src,o.step);return console.log("drawField #",7),(0,A.drawField)({focus:r.GAME_STATE.last_move_focus}),r.GAME_STATE.is_my_turn=!1,void(e.dest?w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R((0,r.toAbsoluteCoord)(o.src))}片${R((0,r.toAbsoluteCoord)(o.step))}${R(e.dest)}橋${$(o.stepping_ciurl)}`,piece_capture_comment:O(t)}]:w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R((0,r.toAbsoluteCoord)(o.src))}片${R((0,r.toAbsoluteCoord)(o.step))}${R(o.planned_destination)}橋${$(o.stepping_ciurl)}此無`,piece_capture_comment:O(t)}])}if(await(0,A.animateWaterEntryLogo)(),q(n.dat.ciurl),await new Promise((e=>setTimeout(e,500*.8093))),n.dat.ciurl.filter((e=>e)).length<3){alert(u.DICTIONARY.ja.failedWaterEntry),(0,A.eraseGuide)(),v=null,P(o.src),r.GAME_STATE.is_my_turn=!1;const a=null!==(t=e.dest)&&void 0!==t?t:(()=>{throw new Error("This should not happen; it should have been rejected before the water entry")})();w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R((0,r.toAbsoluteCoord)(o.src))}片${R((0,r.toAbsoluteCoord)(o.step))}${R(a)}橋${$(o.stepping_ciurl)}水${$(n.dat.ciurl)}此無`}]}else{(0,A.eraseGuide)(),v=null;const t=z(e,o.src,o.step);if(console.log("drawField #",8),(0,A.drawField)({focus:r.GAME_STATE.last_move_focus}),r.GAME_STATE.is_my_turn=!1,!e.dest)throw new Error("This should not happen; it should have been rejected before the water entry");w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:`${R((0,r.toAbsoluteCoord)(o.src))}片${R((0,r.toAbsoluteCoord)(o.step))}${R(e.dest)}橋${$(o.stepping_ciurl)}水${$(n.dat.ciurl)}`,piece_capture_comment:O(t)}]}}async function b(e,o,t,n){const r=document.getElementById("protective_cover_over_field_while_asyncawait");r.classList.remove("nocover"),console.log(`Sending ${o}:`,JSON.stringify(t));const a=`${_.API_ORIGIN}/${e}/`,i={message:t},l=await fetch(a,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.access_token}`}}).then((e=>(r.classList.add("nocover"),e.json()))).then(n).catch((e=>{r.classList.add("nocover"),console.error("Error:",e)}));if(console.log(l),r.classList.add("nocover"),!l)throw alert("network error!"),r.classList.add("nocover"),new Error("network error!");return l}async function K(e,o,t){return await b("slow",e,o,t)}function D(e){return e===s.Color.Huok2?"黒":"赤"}function G(e){return["船","兵","弓","車","虎","馬","筆","巫","将","王"][e]}function O(e){if(null===e)return"";const[o,t]=e;return`手${D(o)}${G(t)}`}function R(e){return`${e[1]}${e[0]}`}function L(e){return["無","一","二","三","四","五"][e]}function $(e){return L(e.filter((e=>e)).length)}function N(e,o){if("NonTamMove"===e.type){if("FromHand"===e.data.type)return`${D(e.data.color)}${G(e.data.prof)}${R(e.data.dest)}`;if("SrcDst"===e.data.type)return void 0===o?`${R(e.data.src)}片${R(e.data.dest)}無撃裁`:o<3?`${R(e.data.src)}片${R(e.data.dest)}水${L(o)}此無`:`${R(e.data.src)}片${R(e.data.dest)}水${L(o)}`;if("SrcStepDstFinite"===e.data.type)return void 0===o?`${R(e.data.src)}片${R(e.data.step)}${R(e.data.dest)}無撃裁`:o<3?`${R(e.data.src)}片${R(e.data.step)}${R(e.data.dest)}水${L(o)}此無`:`${R(e.data.src)}片${R(e.data.step)}${R(e.data.dest)}水${L(o)}`;throw e.data,new Error("should not reach here")}if("TamMove"===e.type){if("NoStep"===e.stepStyle)return`${R(e.src)}皇[${R(e.firstDest)}]${R(e.secondDest)}`;if("StepsDuringFormer"===e.stepStyle)return`${R(e.src)}皇${R(e.step)}[${R(e.firstDest)}]${R(e.secondDest)}`;if("StepsDuringLatter"===e.stepStyle)return`${R(e.src)}皇[${R(e.firstDest)}]${R(e.step)}${R(e.secondDest)}`;throw e.stepStyle,new Error("should not reach here")}throw new Error("should not reach here")}async function U(e){const o=await K("normal move",e,(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if(!o.legal)throw alert(`Illegal API sent, the reason being ${o.whyIllegal}`),new Error(`Illegal API sent, the reason being ${o.whyIllegal}`);if(!o.dat.waterEntryHappened){(0,A.eraseGuide)(),v=null;const o=x(e);return console.log("drawField #",9),(0,A.drawField)({focus:r.GAME_STATE.last_move_focus}),r.GAME_STATE.is_my_turn=!1,void(w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(e),piece_capture_comment:O(o)}])}if(await(0,A.animateWaterEntryLogo)(),q(o.dat.ciurl),await new Promise((e=>setTimeout(e,500*.8093))),o.dat.ciurl.filter((e=>e)).length<3)alert(u.DICTIONARY.ja.failedWaterEntry),(0,A.eraseGuide)(),v=null,"NonTamMove"===e.type&&"SrcStepDstFinite"===e.data.type?P((0,r.fromAbsoluteCoord)(e.data.src)):"NonTamMove"===e.type&&"FromHand"!==e.data.type&&(console.log("drawField #",10.1),(0,A.drawField)({focus:(0,r.fromAbsoluteCoord)(e.data.src)})),r.GAME_STATE.is_my_turn=!1,w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(e,o.dat.ciurl.filter((e=>e)).length)}];else{(0,A.eraseGuide)(),v=null;const t=x(e);console.log("drawField #",10),(0,A.drawField)({focus:r.GAME_STATE.last_move_focus}),r.GAME_STATE.is_my_turn=!1,w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"movement",dat:N(e,o.dat.ciurl.filter((e=>e)).length),piece_capture_comment:O(t)}]}}function z(e,o,t){if(console.log(o,t),null===e.dest)return C(),console.log("lone assignment to last_move_focus, #",0),r.GAME_STATE.last_move_focus=o,null;const[n,l]=(0,r.fromAbsoluteCoord)(e.dest),s=r.GAME_STATE.backupDuringStepping[1];C();const[d,c]=o,[u,_]=t;if(null===r.GAME_STATE.f.currentBoard[u][_])throw new Error("step is unoccupied");const f=r.GAME_STATE.f.currentBoard[n][l];return(0,i.coordEq)([d,c],[n,l])?(console.log("lone assignment to last_move_focus, #",1),r.GAME_STATE.last_move_focus=[d,c],null):(null!==f&&X(f),r.GAME_STATE.f.currentBoard[d][c]=null,r.GAME_STATE.f.currentBoard[n][l]=s,console.log("lone assignment to last_move_focus, #",2),r.GAME_STATE.last_move_focus=[n,l],(0,a.toColorProf)(f))}function X(e){const o=(()=>{if("Tam2"===e)throw new Error("dest is occupied by Tam2");if(e.side===i.Side.Upward)throw new Error("dest is occupied by an ally");if(e.side===i.Side.Downward)return{color:e.color,prof:e.prof,side:i.Side.Upward};throw e.side,new Error("should not reach here")})(),t=H(r.GAME_STATE.f.hop1zuo1OfUpward);r.GAME_STATE.f.hop1zuo1OfUpward.push(o);const a=H(r.GAME_STATE.f.hop1zuo1OfUpward);a.score!==t.score&&(setTimeout((()=>{(0,f.drawScoreDisplay)(a.hands);const e=a.score,o=document.getElementById("score_display"),t=(0,n.createImageButton)("再行",0);t.addEventListener("click",(async()=>{if(J(!0),!0!==(await b("whethertymok","`send whether ty mok1`",!0,(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)))).legal)throw new Error("bad!!!!");w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"tymoktaxot",dat:`或為${a.hands.join("加")}\n再行`}]})),o.appendChild(t);const i=(0,n.createImageButton)("終季",250);i.addEventListener("click",(async()=>{const o=await b("whethertymok","`send whether ty mok1`",!1,(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if(!0!==o.legal)throw new Error("bad!!!!");const t=o.is_first_move_my_move,n=["春","夏","秋","冬"][r.GAME_STATE.season];ee(e,t),w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"tymoktaxot",dat:`或為${a.hands.join("加")}而手${(0,p.toDigitsLinzklar)(e*Math.pow(2,r.GAME_STATE.log2_rate)).join("")}\n終季\t${n}終`}]})),o.appendChild(i)}),1e3*.8093),T())}function H(e){const o=e.map((e=>{return o=e.color,t=e.prof,[["赤船","赤兵","赤弓","赤車","赤虎","赤馬","赤筆","赤巫","赤将","赤王"],["黒船","黒兵","黒弓","黒車","黒虎","黒馬","黒筆","黒巫","黒将","黒王"]][o][t];var o,t})),t=(0,m.calculate_hands_and_score_from_pieces)(o);if(!0===t.error)throw new Error(`should not happen: too many of ${t.too_many.join(",")}`);return{hands:t.hands,score:t.score}}function x(e){if("NonTamMove"===e.type){if("FromHand"===e.data.type){const o=e.data,t=r.GAME_STATE.f.hop1zuo1OfUpward.findIndex((e=>e.color===o.color&&e.prof===o.prof));if(-1===t)throw new Error("What should exist in the hand does not exist");const[n]=r.GAME_STATE.f.hop1zuo1OfUpward.splice(t,1),[a,i]=(0,r.fromAbsoluteCoord)(o.dest);if(null!==r.GAME_STATE.f.currentBoard[a][i])throw new Error("Trying to parachute the piece onto an occupied space");return r.GAME_STATE.f.currentBoard[a][i]=n,console.log("lone assignment to last_move_focus, #",3),r.GAME_STATE.last_move_focus=[a,i],null}if("SrcDst"===e.data.type){const o=e.data,[t,n]=(0,r.fromAbsoluteCoord)(o.src),[i,l]=(0,r.fromAbsoluteCoord)(o.dest),s=r.GAME_STATE.f.currentBoard[t][n];if(null===s)throw new Error("src is unoccupied");const d=r.GAME_STATE.f.currentBoard[i][l];return null!==d&&X(d),r.GAME_STATE.f.currentBoard[t][n]=null,r.GAME_STATE.f.currentBoard[i][l]=s,console.log("lone assignment to last_move_focus, #",4),r.GAME_STATE.last_move_focus=[i,l],(0,a.toColorProf)(d)}if("SrcStepDstFinite"===e.data.type){const o=e.data,[t,n]=(0,r.fromAbsoluteCoord)(o.src),[l,s]=(0,r.fromAbsoluteCoord)(o.dest),d=r.GAME_STATE.backupDuringStepping[1];C();const[c,u]=(0,r.fromAbsoluteCoord)(o.step);if(null===r.GAME_STATE.f.currentBoard[c][u])throw new Error("step is unoccupied");const _=r.GAME_STATE.f.currentBoard[l][s];return(0,i.coordEq)([t,n],[l,s])?(r.GAME_STATE.last_move_focus=[l,s],console.log("lone assignment to last_move_focus, #",4.5),null):(null!==_&&X(_),r.GAME_STATE.f.currentBoard[t][n]=null,r.GAME_STATE.f.currentBoard[l][s]=d,r.GAME_STATE.last_move_focus=[l,s],console.log("lone assignment to last_move_focus, #",5),(0,a.toColorProf)(_))}throw e.data,new Error("should not reach here")}if("TamMove"===e.type){const o=e,[t,n]=(0,r.fromAbsoluteCoord)(o.firstDest),[a,l]=(0,r.fromAbsoluteCoord)(o.secondDest);if("StepsDuringLatter"===e.stepStyle)return r.GAME_STATE.f.currentBoard[a][l]="Tam2",r.GAME_STATE.last_move_focus=[a,l],console.log("lone assignment to last_move_focus, #",6),null;const s=r.GAME_STATE.f.currentBoard[t][n];if(null===s)throw new Error("firstDest is unoccupied");if("Tam2"!==s)throw new Error("TamMove but not Tam2");return(0,i.coordEq)([t,n],[a,l])?(r.GAME_STATE.last_move_focus=[a,l],console.log("lone assignment to last_move_focus, #",7),null):(r.GAME_STATE.f.currentBoard[t][n]=null,r.GAME_STATE.f.currentBoard[a][l]=s,r.GAME_STATE.last_move_focus=[a,l],console.log("lone assignment to last_move_focus, #",8),null)}throw new Error("should not reach here")}function F(e,o,t,n){if(null!=r.GAME_STATE.f.currentBoard[t[0]][t[1]])(0,d.canGetOccupiedBy)(i.Side.Upward,t,e,r.GAME_STATE.f.currentBoard,r.GAME_STATE.tam_itself_is_tam_hue)&&n&&confirm(u.DICTIONARY.ja.whetherToTake)?U({type:"NonTamMove",data:{type:"SrcDst",src:(0,r.toAbsoluteCoord)(o),dest:(0,r.toAbsoluteCoord)(t)}}):B(o,e,t);else{let n;if("Tam2"!==e)return n={type:"NonTamMove",data:{type:"SrcDst",src:(0,r.toAbsoluteCoord)(o),dest:(0,r.toAbsoluteCoord)(t)}},void U(n);M(o,t)}}function Z(e){const[o,t]=e;return"Tam2"===r.GAME_STATE.f.currentBoard[o][t]}function j(e,o,t,n){if("Tam2"===t)return void M(e,n,o);const a={type:"NonTamMove",data:{type:"SrcStepDstFinite",step:(0,r.toAbsoluteCoord)(o),dest:(0,r.toAbsoluteCoord)(n),src:(0,r.toAbsoluteCoord)(e)}};Z(o)?(async()=>{await(0,A.animateStepTamLogo)(),await V(i.Side.Upward),await U(a)})():U(a)}async function Y(e,o){const t=await K("inf after step",e,(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if(!t.legal)throw alert(`Illegal API sent, the reason being ${t.whyIllegal}`),new Error(`Illegal API sent, the reason being ${t.whyIllegal}`);Z((0,r.fromAbsoluteCoord)(e.step))&&(await(0,A.animateStepTamLogo)(),await V(i.Side.Upward)),q(t.ciurl),document.getElementById("cancelButton").remove(),(0,A.eraseGuide)();const a=(0,r.fromAbsoluteCoord)(e.step),l=(0,r.fromAbsoluteCoord)(e.plannedDirection),s=(0,n.createPieceSizeImageOnBoardByPath_Shifted)(a,"selection2","selection");s.style.zIndex="200";const c=document.getElementById("contains_guides");c.appendChild(s);const u={color:o.color,prof:o.prof,side:i.Side.Upward},{infinite:_}=(0,d.calculateMovablePositions)(a,u,r.GAME_STATE.f.currentBoard,r.GAME_STATE.tam_itself_is_tam_hue),f=function(e,o,t,n){return e.filter((e=>{const r=function([e,t]){const[n,r]=o;return[e-n,t-r]},a=n.filter((e=>e)).length,[i,l]=r(e),[s,d]=r(t);return i*d-s*l==0&&i*s+l*d>0&&Math.max(Math.abs(i),Math.abs(l))<=a}))}(_,a,l,t.ciurl),p=(0,r.fromAbsoluteCoord)(e.src),m=(0,n.createGuideImageAt)(p,"yellow_circle");m.addEventListener("click",(function(o){(0,A.eraseGuide)(),k({type:"AfterHalfAcceptance",dest:null},{src:p,step:a,stepping_ciurl:t.ciurl,planned_destination:e.plannedDirection})})),m.style.zIndex="200",c.appendChild(m);for(let o=0;o<f.length;o++){const l=f[o];if((0,i.coordEq)(p,l))continue;if(!(0,d.canGetOccupiedByNonTam)(i.Side.Upward,l,r.GAME_STATE.f.currentBoard,r.GAME_STATE.tam_itself_is_tam_hue))continue;const s=(0,n.createGuideImageAt)(f[o],"green_circle");s.addEventListener("click",(function(o){k({type:"AfterHalfAcceptance",dest:(0,r.toAbsoluteCoord)(l)},{src:p,step:a,stepping_ciurl:t.ciurl,planned_destination:e.plannedDirection})})),s.style.zIndex="200",c.appendChild(s)}}function q(e,o){(0,A.drawCiurl)(e,o),E.KRUT_CRUOP&&new Audio("sound/ciurl4.ogg").play()}function W(e,o,t,a){const l=v;if(null==l)throw new Error("though stepping, null startpoint!!!!!");if("Hop1zuo1"===l[0])throw new Error("though stepping, hop1zuo1 startpoint!!!!!");for(let s=0;s<a.length;s++){if(!(0,d.canGetOccupiedBy)(i.Side.Upward,a[s],o.piece,r.GAME_STATE.f.currentBoard,r.GAME_STATE.tam_itself_is_tam_hue)){const[e,l]=a[s],d=r.GAME_STATE.f.currentBoard[e][l];if("Tam2"!==o.piece&&"Tam2"!==d&&null!==d&&d.side===i.Side.Downward){const e=(0,n.createGuideImageAt)(a[s],"守");e.style.zIndex="200",t.append(e)}continue}const c=(0,n.createGuideImageAt)(a[s],o.path);c.addEventListener("click","yellow_circle"===o.path?function(){(0,A.eraseGuide)(),j(l,e,o.piece,a[s])}:function(){(0,A.eraseGuide)(),Y({type:"InfAfterStep",step:(0,r.toAbsoluteCoord)(e),plannedDirection:(0,r.toAbsoluteCoord)(a[s]),src:(0,r.toAbsoluteCoord)(l)},{color:o.piece.color,prof:o.piece.prof})}),c.style.zIndex="200",t.appendChild(c)}}function J(e){document.getElementById("score_display").classList.add("nocover"),document.getElementById("yaku_all").style.left="750px";const o=r.GAME_STATE.log2_rate;(0,A.drawMak2Io1)(),r.GAME_STATE.log2_rate={0:1,1:2,2:3,3:4,4:5,5:6,6:6}[o];const t=document.getElementById("denote_rate");setTimeout((async()=>{t.style.display="block",await new Promise((e=>setTimeout(e,161.86))),await(0,A.animateNode)(t,1e3*.8093,{to:(0,A.getDenoteRateNodeTopLeft)(r.GAME_STATE.log2_rate),from:(0,A.getDenoteRateNodeTopLeft)(o)}),await new Promise((e=>setTimeout(e,500*.8093))),(0,A.drawMak2Io1)(),e?g():r.GAME_STATE.is_my_turn=!0,document.getElementById("protective_cover_over_field_while_asyncawait").classList.add("nocover")}),161.86)}function Q(e,o){(0,f.drawFinalScoreDisplay)(function(e,o){const t=e=>[e.slice(0,-1).reduce(((e,o)=>e+o),0),e[e.length-1]],n=e?e=>[e.reduce(((e,o)=>e+o),0)]:t;if(0===o[0].length)throw new Error("why did the game end without any movement of points?");return 0===o[1].length?[n(o[0])]:0===o[2].length?[t(o[0]),n(o[1])]:0===o[3].length?[t(o[0]),t(o[1]),n(o[2])]:[t(o[0]),t(o[1]),t(o[2]),n(o[3])]}(o,r.GAME_STATE.scores_of_each_season)),document.getElementById("my_icon").style.opacity="1",document.getElementById("larta_opponent").style.opacity="1",document.getElementById("opponent_message").textContent="you win!"===e?u.DICTIONARY.ja.gameResult.victory:"draw"===e?u.DICTIONARY.ja.gameResult.draw:u.DICTIONARY.ja.gameResult.loss,document.getElementById("opponent_message_linzklar").textContent="you win!"===e?u.GAME_END_LINZKLAR.victory:"draw"===e?u.GAME_END_LINZKLAR.draw:u.GAME_END_LINZKLAR.loss,w.KIAR_ARK.body=[...w.KIAR_ARK.body,{type:"tymoktaxot",dat:"星一周"}],w.KIAR_ARK.header=[...w.KIAR_ARK.header,{type:"header",dat:`{終時:${(new Date).toISOString()}}`}]}async function V(e){var o,t,n,a,l;document.getElementById("score_display").classList.add("nocover"),document.getElementById("yaku_all").style.left="750px";const s=document.getElementById("denote_score"),d=r.GAME_STATE.my_score;return r.GAME_STATE.my_score+=(e===i.Side.Upward?-5:5)*Math.pow(2,r.GAME_STATE.log2_rate),await new Promise((e=>setTimeout(e,161.86))),await(0,A.animateNode)(s,1e3*.8093,{to:(0,A.getDenoteScoreNodeTopLeft)(r.GAME_STATE.my_score),from:(0,A.getDenoteScoreNodeTopLeft)(d)}),r.GAME_STATE.my_score>=40?(Q("you win!",!0),void(null===(o=document.getElementById("protective_cover_over_field_while_waiting_for_opponent"))||void 0===o||o.classList.remove("nocover"))):r.GAME_STATE.my_score<=0?(Q("you lose...",!0),void(null===(t=document.getElementById("protective_cover_over_field_while_waiting_for_opponent"))||void 0===t||t.classList.remove("nocover"))):(await new Promise((e=>setTimeout(e,242.79))),(0,A.drawMak2Io1)(),await new Promise((e=>setTimeout(e,242.79))),null===(n=document.getElementById("protective_cover_over_field"))||void 0===n||n.classList.add("nocover"),null===(a=document.getElementById("protective_tam_cover_over_field"))||void 0===a||a.classList.add("nocover"),void(null===(l=document.getElementById("protective_cover_over_field_while_asyncawait"))||void 0===l||l.classList.add("nocover")))}function ee(e,o){document.getElementById("score_display").classList.add("nocover"),document.getElementById("yaku_all").style.left="750px";const t=document.getElementById("denote_season"),n=document.getElementById("denote_score"),a=r.GAME_STATE.my_score,l=r.GAME_STATE.season;r.GAME_STATE.my_score+=e*Math.pow(2,r.GAME_STATE.log2_rate);const s={0:1,1:2,2:3,3:null}[l];null!=s?(r.GAME_STATE.season=s,setTimeout((async()=>{var e,s,d,c,_;await(0,A.animateNode)(n,1e3*.8093,{to:(0,A.getDenoteScoreNodeTopLeft)(r.GAME_STATE.my_score),from:(0,A.getDenoteScoreNodeTopLeft)(a)}),r.GAME_STATE.my_score>=40?Q("you win!",!1):r.GAME_STATE.my_score<=0?Q("you lose...",!1):(await(0,A.animateNode)(t,566.51,{to:(0,A.getDenoteSeasonNodeTopLeft)(r.GAME_STATE.season),from:(0,A.getDenoteSeasonNodeTopLeft)(l)}),await new Promise((e=>setTimeout(e,242.79))),(0,A.drawMak2Io1)(),alert(u.DICTIONARY.ja.newSeason[r.GAME_STATE.season]),await new Promise((e=>setTimeout(e,242.79))),null===(e=document.getElementById("protective_cover_over_field"))||void 0===e||e.classList.remove("nocover"),null===(s=document.getElementById("protective_tam_cover_over_field"))||void 0===s||s.classList.remove("nocover"),await new Promise((e=>setTimeout(e,4e3*.8093))),r.GAME_STATE.f={currentBoard:r.GAME_STATE.IA_is_down?(0,i.rotateBoard)((0,i.rotateBoard)(r.initial_board_with_IA_down)):(0,i.rotateBoard)(r.initial_board_with_IA_down),hop1zuo1OfDownward:[],hop1zuo1OfUpward:[]},r.GAME_STATE.log2_rate=0,(0,A.drawMak2Io1)(),h(),r.GAME_STATE.last_move_focus=null,console.log("drawField #",11),(0,A.drawField)({focus:null}),await new Promise((e=>setTimeout(e,242.79))),null===(d=document.getElementById("protective_cover_over_field"))||void 0===d||d.classList.add("nocover"),null===(c=document.getElementById("protective_tam_cover_over_field"))||void 0===c||c.classList.add("nocover"),r.GAME_STATE.is_my_turn=o,null===(_=document.getElementById("protective_cover_over_field_while_asyncawait"))||void 0===_||_.classList.add("nocover"))}),161.86)):setTimeout((async()=>(await(0,A.animateNode)(n,1e3*.8093,{to:(0,A.getDenoteScoreNodeTopLeft)(r.GAME_STATE.my_score),from:(0,A.getDenoteScoreNodeTopLeft)(a)}),alert(u.DICTIONARY.ja.gameEnd),r.GAME_STATE.my_score>20?void Q("you win!",!1):r.GAME_STATE.my_score<20?void Q("you lose...",!1):void Q("draw",!1))),161.86)}o.sendStuffTo=b,o.calculateHandsAndScore=H,o.drawCiurlWithAudio=q,o.selectOwnPieceOnBoard=function(e,o){if((0,A.eraseGuide)(),null!=v&&"Hop1zuo1"!==v[0]&&(0,i.coordEq)(v,e))v=null;else{v=e;const t=document.getElementById("contains_guides"),a=(0,n.createPieceSizeImageOnBoardByPath)(e,"selection2","selection");a.style.cursor="pointer",a.addEventListener("click",(function(){(0,A.eraseGuide)(),v=null})),t.appendChild(a);const{finite:i,infinite:l}=(0,d.calculateMovablePositions)(e,o,r.GAME_STATE.f.currentBoard,r.GAME_STATE.tam_itself_is_tam_hue);!function(e,o,t,r){for(let a=0;a<r.length;a++){const i=(0,n.createGuideImageAt)(r[a],"yellow_circle");i.addEventListener("click",(function(){(0,A.eraseGuide)(),F(o,e,r[a],!0)})),i.addEventListener("contextmenu",(function(t){(0,A.eraseGuide)(),t.preventDefault(),F(o,e,r[a],!1)})),t.appendChild(i)}}(e,o,t,[...i,...l])}},o.selectOwnPieceOnHop1zuo1=function(e,o,t){if((0,A.eraseGuide)(),null==v||"Hop1zuo1"!==v[0]||v[1]!==e){v=["Hop1zuo1",e];const a=document.getElementById("contains_guides_on_upward"),i=(0,n.createPieceSizeImageOnBoardByPathAndXY)(1+(c.MAX_PIECE_SIZE-c.PIECE_SIZE)/2,(0,c.hop1_zuo1_left_position)({ind:e,list_length:t}),"selection2","selection");i.style.cursor="pointer",i.addEventListener("click",(function(){(0,A.eraseGuide)(),v=null})),a.appendChild(i);const l=document.getElementById("contains_guides");for(let e=0;e<9;e++)for(let t=0;t<9;t++){const a=[e,t];if(null!=r.GAME_STATE.f.currentBoard[e][t])continue;const i=(0,n.createGuideImageAt)(a,"yellow_circle");i.addEventListener("click",(function(){if((0,A.eraseGuide)(),null!=r.GAME_STATE.f.currentBoard[a[0]][a[1]])throw alert("Cannot parachute onto an occupied square"),new Error("Cannot parachute onto an occupied square");const e=(0,r.toAbsoluteCoord)(a);U({type:"NonTamMove",data:{type:"FromHand",color:o.color,prof:o.prof,dest:e}})})),l.appendChild(i)}}else v=null},o.increaseRateAndAnimate=J,o.animatePunishStepTamAndCheckPerzej=V,o.endSeason=ee},548:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LORK_LIAR=o.LORK_LIAR_ENABLED=o.KRUT_CRUOP=void 0;const n=t(447),r=t(513),a=t(204);console.log("drawField #",0),(0,n.drawField)({focus:null}),a.KIAR_ARK.header=[...a.KIAR_ARK.header,{type:"header",dat:`{始時:${(new Date).toISOString()}}`}],o.KRUT_CRUOP=!0,document.getElementById("krut_cruop_button").addEventListener("click",(()=>{o.KRUT_CRUOP=!o.KRUT_CRUOP,console.log("KRUT_CRUOP now set to",o.KRUT_CRUOP),document.getElementById("krut_cruop_button").src=o.KRUT_CRUOP?"image/kut2_cuop2_active.png":"image/kut2_cuop2_inactive.png"}));const i=new Audio("sound/cetkaik_leti_duxe_.ogg");i.loop=!0;let l=!1;function s(){o.LORK_LIAR_ENABLED=!o.LORK_LIAR_ENABLED,!l&&o.LORK_LIAR_ENABLED&&(i.play(),l=!0),document.getElementById("lork_liar_button").src=o.LORK_LIAR_ENABLED?"image/lok1_lia1_active.png":"image/lok1_lia1_inactive.png",document.getElementById("volume_slidebar").disabled=!o.LORK_LIAR_ENABLED,i.volume=o.LORK_LIAR_ENABLED?o.LORK_LIAR/100:0}o.LORK_LIAR_ENABLED=!1,o.LORK_LIAR=Number(document.getElementById("volume_slidebar").value),i.volume=o.LORK_LIAR_ENABLED?o.LORK_LIAR/100:0,document.getElementById("lork_liar_button").addEventListener("click",s),document.getElementById("volume_slidebar").addEventListener("input",(()=>{o.LORK_LIAR=Number(document.getElementById("volume_slidebar").value),i.volume=o.LORK_LIAR_ENABLED?o.LORK_LIAR/100:0})),document.getElementById("kait_kaik_button").addEventListener("click",(()=>{document.getElementById("kait_kaik").classList.add("nocover"),r.GAME_STATE.is_my_turn=JSON.parse(sessionStorage.is_first_move_my_move),a.KIAR_ARK.header=[...a.KIAR_ARK.header,{type:"header",dat:`{一位色:${r.GAME_STATE.is_my_turn===r.GAME_STATE.IA_is_down?"黒":"赤"}}`}],o.LORK_LIAR_ENABLED||s()})),"cpu"===sessionStorage.vs?document.getElementById("opponent_icon").innerHTML='<img src="image/nystiper2.png">':"someone"===sessionStorage.vs?document.getElementById("opponent_icon").innerHTML='<img src="image/larta2.png">':location.href="entrance.html"},849:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.animateOpponentTamSteppingDuringLatter=o.animateOpponentTamSteppingDuringFormer=o.animateOpponentTamNoStep=o.animateOpponentFromHand=o.toColorProf=o.animateOpponentSrcDst=o.animateOpponentInfAfterStep=o.position_for_temporarily_appending_hop1zuo1_of_downward=o.animateOpponentSrcStepDstFinite=void 0;const n=t(892),r=t(513),a=t(495),i=t(519),l=t(447),s=t(935),d=t(798),c=t(204),u=t(50);function _(){return r.GAME_STATE.f.hop1zuo1OfDownward.length<=8?{top:-135,left:1+r.GAME_STATE.f.hop1zuo1OfDownward.length*a.BOX_SIZE+(a.MAX_PIECE_SIZE-a.PIECE_SIZE)/2}:{top:-135,left:1+9*a.BOX_SIZE+(a.MAX_PIECE_SIZE-a.PIECE_SIZE)/2}}function f(e){const o=(()=>{if("Tam2"===e)throw new Error("tried to convert Tam2 into downward");if(e.side===n.Side.Downward)throw new Error("tried to convert an already downward piece to downward");if(e.side===n.Side.Upward)return{color:e.color,prof:e.prof,side:n.Side.Downward};throw e.side,new Error("should not reach here")})(),t=(0,i.calculateHandsAndScore)(r.GAME_STATE.f.hop1zuo1OfDownward);r.GAME_STATE.f.hop1zuo1OfDownward.push(o);const a=(0,i.calculateHandsAndScore)(r.GAME_STATE.f.hop1zuo1OfDownward);a.score!==t.score&&(document.getElementById("protective_cover_over_field_while_waiting_for_opponent").classList.remove("nocover"),document.getElementById("protective_cover_over_field_while_asyncawait").classList.remove("nocover"),window.setTimeout((async()=>{await p(a)}),0),window.setTimeout((()=>{(0,d.drawScoreDisplay)(a.hands)}),1e3*.8093))}async function p(e){const o=e.score;console.log("poll whether ty mok1 or ta xot1");const t=await(0,i.sendStuffTo)("whethertymokpoll","`polling for whether the declaration is ty mok1 or ta xot1`",{},(e=>(console.log("Success; the server returned:",JSON.stringify(e)),e)));if(!t.legal)throw alert(`sending TyMok1OrTaXot1Poll somehow resulted in an error: ${t.whyIllegal}`),new Error(`sending TyMok1OrTaXot1Poll somehow resulted in an error: ${t.whyIllegal}`);if("not yet"!==t.content){console.log("ding!");const n=document.getElementById("score_display");for(await new Promise((e=>setTimeout(e,242.79)));!n.hasChildNodes();)await new Promise((e=>setTimeout(e,80.93)));if("ty mok1"===t.content)n.innerHTML+='<img src="image/再行.png" style="position: absolute; left: 660px; top: 125px; " height="200">',await new Promise((e=>setTimeout(e,4046.5))),console.log("go on with ty mok1"),(0,i.increaseRateAndAnimate)(!1),c.KIAR_ARK.body=[...c.KIAR_ARK.body,{type:"tymoktaxot",dat:`或為${e.hands.join("加")}\n再行`}];else{n.innerHTML+='<img src="image/終季.png" style="position: absolute; left: 660px; top: 125px; " height="200">',await new Promise((e=>setTimeout(e,4046.5))),console.log("go on with ta xot1");const a=["春","夏","秋","冬"][r.GAME_STATE.season];(0,i.endSeason)(-o,t.content.is_first_move_my_move),c.KIAR_ARK.body=[...c.KIAR_ARK.body,{type:"tymoktaxot",dat:`或為${e.hands.join("加")}而手${(0,u.toDigitsLinzklar)(o*Math.pow(2,r.GAME_STATE.log2_rate)).join("")}\n終季\t${a}終`}]}}else document.getElementById("protective_cover_over_field_while_waiting_for_opponent").classList.remove("nocover"),await new Promise((e=>setTimeout(e,500*.8093))),await p(e)}async function m(e,o,t,d){const[c,u]=e,[p,m]=o,[E,A]=t,y=r.GAME_STATE.f.currentBoard[c][u];if(null===y)throw new Error("src is unoccupied");const T=r.GAME_STATE.f.currentBoard[p][m];if(null===T)throw new Error("step is unoccupied");"Tam2"===T&&(await(0,l.animateStepTamLogo)(),await(0,i.animatePunishStepTamAndCheckPerzej)(n.Side.Downward));const g=r.GAME_STATE.f.currentBoard[E][A];if(null===g||(0,n.coordEq)(e,t)){const i=document.getElementById(`field_piece_${c}_${u}`);return await(0,l.animateNode)(i,606.975,{to:(0,a.coordToPieceXY_Shifted)(o),from:(0,a.coordToPieceXY)(e)}),await new Promise((e=>setTimeout(e,242.79))),await(0,l.animateNode)(i,606.975,{to:(0,a.coordToPieceXY)(t),from:(0,a.coordToPieceXY)(e)}),d&&(await(0,l.animateWaterEntryLogo)(),(0,l.drawCiurl)(d,n.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),d.filter((e=>e)).length<3)?(alert(s.DICTIONARY.ja.failedWaterEntry),console.log("drawField opponent #",18),r.GAME_STATE.last_move_focus=[c,u],(0,l.drawField)({focus:[c,u]}),null):((0,n.coordEq)(e,t)||(r.GAME_STATE.f.currentBoard[c][u]=null,r.GAME_STATE.f.currentBoard[E][A]=y),console.log("drawField opponent #",19),r.GAME_STATE.last_move_focus=[E,A],(0,l.drawField)({focus:[E,A]}),(0,n.coordEq)(e,t)?null:w(g))}{const i=document.getElementById(`field_piece_${c}_${u}`),p=document.getElementById(`field_piece_${E}_${A}`);return await(0,l.animateNode)(i,606.975,{to:(0,a.coordToPieceXY_Shifted)(o),from:(0,a.coordToPieceXY)(e)}),await new Promise((e=>setTimeout(e,242.79))),await(0,l.animateNode)(i,606.975,{to:(0,a.coordToPieceXY)(t),from:(0,a.coordToPieceXY)(e)}),await new Promise((e=>setTimeout(e,242.79))),await(0,l.animateNode)(p,606.975,{to:_(),from:(0,a.coordToPieceXY)([E,A])},"50",180),d&&(await(0,l.animateWaterEntryLogo)(),(0,l.drawCiurl)(d,n.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),d.filter((e=>e)).length<3)?(alert(s.DICTIONARY.ja.failedWaterEntry),console.log("drawField opponent #",16),r.GAME_STATE.last_move_focus=[c,u],(0,l.drawField)({focus:[c,u]}),null):((0,n.coordEq)(e,t)||(f(g),r.GAME_STATE.f.currentBoard[c][u]=null,r.GAME_STATE.f.currentBoard[E][A]=y),console.log("drawField opponent #",17),r.GAME_STATE.last_move_focus=[E,A],(0,l.drawField)({focus:[E,A]}),(0,n.coordEq)(e,t)?null:w(g))}}function w(e){if("Tam2"===e)throw new Error("Tam2 was passed to the function `toColorProf`");return null===e?null:[e.color,e.prof]}async function E(e,o,t){const[i,d]=e,[c,u]=o,p=r.GAME_STATE.f.currentBoard[i][d];if(null===p)throw new Error("src is unoccupied");const m=r.GAME_STATE.f.currentBoard[c][u];if(null!==m){const e=document.getElementById(`field_piece_${i}_${d}`),o=document.getElementById(`field_piece_${c}_${u}`),w=606.975;if(await(0,l.animateNode)(e,w,{to:(0,a.coordToPieceXY)([c,u]),from:(0,a.coordToPieceXY)([i,d])}),await(0,l.animateNode)(o,w,{to:_(),from:(0,a.coordToPieceXY)([c,u])},"50",180),t.water_entry_ciurl&&(await(0,l.animateWaterEntryLogo)(),(0,l.drawCiurl)(t.water_entry_ciurl,n.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),t.water_entry_ciurl.filter((e=>e)).length<3))return alert(s.DICTIONARY.ja.failedWaterEntry),console.log("drawField opponent #",20),r.GAME_STATE.last_move_focus=[i,d],(0,l.drawField)({focus:[i,d]}),null;f(m),r.GAME_STATE.f.currentBoard[i][d]=null,r.GAME_STATE.f.currentBoard[c][u]=p,console.log("drawField opponent #",21),r.GAME_STATE.last_move_focus=[c,u],(0,l.drawField)({focus:[c,u]})}else{const e=document.getElementById(`field_piece_${i}_${d}`);if(await(0,l.animateNode)(e,1213.95,{to:(0,a.coordToPieceXY)([c,u]),from:(0,a.coordToPieceXY)([i,d])}),t.water_entry_ciurl&&(await(0,l.animateWaterEntryLogo)(),(0,l.drawCiurl)(t.water_entry_ciurl,n.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),t.water_entry_ciurl.filter((e=>e)).length<3))return alert(s.DICTIONARY.ja.failedWaterEntry),console.log("drawField opponent #",22),r.GAME_STATE.last_move_focus=[i,d],(0,l.drawField)({focus:[i,d]}),null;r.GAME_STATE.f.currentBoard[i][d]=null,r.GAME_STATE.f.currentBoard[c][u]=p,t.disable_focus?(0,l.drawField)({focus:null}):(console.log("drawField opponent #",23),r.GAME_STATE.last_move_focus=[c,u],(0,l.drawField)({focus:[c,u]}))}return w(m)}o.animateOpponentSrcStepDstFinite=async function(e){return await m((0,r.fromAbsoluteCoord)(e.src),(0,r.fromAbsoluteCoord)(e.step),(0,r.fromAbsoluteCoord)(e.dest),e.water_entry_ciurl)},o.position_for_temporarily_appending_hop1zuo1_of_downward=_,o.animateOpponentInfAfterStep=async function(e){const[o,t]=e.src,[d,c]=e.step,u=r.GAME_STATE.f.currentBoard[o][t];if(null===u)throw new Error("src is unoccupied");const p=r.GAME_STATE.f.currentBoard[d][c];if(null===p)throw new Error("step is unoccupied");"Tam2"===p&&(await(0,l.animateStepTamLogo)(),await(0,i.animatePunishStepTamAndCheckPerzej)(n.Side.Downward));const m=document.getElementById(`field_piece_${o}_${t}`);await(0,l.animateNode)(m,606.975,{to:(0,a.coordToPieceXY_Shifted)(e.step),from:(0,a.coordToPieceXY)(e.src)}),await new Promise((e=>setTimeout(e,242.79))),await async function(e,o,t){(0,l.drawArrow)(e,o),await new Promise((e=>setTimeout(e,2e3*.8093))),(0,l.drawCiurl)(t,n.Side.Downward),await new Promise((e=>setTimeout(e,485.58))),(0,l.eraseArrow)()}(e.step,e.plannedDirection,e.stepping_ciurl);const E=await e.finalResult,A=(0,r.fromAbsoluteCoord)(E.dest),[y,T]=A,g=r.GAME_STATE.f.currentBoard[y][T];if(null===g||(0,n.coordEq)(e.src,A)){if(await(0,l.animateNode)(m,606.975,{to:(0,a.coordToPieceXY)(A),from:(0,a.coordToPieceXY)(e.src)}),E.water_entry_ciurl){if(await(0,l.animateWaterEntryLogo)(),(0,l.drawCiurl)(E.water_entry_ciurl,n.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),E.water_entry_ciurl.filter((e=>e)).length<3)return alert(s.DICTIONARY.ja.failedWaterEntry),console.log("drawField opponent #",14),r.GAME_STATE.last_move_focus=[o,t],(0,l.drawField)({focus:[o,t]}),[E,null]}else if(E.thwarted_by_failing_water_entry_ciurl)return await(0,l.animateWaterEntryLogo)(),(0,l.drawCiurl)(E.thwarted_by_failing_water_entry_ciurl,n.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),alert(s.DICTIONARY.ja.failedWaterEntry),console.log("drawField opponent #",14),r.GAME_STATE.last_move_focus=[o,t],(0,l.drawField)({focus:[o,t]}),[E,null];return(0,n.coordEq)(e.src,A)||(r.GAME_STATE.f.currentBoard[o][t]=null,r.GAME_STATE.f.currentBoard[y][T]=u),console.log("drawField opponent #",15),r.GAME_STATE.last_move_focus=[y,T],(0,l.drawField)({focus:[y,T]}),[E,null]}{const i=document.getElementById(`field_piece_${y}_${T}`);return await(0,l.animateNode)(m,606.975,{to:(0,a.coordToPieceXY)(A),from:(0,a.coordToPieceXY)(e.src)}),await new Promise((e=>setTimeout(e,242.79))),await(0,l.animateNode)(i,606.975,{to:_(),from:(0,a.coordToPieceXY)([y,T])},"50",180),E.water_entry_ciurl&&(await(0,l.animateWaterEntryLogo)(),(0,l.drawCiurl)(E.water_entry_ciurl,n.Side.Downward),await new Promise((e=>setTimeout(e,500*.8093))),E.water_entry_ciurl.filter((e=>e)).length<3)?(alert(s.DICTIONARY.ja.failedWaterEntry),console.log("drawField opponent #",12),r.GAME_STATE.last_move_focus=[o,t],(0,l.drawField)({focus:[o,t]}),[E,null]):((0,n.coordEq)(e.src,A)||(f(g),r.GAME_STATE.f.currentBoard[o][t]=null,r.GAME_STATE.f.currentBoard[y][T]=u),console.log("drawField opponent #",13),r.GAME_STATE.last_move_focus=[y,T],(0,l.drawField)({focus:[y,T]}),[E,w(g)])}},o.animateOpponentSrcDst=async function(e){const o=(0,r.fromAbsoluteCoord)(e.src),t=(0,r.fromAbsoluteCoord)(e.dest);return e.water_entry_ciurl?await E(o,t,{water_entry_ciurl:e.water_entry_ciurl}):await E(o,t,{})},o.toColorProf=w,o.animateOpponentFromHand=async function(e,o){const t=r.GAME_STATE.f.hop1zuo1OfDownward.findIndex((o=>o.color===e.color&&o.prof===e.prof));if(-1===t)throw new Error("What should exist in the hand does not exist");const[n]=r.GAME_STATE.f.hop1zuo1OfDownward.splice(t,1),[i,s]=o;if(null!==r.GAME_STATE.f.currentBoard[i][s])throw new Error("Trying to parachute the piece onto an occupied space");const d=document.getElementById(`hop1zuo1OfDownward_${t}`);await(0,l.animateNode)(d,1213.95,{to:(0,a.coordToPieceXY)([i,s]),from:{top:-135,left:(0,a.hop1_zuo1_left_position)({ind:t,list_length:r.GAME_STATE.f.hop1zuo1OfDownward.length})}}),r.GAME_STATE.f.currentBoard[i][s]=n,console.log("drawField opponent #",24),r.GAME_STATE.last_move_focus=[i,s],(0,l.drawField)({focus:[i,s]})},o.animateOpponentTamNoStep=async function(e,o,t){const n=r.GAME_STATE.f.currentBoard[e[0]][e[1]];if(null===n)throw new Error("src is unoccupied");const i=document.getElementById(`field_piece_${e[0]}_${e[1]}`);await(0,l.animateNode)(i,1213.95,{to:(0,a.coordToPieceXY)(o),from:(0,a.coordToPieceXY)(e)}),r.GAME_STATE.f.currentBoard[e[0]][e[1]]=null,r.GAME_STATE.f.currentBoard[o[0]][o[1]]=n,console.log("drawField opponent #",25),(0,l.drawField)({focus:null});const s=document.getElementById(`field_piece_${o[0]}_${o[1]}`);await new Promise((e=>setTimeout(e,242.79))),await(0,l.animateNode)(s,1213.95,{to:(0,a.coordToPieceXY)(t),from:(0,a.coordToPieceXY)(o)}),r.GAME_STATE.f.currentBoard[o[0]][o[1]]=null,r.GAME_STATE.f.currentBoard[t[0]][t[1]]=n,console.log("drawField opponent #",26),r.GAME_STATE.last_move_focus=[t[0],t[1]],(0,l.drawField)({focus:[t[0],t[1]]})},o.animateOpponentTamSteppingDuringFormer=async function(e){await m(e.src,e.step,e.firstDest),await new Promise((e=>setTimeout(e,242.79))),await E(e.firstDest,e.secondDest,{})},o.animateOpponentTamSteppingDuringLatter=async function(e){await E(e.src,e.firstDest,{disable_focus:!0}),await new Promise((e=>setTimeout(e,242.79))),await m(e.firstDest,e.step,e.secondDest)}},460:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toPath_=o.toPath=void 0;const n=t(974),r=t(892);function a(e){return`${a=e.side,a===r.Side.Downward?"piece_rev":a===r.Side.Upward?"piece":a}/${t=e.color,t===n.Color.Huok2?"b":t===n.Color.Kok1?"r":t}${o=e.prof,o===n.Profession.Dau2?"dau":o===n.Profession.Gua2?"gua":o===n.Profession.Io?"io":o===n.Profession.Kauk2?"kauk":o===n.Profession.Kaun1?"kaun":o===n.Profession.Kua2?"kua":o===n.Profession.Maun1?"maun":o===n.Profession.Nuak1?"nuak":o===n.Profession.Tuk2?"tuk":o===n.Profession.Uai1?"uai":o}`;var o,t,a}o.toPath=a,o.toPath_=function(e){return"Tam2"===e?"piece/tam":a(e)}},798:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.drawScoreDisplay=o.drawFinalScoreDisplay=void 0;const n=t(431),r=t(728),a=t(447),i=t(50);function l(e,o){return e.map(((e,t)=>{const n=document.createElement("img");return n.src=`image/digit/${e}.png`,n.style.position="absolute",n.style.left=`${o.left}px`,n.style.top=`${.94*o.width*t+o.top}px`,n.width=o.width,n}))}function s(e){const o=(0,i.toDigitsLinzklar)(e);return l(o,{left:20,top:234-70*o.length/2,width:70})}o.drawFinalScoreDisplay=function(e){const o=e=>l((0,i.toDigitsLinzklar)(e.score),{left:530-60*e.column_index,top:23.5*(2-(0,i.toDigitsLinzklar)(e.score).length)+239,width:50}),t=[].concat(...e),n=20+t.reduce(((e,o)=>e+o),0),r=document.getElementById("final_score_display");r.classList.remove("nocover"),(0,a.removeChildren)(r),r.append(...Array.from({length:e.length},((o,t)=>function(e){const o=document.createElement("img");return o.src=`image/season/${["春","夏","秋","冬"][e.season]}.png`,o.style.position="absolute",o.style.left=`${e.left}px`,o.style.top="15px",o.width=50,o}({left:530-60*[].concat(...e.slice(0,t)).length,season:t})))),r.append(...t.flatMap(((e,t)=>o({score:e,column_index:t})))),r.append(...o({score:20,column_index:-1})),r.append(function(e){const o=document.createElement("img");return o.src="image/始.png",o.style.position="absolute",o.style.left="590px",o.style.top="15px",o.width=50,o}()),r.append(...s(n))},o.drawScoreDisplay=function(e){const o=e.sort(((e,o)=>{const t=["同色無抗行処","無抗行処","同色筆兵無傾","筆兵無傾","同色地心","地心","同色馬弓兵","馬弓兵","同色行行","行行","王","同色獣","獣","同色戦集","戦集","同色助友","助友","同色闇戦之集","闇戦之集","撃皇","皇再来"];return t.indexOf(e)-t.indexOf(o)}));if(o.length>11)throw new Error("too many hands");const[t,d]=[[550,60],[550,60],[550,60],[550,60],[550,60],[550,60],[550,60],[550,60],[550,60],[575,57],[585,53],[595,49]][o.length],c=document.getElementById("score_display");c.classList.remove("nocover"),(0,a.removeChildren)(c),document.getElementById("yaku_all").style.left="790px";const u=o.map((e=>n.hand_to_score[e])).reduce(((e,o)=>e+o),0);c.append(...o.flatMap(((e,o)=>{const a=t-d*o,s=l((0,i.toDigitsLinzklar)(n.hand_to_score[e]),{left:a,top:295,width:50});return"同色"===e.slice(0,2)?(s.push((0,r.createHandImage)(e.slice(2),{left:a,top_padding:15})),s.push((0,r.createBapPokImage)({left:a,top_padding:15}))):s.push((0,r.createHandImage)(e,{left:a,top_padding:15})),s}))),c.append(...s(u))}},50:(e,o)=>{function t(e){if(e%1!=0)throw new Error("non-integer");if(e>=200){const o=e%100==0?[]:n(e%100);return[...n(Math.floor(e/100)),"num100",...o]}if(e>=100)return["num100",...e%100==0?[]:t(e%100)];if(e<0)return["neg",...t(-e)];if(0==e)return["num00"];const o=e%10==0?[]:["num0"+e%10];return e>=20?[`num0${Math.floor(e/10)}`,"num10",...o]:e>=10?["num10",...o]:o}function n(e){if(e%1!=0)throw new Error("non-integer");if(e>=100)throw new Error("100 or more detected in toDigitsSub");if(e<=0)throw new Error("0 or less detected in toDigitsSub");if(e%10==0){if(e>=20)return[`num0${Math.floor(e/10)}`,"num10"];if(10==e)return["num10"];throw new Error("cannot happen")}{const o="num0"+e%10;return e>=20?[`num0${Math.floor(e/10)}`,o]:e>=10?["num10",o]:[o]}}Object.defineProperty(o,"__esModule",{value:!0}),o.toDigitsLinzklar=void 0,o.toDigitsLinzklar=function(e){return t(e).map((function(e){return{neg:"下",num00:"無",num01:"一",num02:"二",num03:"三",num04:"四",num05:"五",num06:"六",num07:"七",num08:"八",num09:"九",num10:"十",num100:"百"}[e]}))}}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var a=o[n]={exports:{}};return e[n].call(a.exports,a,a.exports,t),a.exports}t(548),t(787)})();